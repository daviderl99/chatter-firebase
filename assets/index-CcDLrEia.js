(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var rm={exports:{}},Bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function F1(){if(gv)return Bl;gv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Bl.Fragment=t,Bl.jsx=n,Bl.jsxs=n,Bl}var _v;function G1(){return _v||(_v=1,rm.exports=F1()),rm.exports}var F=G1(),sm={exports:{}},It={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function K1(){if(yv)return It;yv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,Y={};function H(D,W,rt){this.props=D,this.context=W,this.refs=Y,this.updater=rt||x}H.prototype.isReactComponent={},H.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},H.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function it(){}it.prototype=H.prototype;function at(D,W,rt){this.props=D,this.context=W,this.refs=Y,this.updater=rt||x}var nt=at.prototype=new it;nt.constructor=at,P(nt,H.prototype),nt.isPureReactComponent=!0;var dt=Array.isArray,ht={H:null,A:null,T:null,S:null,V:null},pt=Object.prototype.hasOwnProperty;function N(D,W,rt,tt,mt,Rt){return rt=Rt.ref,{$$typeof:r,type:D,key:W,ref:rt!==void 0?rt:null,props:Rt}}function b(D,W){return N(D.type,W,void 0,void 0,void 0,D.props)}function R(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function M(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(rt){return W[rt]})}var V=/\/+/g;function U(D,W){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):W.toString(36)}function C(){}function Ht(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function kt(D,W,rt,tt,mt){var Rt=typeof D;(Rt==="undefined"||Rt==="boolean")&&(D=null);var yt=!1;if(D===null)yt=!0;else switch(Rt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(D.$$typeof){case r:case t:yt=!0;break;case E:return yt=D._init,kt(yt(D._payload),W,rt,tt,mt)}}if(yt)return mt=mt(D),yt=tt===""?"."+U(D,0):tt,dt(mt)?(rt="",yt!=null&&(rt=yt.replace(V,"$&/")+"/"),kt(mt,W,rt,"",function(mn){return mn})):mt!=null&&(R(mt)&&(mt=b(mt,rt+(mt.key==null||D&&D.key===mt.key?"":(""+mt.key).replace(V,"$&/")+"/")+yt)),W.push(mt)),1;yt=0;var ce=tt===""?".":tt+":";if(dt(D))for(var Qt=0;Qt<D.length;Qt++)tt=D[Qt],Rt=ce+U(tt,Qt),yt+=kt(tt,W,rt,Rt,mt);else if(Qt=S(D),typeof Qt=="function")for(D=Qt.call(D),Qt=0;!(tt=D.next()).done;)tt=tt.value,Rt=ce+U(tt,Qt++),yt+=kt(tt,W,rt,Rt,mt);else if(Rt==="object"){if(typeof D.then=="function")return kt(Ht(D),W,rt,tt,mt);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return yt}function K(D,W,rt){if(D==null)return D;var tt=[],mt=0;return kt(D,tt,"","",function(Rt){return W.call(rt,Rt,mt++)}),tt}function et(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(rt){(D._status===0||D._status===-1)&&(D._status=1,D._result=rt)},function(rt){(D._status===0||D._status===-1)&&(D._status=2,D._result=rt)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var ct=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ut(){}return It.Children={map:K,forEach:function(D,W,rt){K(D,function(){W.apply(this,arguments)},rt)},count:function(D){var W=0;return K(D,function(){W++}),W},toArray:function(D){return K(D,function(W){return W})||[]},only:function(D){if(!R(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},It.Component=H,It.Fragment=n,It.Profiler=o,It.PureComponent=at,It.StrictMode=s,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht,It.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ht.H.useMemoCache(D)}},It.cache=function(D){return function(){return D.apply(null,arguments)}},It.cloneElement=function(D,W,rt){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var tt=P({},D.props),mt=D.key,Rt=void 0;if(W!=null)for(yt in W.ref!==void 0&&(Rt=void 0),W.key!==void 0&&(mt=""+W.key),W)!pt.call(W,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&W.ref===void 0||(tt[yt]=W[yt]);var yt=arguments.length-2;if(yt===1)tt.children=rt;else if(1<yt){for(var ce=Array(yt),Qt=0;Qt<yt;Qt++)ce[Qt]=arguments[Qt+2];tt.children=ce}return N(D.type,mt,void 0,void 0,Rt,tt)},It.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},It.createElement=function(D,W,rt){var tt,mt={},Rt=null;if(W!=null)for(tt in W.key!==void 0&&(Rt=""+W.key),W)pt.call(W,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(mt[tt]=W[tt]);var yt=arguments.length-2;if(yt===1)mt.children=rt;else if(1<yt){for(var ce=Array(yt),Qt=0;Qt<yt;Qt++)ce[Qt]=arguments[Qt+2];mt.children=ce}if(D&&D.defaultProps)for(tt in yt=D.defaultProps,yt)mt[tt]===void 0&&(mt[tt]=yt[tt]);return N(D,Rt,void 0,void 0,null,mt)},It.createRef=function(){return{current:null}},It.forwardRef=function(D){return{$$typeof:m,render:D}},It.isValidElement=R,It.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:et}},It.memo=function(D,W){return{$$typeof:_,type:D,compare:W===void 0?null:W}},It.startTransition=function(D){var W=ht.T,rt={};ht.T=rt;try{var tt=D(),mt=ht.S;mt!==null&&mt(rt,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Ut,ct)}catch(Rt){ct(Rt)}finally{ht.T=W}},It.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()},It.use=function(D){return ht.H.use(D)},It.useActionState=function(D,W,rt){return ht.H.useActionState(D,W,rt)},It.useCallback=function(D,W){return ht.H.useCallback(D,W)},It.useContext=function(D){return ht.H.useContext(D)},It.useDebugValue=function(){},It.useDeferredValue=function(D,W){return ht.H.useDeferredValue(D,W)},It.useEffect=function(D,W,rt){var tt=ht.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(D,W)},It.useId=function(){return ht.H.useId()},It.useImperativeHandle=function(D,W,rt){return ht.H.useImperativeHandle(D,W,rt)},It.useInsertionEffect=function(D,W){return ht.H.useInsertionEffect(D,W)},It.useLayoutEffect=function(D,W){return ht.H.useLayoutEffect(D,W)},It.useMemo=function(D,W){return ht.H.useMemo(D,W)},It.useOptimistic=function(D,W){return ht.H.useOptimistic(D,W)},It.useReducer=function(D,W,rt){return ht.H.useReducer(D,W,rt)},It.useRef=function(D){return ht.H.useRef(D)},It.useState=function(D){return ht.H.useState(D)},It.useSyncExternalStore=function(D,W,rt){return ht.H.useSyncExternalStore(D,W,rt)},It.useTransition=function(){return ht.H.useTransition()},It.version="19.1.1",It}var vv;function ep(){return vv||(vv=1,sm.exports=K1()),sm.exports}var wt=ep(),am={exports:{}},jl={},om={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function Q1(){return Ev||(Ev=1,function(r){function t(K,et){var ct=K.length;K.push(et);t:for(;0<ct;){var Ut=ct-1>>>1,D=K[Ut];if(0<o(D,et))K[Ut]=et,K[ct]=D,ct=Ut;else break t}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var et=K[0],ct=K.pop();if(ct!==et){K[0]=ct;t:for(var Ut=0,D=K.length,W=D>>>1;Ut<W;){var rt=2*(Ut+1)-1,tt=K[rt],mt=rt+1,Rt=K[mt];if(0>o(tt,ct))mt<D&&0>o(Rt,tt)?(K[Ut]=Rt,K[mt]=ct,Ut=mt):(K[Ut]=tt,K[rt]=ct,Ut=rt);else if(mt<D&&0>o(Rt,ct))K[Ut]=Rt,K[mt]=ct,Ut=mt;else break t}}return et}function o(K,et){var ct=K.sortIndex-et.sortIndex;return ct!==0?ct:K.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],_=[],E=1,w=null,S=3,x=!1,P=!1,Y=!1,H=!1,it=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function dt(K){for(var et=n(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=K)s(_),et.sortIndex=et.expirationTime,t(g,et);else break;et=n(_)}}function ht(K){if(Y=!1,dt(K),!P)if(n(g)!==null)P=!0,pt||(pt=!0,U());else{var et=n(_);et!==null&&kt(ht,et.startTime-K)}}var pt=!1,N=-1,b=5,R=-1;function M(){return H?!0:!(r.unstable_now()-R<b)}function V(){if(H=!1,pt){var K=r.unstable_now();R=K;var et=!0;try{t:{P=!1,Y&&(Y=!1,at(N),N=-1),x=!0;var ct=S;try{e:{for(dt(K),w=n(g);w!==null&&!(w.expirationTime>K&&M());){var Ut=w.callback;if(typeof Ut=="function"){w.callback=null,S=w.priorityLevel;var D=Ut(w.expirationTime<=K);if(K=r.unstable_now(),typeof D=="function"){w.callback=D,dt(K),et=!0;break e}w===n(g)&&s(g),dt(K)}else s(g);w=n(g)}if(w!==null)et=!0;else{var W=n(_);W!==null&&kt(ht,W.startTime-K),et=!1}}break t}finally{w=null,S=ct,x=!1}et=void 0}}finally{et?U():pt=!1}}}var U;if(typeof nt=="function")U=function(){nt(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ht=C.port2;C.port1.onmessage=V,U=function(){Ht.postMessage(null)}}else U=function(){it(V,0)};function kt(K,et){N=it(function(){K(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(K){switch(S){case 1:case 2:case 3:var et=3;break;default:et=S}var ct=S;S=et;try{return K()}finally{S=ct}},r.unstable_requestPaint=function(){H=!0},r.unstable_runWithPriority=function(K,et){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ct=S;S=K;try{return et()}finally{S=ct}},r.unstable_scheduleCallback=function(K,et,ct){var Ut=r.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Ut+ct:Ut):ct=Ut,K){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ct+D,K={id:E++,callback:et,priorityLevel:K,startTime:ct,expirationTime:D,sortIndex:-1},ct>Ut?(K.sortIndex=ct,t(_,K),n(g)===null&&K===n(_)&&(Y?(at(N),N=-1):Y=!0,kt(ht,ct-Ut))):(K.sortIndex=D,t(g,K),P||x||(P=!0,pt||(pt=!0,U()))),K},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(K){var et=S;return function(){var ct=S;S=et;try{return K.apply(this,arguments)}finally{S=ct}}}}(lm)),lm}var Tv;function Y1(){return Tv||(Tv=1,om.exports=Q1()),om.exports}var um={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function X1(){if(Av)return We;Av=1;var r=ep();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:_,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,We.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,E)},We.flushSync=function(g){var _=f.T,E=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=_,s.p=E,s.d.f()}},We.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},We.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},We.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,w=m(E,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,x=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):E==="script"&&s.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},We.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},We.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,w=m(E,_.crossOrigin);s.d.L(g,E,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},We.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},We.requestFormReset=function(g){s.d.r(g)},We.unstable_batchedUpdates=function(g,_){return g(_)},We.useFormState=function(g,_,E){return f.H.useFormState(g,_,E)},We.useFormStatus=function(){return f.H.useHostTransitionStatus()},We.version="19.1.1",We}var bv;function $1(){if(bv)return um.exports;bv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),um.exports=X1(),um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function W1(){if(Sv)return jl;Sv=1;var r=Y1(),t=ep(),n=$1();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function _(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=_(e),i!==null)return i;e=e.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),at=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function Ht(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case P:return"Fragment";case H:return"Profiler";case Y:return"StrictMode";case ht:return"Suspense";case pt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case nt:return(e.displayName||"Context")+".Provider";case at:return(e._context.displayName||"Context")+".Consumer";case dt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return i=e.displayName||null,i!==null?i:Ht(e.type)||"Memo";case b:i=e._payload,e=e._init;try{return Ht(e(i))}catch{}}return null}var kt=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Ut=[],D=-1;function W(e){return{current:e}}function rt(e){0>D||(e.current=Ut[D],Ut[D]=null,D--)}function tt(e,i){D++,Ut[D]=e.current,e.current=i}var mt=W(null),Rt=W(null),yt=W(null),ce=W(null);function Qt(e,i){switch(tt(yt,i),tt(Rt,e),tt(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Fy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Fy(i),e=Gy(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(mt),tt(mt,e)}function mn(){rt(mt),rt(Rt),rt(yt)}function Hn(e){e.memoizedState!==null&&tt(ce,e);var i=mt.current,a=Gy(i,e.type);i!==a&&(tt(Rt,e),tt(mt,a))}function Cn(e){Rt.current===e&&(rt(mt),rt(Rt)),ce.current===e&&(rt(ce),xl._currentValue=ct)}var ii=Object.prototype.hasOwnProperty,fr=r.unstable_scheduleCallback,pn=r.unstable_cancelCallback,dr=r.unstable_shouldYield,ms=r.unstable_requestPaint,Ce=r.unstable_now,ps=r.unstable_getCurrentPriorityLevel,Fn=r.unstable_ImmediatePriority,ma=r.unstable_UserBlockingPriority,gs=r.unstable_NormalPriority,sf=r.unstable_LowPriority,pa=r.unstable_IdlePriority,Vo=r.log,wu=r.unstable_setDisableYieldValue,he=null,Yt=null;function gn(e){if(typeof Vo=="function"&&wu(e),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(he,e)}catch{}}var Xe=Math.clz32?Math.clz32:_s,Ru=Math.log,af=Math.LN2;function _s(e){return e>>>=0,e===0?32:31-(Ru(e)/af|0)|0}var ys=256,vs=4194304;function Gn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ga(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Gn(l):(v&=T,v!==0?h=Gn(v):a||(a=T&~e,a!==0&&(h=Gn(a))))):(T=l&~d,T!==0?h=Gn(T):v!==0?h=Gn(v):a||(a=l&~e,a!==0&&(h=Gn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Es(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function xo(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var e=ys;return ys<<=1,(ys&4194048)===0&&(ys=256),e}function Uo(){var e=vs;return vs<<=1,(vs&62914560)===0&&(vs=4194304),e}function Mi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Vi(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ko(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,I=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-Xe(a),Z=1<<Q;T[Q]=0,I[Q]=-1;var z=j[Q];if(z!==null)for(j[Q]=null,Q=0;Q<z.length;Q++){var q=z[Q];q!==null&&(q.lane&=-536870913)}a&=~Z}l!==0&&ri(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function ri(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Xe(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Lo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Xe(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function mr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _a(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pr(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:cv(e.type))}function Iu(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var se=Math.random().toString(36).slice(2),De="__reactFiber$"+se,Te="__reactProps$"+se,Dn="__reactContainer$"+se,Bo="__reactEvents$"+se,of="__reactListeners$"+se,gr="__reactHandles$"+se,Cu="__reactResources$"+se,Ts="__reactMarker$"+se;function _r(e){delete e[De],delete e[Te],delete e[Bo],delete e[of],delete e[gr]}function xi(e){var i=e[De];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Dn]||a[De]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Xy(e);e!==null;){if(a=e[De])return a;e=Xy(e)}return i}e=a,a=e.parentNode}return null}function si(e){if(e=e[De]||e[Dn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ai(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function nn(e){var i=e[Cu];return i||(i=e[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ge(e){e[Ts]=!0}var jo=new Set,ya={};function Kn(e,i){Pi(e,i),Pi(e+"Capture",i)}function Pi(e,i){for(ya[e]=i,e=0;e<i.length;e++)jo.add(i[e])}var Du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},As={};function Ou(e){return ii.call(As,e)?!0:ii.call(Nu,e)?!1:Du.test(e)?As[e]=!0:(Nu[e]=!0,!1)}function yr(e,i,a){if(Ou(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function oi(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function ze(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var bs,Mu;function Ui(e){if(bs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);bs=i&&i[1]||"",Mu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+e+Mu}var va=!1;function Ea(e,i){if(!e||va)return"";va=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var z=q}Reflect.construct(e,[],Z)}else{try{Z.call()}catch(q){z=q}e.call(Z.prototype)}}else{try{throw Error()}catch(q){z=q}(Z=e())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var I=v.split(`
`),j=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===j.length)for(l=I.length-1,h=j.length-1;1<=l&&0<=h&&I[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==j[h]){var Q=`
`+I[l].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=l&&0<=h);break}}}finally{va=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ui(a):""}function zo(e){switch(e.tag){case 26:case 27:case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return Ea(e.type,!1);case 11:return Ea(e.type.render,!1);case 1:return Ea(e.type,!0);case 31:return Ui("Activity");default:return""}}function Ta(e){try{var i="";do i+=zo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qo(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function lf(e){var i=qo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Aa(e){e._valueTracker||(e._valueTracker=lf(e))}function Ho(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=qo(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var uf=/[\n"\\]/g;function Ae(e){return e.replace(uf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _n(e,i,a,l,h,d,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+rn(i)):e.value!==""+rn(i)&&(e.value=""+rn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?vr(e,v,rn(i)):a!=null?vr(e,v,rn(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+rn(T):e.removeAttribute("name")}function ws(e,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+rn(a):"",i=i!=null?""+rn(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function vr(e,i,a){i==="number"&&Ss(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ki(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+rn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Wt(e,i,a){if(i!=null&&(i=""+rn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+rn(a):""}function Rs(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(kt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=rn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Nn(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vu(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Is.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Fo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Vu(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Vu(e,d,i[d])}function Go(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(e){return hf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Li=null;function On(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bi=null,ji=null;function Ko(e){var i=si(e);if(i&&(e=i.stateNode)){var a=e[Te]||null;t:switch(e=i.stateNode,i.type){case"input":if(_n(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ae(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Te]||null;if(!h)throw Error(s(90));_n(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Ho(l)}break t;case"textarea":Wt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&ki(e,!!a.multiple,i,!1)}}}var li=!1;function xu(e,i,a){if(li)return e(i,a);li=!0;try{var l=e(i);return l}finally{if(li=!1,(Bi!==null||ji!==null)&&(Ic(),Bi&&(i=Bi,e=ji,ji=Bi=null,Ko(i),e)))for(i=0;i<e.length;i++)Ko(e[i])}}function Cs(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Te]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mn=!1;if(Qn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Mn=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Mn=!1}var ui=null,Er=null,zi=null;function Qo(){if(zi)return zi;var e,i=Er,a=i.length,l,h="value"in ui?ui.value:ui.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return zi=h.slice(e,1<l?1-l:void 0)}function ci(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function Yo(){return!1}function Pe(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?hi:Yo,this.isPropagationStopped=Yo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),i}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sa=Pe(Gt),Ns=E({},Gt,{view:0,detail:0}),Pu=Pe(Ns),wa,Ra,fi,Os=E({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fi&&(fi&&e.type==="mousemove"?(wa=e.screenX-fi.screenX,Ra=e.screenY-fi.screenY):Ra=wa=0,fi=e),wa)},movementY:function(e){return"movementY"in e?e.movementY:Ra}}),Vn=Pe(Os),Uu=E({},Os,{dataTransfer:0}),ff=Pe(Uu),Ms=E({},Ns,{relatedTarget:0}),Ia=Pe(Ms),Xo=E({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ca=Pe(Xo),ku=E({},Gt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Da=Pe(ku),df=E({},Gt,{data:0}),$o=Pe(df),Vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Bu[e])?!!i[e]:!1}function xs(){return Wo}var ju=E({},Ns,{key:function(e){if(e.key){var i=Vs[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ci(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(e){return e.type==="keypress"?ci(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ci(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Na=Pe(ju),zu=E({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=Pe(zu),qi=E({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),qu=Pe(qi),Hu=E({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fu=Pe(Hu),Gu=E({},Os,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Oa=Pe(Gu),sn=E({},Gt,{newState:0,oldState:0}),Ku=Pe(sn),Qu=[9,13,27,32],di=Qn&&"CompositionEvent"in window,c=null;Qn&&"documentMode"in document&&(c=document.documentMode);var p=Qn&&"TextEvent"in window&&!c,y=Qn&&(!di||c&&8<c&&11>=c),A=" ",L=!1;function G(e,i){switch(e){case"keyup":return Qu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function st(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lt=!1;function Ne(e,i){switch(e){case"compositionend":return st(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return e=i.data,e===A&&L?null:e;default:return null}}function Bt(e,i){if(Lt)return e==="compositionend"||!di&&G(e,i)?(e=Qo(),zi=Er=ui=null,Lt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Ue[e.type]:i==="textarea"}function Hi(e,i,a,l){Bi?ji?ji.push(l):ji=[l]:Bi=l,i=Vc(i,"onChange"),0<i.length&&(a=new Sa("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var qe=null,mi=null;function Jo(e){By(e,0)}function Yu(e){var i=ai(e);if(Ho(i))return e}function ag(e,i){if(e==="change")return i}var og=!1;if(Qn){var mf;if(Qn){var pf="oninput"in document;if(!pf){var lg=document.createElement("div");lg.setAttribute("oninput","return;"),pf=typeof lg.oninput=="function"}mf=pf}else mf=!1;og=mf&&(!document.documentMode||9<document.documentMode)}function ug(){qe&&(qe.detachEvent("onpropertychange",cg),mi=qe=null)}function cg(e){if(e.propertyName==="value"&&Yu(mi)){var i=[];Hi(i,mi,e,On(e)),xu(Jo,i)}}function Eb(e,i,a){e==="focusin"?(ug(),qe=i,mi=a,qe.attachEvent("onpropertychange",cg)):e==="focusout"&&ug()}function Tb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yu(mi)}function Ab(e,i){if(e==="click")return Yu(i)}function bb(e,i){if(e==="input"||e==="change")return Yu(i)}function Sb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var yn=typeof Object.is=="function"?Object.is:Sb;function tl(e,i){if(yn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!ii.call(i,h)||!yn(e[h],i[h]))return!1}return!0}function hg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fg(e,i){var a=hg(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=hg(a)}}function dg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?dg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function mg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ss(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ss(e.document)}return i}function gf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var wb=Qn&&"documentMode"in document&&11>=document.documentMode,Ma=null,_f=null,el=null,yf=!1;function pg(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;yf||Ma==null||Ma!==Ss(l)||(l=Ma,"selectionStart"in l&&gf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),el&&tl(el,l)||(el=l,l=Vc(_f,"onSelect"),0<l.length&&(i=new Sa("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Ma)))}function Ps(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Va={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},vf={},gg={};Qn&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Us(e){if(vf[e])return vf[e];if(!Va[e])return e;var i=Va[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in gg)return vf[e]=i[a];return e}var _g=Us("animationend"),yg=Us("animationiteration"),vg=Us("animationstart"),Rb=Us("transitionrun"),Ib=Us("transitionstart"),Cb=Us("transitioncancel"),Eg=Us("transitionend"),Tg=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function Yn(e,i){Tg.set(e,i),Kn(i,[e])}var Ag=new WeakMap;function xn(e,i){if(typeof e=="object"&&e!==null){var a=Ag.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Ta(i)},Ag.set(e,i),i)}return{value:e,source:i,stack:Ta(i)}}var Pn=[],xa=0,Tf=0;function Xu(){for(var e=xa,i=Tf=xa=0;i<e;){var a=Pn[i];Pn[i++]=null;var l=Pn[i];Pn[i++]=null;var h=Pn[i];Pn[i++]=null;var d=Pn[i];if(Pn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&bg(a,h,d)}}function $u(e,i,a,l){Pn[xa++]=e,Pn[xa++]=i,Pn[xa++]=a,Pn[xa++]=l,Tf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Af(e,i,a,l){return $u(e,i,a,l),Wu(e)}function Pa(e,i){return $u(e,null,null,i),Wu(e)}function bg(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Xe(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Wu(e){if(50<Rl)throw Rl=0,Cd=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ua={};function Db(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,i,a,l){return new Db(e,i,a,l)}function bf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fi(e,i){var a=e.alternate;return a===null?(a=vn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Sg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Zu(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")bf(e)&&(v=1);else if(typeof e=="string")v=O1(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=vn(31,a,i,h),e.elementType=R,e.lanes=d,e;case P:return ks(a.children,h,d,i);case Y:v=8,h|=24;break;case H:return e=vn(12,a,i,h|2),e.elementType=H,e.lanes=d,e;case ht:return e=vn(13,a,i,h),e.elementType=ht,e.lanes=d,e;case pt:return e=vn(19,a,i,h),e.elementType=pt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case it:case nt:v=10;break t;case at:v=9;break t;case dt:v=11;break t;case N:v=14;break t;case b:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=vn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function ks(e,i,a,l){return e=vn(7,e,l,i),e.lanes=a,e}function Sf(e,i,a){return e=vn(6,e,null,i),e.lanes=a,e}function wf(e,i,a){return i=vn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var ka=[],La=0,Ju=null,tc=0,Un=[],kn=0,Ls=null,Gi=1,Ki="";function Bs(e,i){ka[La++]=tc,ka[La++]=Ju,Ju=e,tc=i}function wg(e,i,a){Un[kn++]=Gi,Un[kn++]=Ki,Un[kn++]=Ls,Ls=e;var l=Gi;e=Ki;var h=32-Xe(l)-1;l&=~(1<<h),a+=1;var d=32-Xe(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Gi=1<<32-Xe(i)+h|a<<h|l,Ki=d+e}else Gi=1<<d|a<<h|l,Ki=e}function Rf(e){e.return!==null&&(Bs(e,1),wg(e,1,0))}function If(e){for(;e===Ju;)Ju=ka[--La],ka[La]=null,tc=ka[--La],ka[La]=null;for(;e===Ls;)Ls=Un[--kn],Un[kn]=null,Ki=Un[--kn],Un[kn]=null,Gi=Un[--kn],Un[kn]=null}var an=null,fe=null,Ft=!1,js=null,pi=!1,Cf=Error(s(519));function zs(e){var i=Error(s(418,""));throw rl(xn(i,e)),Cf}function Rg(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[De]=e,i[Te]=l,a){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(a=0;a<Cl.length;a++)Mt(Cl[a],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),ws(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Aa(i);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),Rs(i,l.value,l.defaultValue,l.children),Aa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Hy(i.textContent,a)?(l.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),l.onScroll!=null&&Mt("scroll",i),l.onScrollEnd!=null&&Mt("scrollend",i),l.onClick!=null&&(i.onclick=xc),i=!0):i=!1,i||zs(e)}function Ig(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:an=an.return}}function nl(e){if(e!==an)return!1;if(!Ft)return Ig(e),Ft=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Fd(e.type,e.memoizedProps)),a=!a),a&&fe&&zs(e),Ig(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){fe=$n(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}fe=null}}else i===27?(i=fe,Ur(e.type)?(e=Yd,Yd=null,fe=e):fe=i):fe=an?$n(e.stateNode.nextSibling):null;return!0}function il(){fe=an=null,Ft=!1}function Cg(){var e=js;return e!==null&&(cn===null?cn=e:cn.push.apply(cn,e),js=null),e}function rl(e){js===null?js=[e]:js.push(e)}var Df=W(null),qs=null,Qi=null;function Tr(e,i,a){tt(Df,i._currentValue),i._currentValue=a}function Yi(e){e._currentValue=Df.current,rt(Df)}function Nf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Of(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var I=0;I<i.length;I++)if(T.context===i[I]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Nf(d.return,a,e),l||(v=null);break t}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Nf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function sl(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;yn(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===ce.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(xl):e=[xl])}h=h.return}e!==null&&Of(i,e,a,l),i.flags|=262144}function ec(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Hs(e){qs=e,Qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $e(e){return Dg(qs,e)}function nc(e,i){return qs===null&&Hs(e),Dg(e,i)}function Dg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Qi===null){if(e===null)throw Error(s(308));Qi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Qi=Qi.next=i;return a}var Nb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},Ob=r.unstable_scheduleCallback,Mb=r.unstable_NormalPriority,Me={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new Nb,data:new Map,refCount:0}}function al(e){e.refCount--,e.refCount===0&&Ob(Mb,function(){e.controller.abort()})}var ol=null,Vf=0,Ba=0,ja=null;function Vb(e,i){if(ol===null){var a=ol=[];Vf=0,Ba=Pd(),ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Vf++,i.then(Ng,Ng),i}function Ng(){if(--Vf===0&&ol!==null){ja!==null&&(ja.status="fulfilled");var e=ol;ol=null,Ba=0,ja=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function xb(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Og=K.S;K.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vb(e,i),Og!==null&&Og(e,i)};var Fs=W(null);function xf(){var e=Fs.current;return e!==null?e:ne.pooledCache}function ic(e,i){i===null?tt(Fs,Fs.current):tt(Fs,i.pool)}function Mg(){var e=xf();return e===null?null:{parent:Me._currentValue,pool:e}}var ll=Error(s(460)),Vg=Error(s(474)),rc=Error(s(542)),Pf={then:function(){}};function xg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function sc(){}function Pg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(sc,sc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,kg(e),e;default:if(typeof i.status=="string")i.then(sc,sc);else{if(e=ne,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,kg(e),e}throw ul=i,ll}}var ul=null;function Ug(){if(ul===null)throw Error(s(459));var e=ul;return ul=null,e}function kg(e){if(e===ll||e===rc)throw Error(s(483))}var Ar=!1;function Uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function br(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Xt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Wu(e),bg(e,null,a),i}return $u(e,l,i,a),Wu(e)}function cl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}function Lf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Bf=!1;function hl(){if(Bf){var e=ja;if(e!==null)throw e}}function fl(e,i,a,l){Bf=!1;var h=e.updateQueue;Ar=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,j=I.next;I.next=null,v===null?d=j:v.next=j,v=I;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=j:T.next=j,Q.lastBaseUpdate=I))}if(d!==null){var Z=h.baseState;v=0,Q=j=I=null,T=d;do{var z=T.lane&-536870913,q=z!==T.lane;if(q?(jt&z)===z:(l&z)===z){z!==0&&z===Ba&&(Bf=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var At=e,_t=T;z=i;var te=a;switch(_t.tag){case 1:if(At=_t.payload,typeof At=="function"){Z=At.call(te,Z,z);break t}Z=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=_t.payload,z=typeof At=="function"?At.call(te,Z,z):At,z==null)break t;Z=E({},Z,z);break t;case 2:Ar=!0}}z=T.callback,z!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(j=Q=q,I=Z):Q=Q.next=q,v|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);Q===null&&(I=Z),h.baseState=I,h.firstBaseUpdate=j,h.lastBaseUpdate=Q,d===null&&(h.shared.lanes=0),Mr|=v,e.lanes=v,e.memoizedState=Z}}function Lg(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Bg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Lg(a[e],i)}var za=W(null),ac=W(0);function jg(e,i){e=er,tt(ac,e),tt(za,i),er=e|i.baseLanes}function jf(){tt(ac,er),tt(za,za.current)}function zf(){er=ac.current,rt(za),rt(ac)}var wr=0,Ct=null,Zt=null,be=null,oc=!1,qa=!1,Gs=!1,lc=0,dl=0,Ha=null,Pb=0;function _e(){throw Error(s(321))}function qf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!yn(e[a],i[a]))return!1;return!0}function Hf(e,i,a,l,h,d){return wr=d,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=e===null||e.memoizedState===null?b_:S_,Gs=!1,d=a(l,h),Gs=!1,qa&&(d=qg(i,a,l,h)),zg(e),d}function zg(e){K.H=mc;var i=Zt!==null&&Zt.next!==null;if(wr=0,be=Zt=Ct=null,oc=!1,dl=0,Ha=null,i)throw Error(s(300));e===null||ke||(e=e.dependencies,e!==null&&ec(e)&&(ke=!0))}function qg(e,i,a,l){Ct=e;var h=0;do{if(qa&&(Ha=null),dl=0,qa=!1,25<=h)throw Error(s(301));if(h+=1,be=Zt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}K.H=qb,d=i(a,l)}while(qa);return d}function Ub(){var e=K.H,i=e.useState()[0];return i=typeof i.then=="function"?ml(i):i,e=e.useState()[0],(Zt!==null?Zt.memoizedState:null)!==e&&(Ct.flags|=1024),i}function Ff(){var e=lc!==0;return lc=0,e}function Gf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Kf(e){if(oc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}oc=!1}wr=0,be=Zt=Ct=null,qa=!1,dl=lc=0,Ha=null}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Ct.memoizedState=be=e:be=be.next=e,be}function Se(){if(Zt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=Zt.next;var i=be===null?Ct.memoizedState:be.next;if(i!==null)be=i,Zt=e;else{if(e===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));Zt=e,e={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},be===null?Ct.memoizedState=be=e:be=be.next=e}return be}function Qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(e){var i=dl;return dl+=1,Ha===null&&(Ha=[]),e=Pg(Ha,e,i),i=Ct,(be===null?i.memoizedState:be.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?b_:S_),e}function uc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ml(e);if(e.$$typeof===nt)return $e(e)}throw Error(s(438,String(e)))}function Yf(e){var i=null,a=Ct.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ct.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Qf(),Ct.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=M;return i.index++,a}function Xi(e,i){return typeof i=="function"?i(e):i}function cc(e){var i=Se();return Xf(i,Zt,e)}function Xf(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var T=v=null,I=null,j=i,Q=!1;do{var Z=j.lane&-536870913;if(Z!==j.lane?(jt&Z)===Z:(wr&Z)===Z){var z=j.revertLane;if(z===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Z===Ba&&(Q=!0);else if((wr&z)===z){j=j.next,z===Ba&&(Q=!0);continue}else Z={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(T=I=Z,v=d):I=I.next=Z,Ct.lanes|=z,Mr|=z;Z=j.action,Gs&&a(d,Z),d=j.hasEagerState?j.eagerState:a(d,Z)}else z={lane:Z,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},I===null?(T=I=z,v=d):I=I.next=z,Ct.lanes|=Z,Mr|=Z;j=j.next}while(j!==null&&j!==i);if(I===null?v=d:I.next=T,!yn(d,e.memoizedState)&&(ke=!0,Q&&(a=ja,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=I,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function $f(e){var i=Se(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);yn(d,i.memoizedState)||(ke=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Hg(e,i,a){var l=Ct,h=Se(),d=Ft;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!yn((Zt||h).memoizedState,a);v&&(h.memoizedState=a,ke=!0),h=h.queue;var T=Kg.bind(null,l,h,e);if(pl(2048,8,T,[e]),h.getSnapshot!==i||v||be!==null&&be.memoizedState.tag&1){if(l.flags|=2048,Fa(9,hc(),Gg.bind(null,l,h,a,i),null),ne===null)throw Error(s(349));d||(wr&124)!==0||Fg(l,i,a)}return a}function Fg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ct.updateQueue,i===null?(i=Qf(),Ct.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Gg(e,i,a,l){i.value=a,i.getSnapshot=l,Qg(i)&&Yg(e)}function Kg(e,i,a){return a(function(){Qg(i)&&Yg(e)})}function Qg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!yn(e,a)}catch{return!0}}function Yg(e){var i=Pa(e,2);i!==null&&Sn(i,e,2)}function Wf(e){var i=ln();if(typeof e=="function"){var a=e;if(e=a(),Gs){gn(!0);try{a()}finally{gn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:e},i}function Xg(e,i,a,l){return e.baseState=a,Xf(e,Zt,typeof l=="function"?l:Xi)}function kb(e,i,a,l,h){if(dc(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};K.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,$g(i,d)):(d.next=a.next,i.pending=a.next=d)}}function $g(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=K.T,v={};K.T=v;try{var T=a(h,l),I=K.S;I!==null&&I(v,T),Wg(e,i,T)}catch(j){Zf(e,i,j)}finally{K.T=d}}else try{d=a(h,l),Wg(e,i,d)}catch(j){Zf(e,i,j)}}function Wg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Zg(e,i,l)},function(l){return Zf(e,i,l)}):Zg(e,i,a)}function Zg(e,i,a){i.status="fulfilled",i.value=a,Jg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,$g(e,a)))}function Zf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Jg(i),i=i.next;while(i!==l)}e.action=null}function Jg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function t_(e,i){return i}function e_(e,i){if(Ft){var a=ne.formState;if(a!==null){t:{var l=Ct;if(Ft){if(fe){e:{for(var h=fe,d=pi;h.nodeType!==8;){if(!d){h=null;break e}if(h=$n(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){fe=$n(h.nextSibling),l=h.data==="F!";break t}}zs(l)}l=!1}l&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t_,lastRenderedState:i},a.queue=l,a=E_.bind(null,Ct,l),l.dispatch=a,l=Wf(!1),d=id.bind(null,Ct,!1,l.queue),l=ln(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=kb.bind(null,Ct,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function n_(e){var i=Se();return i_(i,Zt,e)}function i_(e,i,a){if(i=Xf(e,i,t_)[0],e=cc(Xi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ml(i)}catch(v){throw v===ll?rc:v}else l=i;i=Se();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ct.flags|=2048,Fa(9,hc(),Lb.bind(null,h,a),null)),[l,d,e]}function Lb(e,i){e.action=i}function r_(e){var i=Se(),a=Zt;if(a!==null)return i_(i,a,e);Se(),i=i.memoizedState,a=Se();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Fa(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=Qf(),Ct.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function hc(){return{destroy:void 0,resource:void 0}}function s_(){return Se().memoizedState}function fc(e,i,a,l){var h=ln();l=l===void 0?null:l,Ct.flags|=e,h.memoizedState=Fa(1|i,hc(),a,l)}function pl(e,i,a,l){var h=Se();l=l===void 0?null:l;var d=h.memoizedState.inst;Zt!==null&&l!==null&&qf(l,Zt.memoizedState.deps)?h.memoizedState=Fa(i,d,a,l):(Ct.flags|=e,h.memoizedState=Fa(1|i,d,a,l))}function a_(e,i){fc(8390656,8,e,i)}function o_(e,i){pl(2048,8,e,i)}function l_(e,i){return pl(4,2,e,i)}function u_(e,i){return pl(4,4,e,i)}function c_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function h_(e,i,a){a=a!=null?a.concat([e]):null,pl(4,4,c_.bind(null,i,e),a)}function Jf(){}function f_(e,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&qf(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function d_(e,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&qf(i,l[1]))return l[0];if(l=e(),Gs){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[l,i],l}function td(e,i,a){return a===void 0||(wr&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=gy(),Ct.lanes|=e,Mr|=e,a)}function m_(e,i,a,l){return yn(a,i)?a:za.current!==null?(e=td(e,a,l),yn(e,i)||(ke=!0),e):(wr&42)===0?(ke=!0,e.memoizedState=a):(e=gy(),Ct.lanes|=e,Mr|=e,i)}function p_(e,i,a,l,h){var d=et.p;et.p=d!==0&&8>d?d:8;var v=K.T,T={};K.T=T,id(e,!1,i,a);try{var I=h(),j=K.S;if(j!==null&&j(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Q=xb(I,l);gl(e,i,Q,bn(e))}else gl(e,i,l,bn(e))}catch(Z){gl(e,i,{then:function(){},status:"rejected",reason:Z},bn())}finally{et.p=d,K.T=v}}function Bb(){}function ed(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=g_(e).queue;p_(e,h,i,ct,a===null?Bb:function(){return __(e),a(l)})}function g_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function __(e){var i=g_(e).next.queue;gl(e,i,{},bn())}function nd(){return $e(xl)}function y_(){return Se().memoizedState}function v_(){return Se().memoizedState}function jb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=bn();e=br(a);var l=Sr(i,e,a);l!==null&&(Sn(l,i,a),cl(l,i,a)),i={cache:Mf()},e.payload=i;return}i=i.return}}function zb(e,i,a){var l=bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},dc(e)?T_(i,a):(a=Af(e,i,a,l),a!==null&&(Sn(a,e,l),A_(a,i,l)))}function E_(e,i,a){var l=bn();gl(e,i,a,l)}function gl(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(e))T_(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,yn(T,v))return $u(e,i,h,0),ne===null&&Xu(),!1}catch{}finally{}if(a=Af(e,i,h,l),a!==null)return Sn(a,e,l),A_(a,i,l),!0}return!1}function id(e,i,a,l){if(l={lane:2,revertLane:Pd(),action:l,hasEagerState:!1,eagerState:null,next:null},dc(e)){if(i)throw Error(s(479))}else i=Af(e,a,l,2),i!==null&&Sn(i,e,2)}function dc(e){var i=e.alternate;return e===Ct||i!==null&&i===Ct}function T_(e,i){qa=oc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function A_(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Lo(e,a)}}var mc={readContext:$e,use:uc,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e},b_={readContext:$e,use:uc,useCallback:function(e,i){return ln().memoizedState=[e,i===void 0?null:i],e},useContext:$e,useEffect:a_,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,fc(4194308,4,c_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return fc(4194308,4,e,i)},useInsertionEffect:function(e,i){fc(4,2,e,i)},useMemo:function(e,i){var a=ln();i=i===void 0?null:i;var l=e();if(Gs){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=ln();if(a!==void 0){var h=a(i);if(Gs){gn(!0);try{a(i)}finally{gn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=zb.bind(null,Ct,e),[l.memoizedState,e]},useRef:function(e){var i=ln();return e={current:e},i.memoizedState=e},useState:function(e){e=Wf(e);var i=e.queue,a=E_.bind(null,Ct,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Jf,useDeferredValue:function(e,i){var a=ln();return td(a,e,i)},useTransition:function(){var e=Wf(!1);return e=p_.bind(null,Ct,e.queue,!0,!1),ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Ct,h=ln();if(Ft){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ne===null)throw Error(s(349));(jt&124)!==0||Fg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,a_(Kg.bind(null,l,d,e),[e]),l.flags|=2048,Fa(9,hc(),Gg.bind(null,l,d,a,i),null),a},useId:function(){var e=ln(),i=ne.identifierPrefix;if(Ft){var a=Ki,l=Gi;a=(l&~(1<<32-Xe(l)-1)).toString(32)+a,i=""+i+"R"+a,a=lc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=Pb++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:nd,useFormState:e_,useActionState:e_,useOptimistic:function(e){var i=ln();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=id.bind(null,Ct,!0,a),a.dispatch=i,[e,i]},useMemoCache:Yf,useCacheRefresh:function(){return ln().memoizedState=jb.bind(null,Ct)}},S_={readContext:$e,use:uc,useCallback:f_,useContext:$e,useEffect:o_,useImperativeHandle:h_,useInsertionEffect:l_,useLayoutEffect:u_,useMemo:d_,useReducer:cc,useRef:s_,useState:function(){return cc(Xi)},useDebugValue:Jf,useDeferredValue:function(e,i){var a=Se();return m_(a,Zt.memoizedState,e,i)},useTransition:function(){var e=cc(Xi)[0],i=Se().memoizedState;return[typeof e=="boolean"?e:ml(e),i]},useSyncExternalStore:Hg,useId:y_,useHostTransitionStatus:nd,useFormState:n_,useActionState:n_,useOptimistic:function(e,i){var a=Se();return Xg(a,Zt,e,i)},useMemoCache:Yf,useCacheRefresh:v_},qb={readContext:$e,use:uc,useCallback:f_,useContext:$e,useEffect:o_,useImperativeHandle:h_,useInsertionEffect:l_,useLayoutEffect:u_,useMemo:d_,useReducer:$f,useRef:s_,useState:function(){return $f(Xi)},useDebugValue:Jf,useDeferredValue:function(e,i){var a=Se();return Zt===null?td(a,e,i):m_(a,Zt.memoizedState,e,i)},useTransition:function(){var e=$f(Xi)[0],i=Se().memoizedState;return[typeof e=="boolean"?e:ml(e),i]},useSyncExternalStore:Hg,useId:y_,useHostTransitionStatus:nd,useFormState:r_,useActionState:r_,useOptimistic:function(e,i){var a=Se();return Zt!==null?Xg(a,Zt,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:v_},Ga=null,_l=0;function pc(e){var i=_l;return _l+=1,Ga===null&&(Ga=[]),Pg(Ga,e,i)}function yl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function gc(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function w_(e){var i=e._init;return i(e._payload)}function R_(e){function i(k,O){if(e){var B=k.deletions;B===null?(k.deletions=[O],k.flags|=16):B.push(O)}}function a(k,O){if(!e)return null;for(;O!==null;)i(k,O),O=O.sibling;return null}function l(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=Fi(k,O),k.index=0,k.sibling=null,k}function d(k,O,B){return k.index=B,e?(B=k.alternate,B!==null?(B=B.index,B<O?(k.flags|=67108866,O):B):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function T(k,O,B,X){return O===null||O.tag!==6?(O=Sf(B,k.mode,X),O.return=k,O):(O=h(O,B),O.return=k,O)}function I(k,O,B,X){var ut=B.type;return ut===P?Q(k,O,B.props.children,X,B.key):O!==null&&(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===b&&w_(ut)===O.type)?(O=h(O,B.props),yl(O,B),O.return=k,O):(O=Zu(B.type,B.key,B.props,null,k.mode,X),yl(O,B),O.return=k,O)}function j(k,O,B,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=wf(B,k.mode,X),O.return=k,O):(O=h(O,B.children||[]),O.return=k,O)}function Q(k,O,B,X,ut){return O===null||O.tag!==7?(O=ks(B,k.mode,X,ut),O.return=k,O):(O=h(O,B),O.return=k,O)}function Z(k,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Sf(""+O,k.mode,B),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return B=Zu(O.type,O.key,O.props,null,k.mode,B),yl(B,O),B.return=k,B;case x:return O=wf(O,k.mode,B),O.return=k,O;case b:var X=O._init;return O=X(O._payload),Z(k,O,B)}if(kt(O)||U(O))return O=ks(O,k.mode,B,null),O.return=k,O;if(typeof O.then=="function")return Z(k,pc(O),B);if(O.$$typeof===nt)return Z(k,nc(k,O),B);gc(k,O)}return null}function z(k,O,B,X){var ut=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ut!==null?null:T(k,O,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return B.key===ut?I(k,O,B,X):null;case x:return B.key===ut?j(k,O,B,X):null;case b:return ut=B._init,B=ut(B._payload),z(k,O,B,X)}if(kt(B)||U(B))return ut!==null?null:Q(k,O,B,X,null);if(typeof B.then=="function")return z(k,O,pc(B),X);if(B.$$typeof===nt)return z(k,O,nc(k,B),X);gc(k,B)}return null}function q(k,O,B,X,ut){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return k=k.get(B)||null,T(O,k,""+X,ut);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case S:return k=k.get(X.key===null?B:X.key)||null,I(O,k,X,ut);case x:return k=k.get(X.key===null?B:X.key)||null,j(O,k,X,ut);case b:var Dt=X._init;return X=Dt(X._payload),q(k,O,B,X,ut)}if(kt(X)||U(X))return k=k.get(B)||null,Q(O,k,X,ut,null);if(typeof X.then=="function")return q(k,O,B,pc(X),ut);if(X.$$typeof===nt)return q(k,O,B,nc(O,X),ut);gc(O,X)}return null}function At(k,O,B,X){for(var ut=null,Dt=null,ft=O,vt=O=0,Be=null;ft!==null&&vt<B.length;vt++){ft.index>vt?(Be=ft,ft=null):Be=ft.sibling;var qt=z(k,ft,B[vt],X);if(qt===null){ft===null&&(ft=Be);break}e&&ft&&qt.alternate===null&&i(k,ft),O=d(qt,O,vt),Dt===null?ut=qt:Dt.sibling=qt,Dt=qt,ft=Be}if(vt===B.length)return a(k,ft),Ft&&Bs(k,vt),ut;if(ft===null){for(;vt<B.length;vt++)ft=Z(k,B[vt],X),ft!==null&&(O=d(ft,O,vt),Dt===null?ut=ft:Dt.sibling=ft,Dt=ft);return Ft&&Bs(k,vt),ut}for(ft=l(ft);vt<B.length;vt++)Be=q(ft,k,vt,B[vt],X),Be!==null&&(e&&Be.alternate!==null&&ft.delete(Be.key===null?vt:Be.key),O=d(Be,O,vt),Dt===null?ut=Be:Dt.sibling=Be,Dt=Be);return e&&ft.forEach(function(zr){return i(k,zr)}),Ft&&Bs(k,vt),ut}function _t(k,O,B,X){if(B==null)throw Error(s(151));for(var ut=null,Dt=null,ft=O,vt=O=0,Be=null,qt=B.next();ft!==null&&!qt.done;vt++,qt=B.next()){ft.index>vt?(Be=ft,ft=null):Be=ft.sibling;var zr=z(k,ft,qt.value,X);if(zr===null){ft===null&&(ft=Be);break}e&&ft&&zr.alternate===null&&i(k,ft),O=d(zr,O,vt),Dt===null?ut=zr:Dt.sibling=zr,Dt=zr,ft=Be}if(qt.done)return a(k,ft),Ft&&Bs(k,vt),ut;if(ft===null){for(;!qt.done;vt++,qt=B.next())qt=Z(k,qt.value,X),qt!==null&&(O=d(qt,O,vt),Dt===null?ut=qt:Dt.sibling=qt,Dt=qt);return Ft&&Bs(k,vt),ut}for(ft=l(ft);!qt.done;vt++,qt=B.next())qt=q(ft,k,vt,qt.value,X),qt!==null&&(e&&qt.alternate!==null&&ft.delete(qt.key===null?vt:qt.key),O=d(qt,O,vt),Dt===null?ut=qt:Dt.sibling=qt,Dt=qt);return e&&ft.forEach(function(H1){return i(k,H1)}),Ft&&Bs(k,vt),ut}function te(k,O,B,X){if(typeof B=="object"&&B!==null&&B.type===P&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case S:t:{for(var ut=B.key;O!==null;){if(O.key===ut){if(ut=B.type,ut===P){if(O.tag===7){a(k,O.sibling),X=h(O,B.props.children),X.return=k,k=X;break t}}else if(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===b&&w_(ut)===O.type){a(k,O.sibling),X=h(O,B.props),yl(X,B),X.return=k,k=X;break t}a(k,O);break}else i(k,O);O=O.sibling}B.type===P?(X=ks(B.props.children,k.mode,X,B.key),X.return=k,k=X):(X=Zu(B.type,B.key,B.props,null,k.mode,X),yl(X,B),X.return=k,k=X)}return v(k);case x:t:{for(ut=B.key;O!==null;){if(O.key===ut)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(k,O.sibling),X=h(O,B.children||[]),X.return=k,k=X;break t}else{a(k,O);break}else i(k,O);O=O.sibling}X=wf(B,k.mode,X),X.return=k,k=X}return v(k);case b:return ut=B._init,B=ut(B._payload),te(k,O,B,X)}if(kt(B))return At(k,O,B,X);if(U(B)){if(ut=U(B),typeof ut!="function")throw Error(s(150));return B=ut.call(B),_t(k,O,B,X)}if(typeof B.then=="function")return te(k,O,pc(B),X);if(B.$$typeof===nt)return te(k,O,nc(k,B),X);gc(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(k,O.sibling),X=h(O,B),X.return=k,k=X):(a(k,O),X=Sf(B,k.mode,X),X.return=k,k=X),v(k)):a(k,O)}return function(k,O,B,X){try{_l=0;var ut=te(k,O,B,X);return Ga=null,ut}catch(ft){if(ft===ll||ft===rc)throw ft;var Dt=vn(29,ft,null,k.mode);return Dt.lanes=X,Dt.return=k,Dt}finally{}}}var Ka=R_(!0),I_=R_(!1),Ln=W(null),gi=null;function Rr(e){var i=e.alternate;tt(Ve,Ve.current&1),tt(Ln,e),gi===null&&(i===null||za.current!==null||i.memoizedState!==null)&&(gi=e)}function C_(e){if(e.tag===22){if(tt(Ve,Ve.current),tt(Ln,e),gi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(gi=e)}}else Ir()}function Ir(){tt(Ve,Ve.current),tt(Ln,Ln.current)}function $i(e){rt(Ln),gi===e&&(gi=null),rt(Ve)}var Ve=W(0);function _c(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Qd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function rd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var sd={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=bn(),h=br(l);h.payload=i,a!=null&&(h.callback=a),i=Sr(e,h,l),i!==null&&(Sn(i,e,l),cl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=bn(),h=br(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Sr(e,h,l),i!==null&&(Sn(i,e,l),cl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=bn(),l=br(a);l.tag=2,i!=null&&(l.callback=i),i=Sr(e,l,a),i!==null&&(Sn(i,e,a),cl(i,e,a))}};function D_(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!tl(a,l)||!tl(h,d):!0}function N_(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&sd.enqueueReplaceState(i,i.state,null)}function Ks(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=E({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var yc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function O_(e){yc(e)}function M_(e){console.error(e)}function V_(e){yc(e)}function vc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function x_(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ad(e,i,a){return a=br(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(e,i)},a}function P_(e){return e=br(e),e.tag=3,e}function U_(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){x_(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){x_(i,a,l),typeof h!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Hb(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&sl(i,a,h,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return gi===null?Nd():a.alternate===null&&de===0&&(de=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Pf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Md(e,l,h)),!1;case 22:return a.flags|=65536,l===Pf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Md(e,l,h)),!1}throw Error(s(435,a.tag))}return Md(e,l,h),Nd(),!1}if(Ft)return i=Ln.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Cf&&(e=Error(s(422),{cause:l}),rl(xn(e,a)))):(l!==Cf&&(i=Error(s(423),{cause:l}),rl(xn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=xn(l,a),h=ad(e.stateNode,l,h),Lf(e,h),de!==4&&(de=2)),!1;var d=Error(s(520),{cause:l});if(d=xn(d,a),wl===null?wl=[d]:wl.push(d),de!==4&&(de=2),i===null)return!0;l=xn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=ad(a.stateNode,l,e),Lf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Vr===null||!Vr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=P_(h),U_(h,e,a,l),Lf(a,h),!1}a=a.return}while(a!==null);return!1}var k_=Error(s(461)),ke=!1;function He(e,i,a,l){i.child=e===null?I_(i,null,a,l):Ka(i,e.child,a,l)}function L_(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Hs(i),l=Hf(e,i,a,v,d,h),T=Ff(),e!==null&&!ke?(Gf(e,i,h),Wi(e,i,h)):(Ft&&T&&Rf(i),i.flags|=1,He(e,i,l,h),i.child)}function B_(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!bf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,j_(e,i,d,l,h)):(e=Zu(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!md(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:tl,a(v,l)&&e.ref===i.ref)return Wi(e,i,h)}return i.flags|=1,e=Fi(d,l),e.ref=i.ref,e.return=i,i.child=e}function j_(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(tl(d,l)&&e.ref===i.ref)if(ke=!1,i.pendingProps=l=d,md(e,h))(e.flags&131072)!==0&&(ke=!0);else return i.lanes=e.lanes,Wi(e,i,h)}return od(e,i,a,l,h)}function z_(e,i,a){var l=i.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return q_(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&ic(i,d!==null?d.cachePool:null),d!==null?jg(i,d):jf(),C_(i);else return i.lanes=i.childLanes=536870912,q_(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(ic(i,d.cachePool),jg(i,d),Ir(),i.memoizedState=null):(e!==null&&ic(i,null),jf(),Ir());return He(e,i,h,a),i.child}function q_(e,i,a,l){var h=xf();return h=h===null?null:{parent:Me._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&ic(i,null),jf(),C_(i),e!==null&&sl(e,i,l,!0),null}function Ec(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function od(e,i,a,l,h){return Hs(i),a=Hf(e,i,a,l,void 0,h),l=Ff(),e!==null&&!ke?(Gf(e,i,h),Wi(e,i,h)):(Ft&&l&&Rf(i),i.flags|=1,He(e,i,a,h),i.child)}function H_(e,i,a,l,h,d){return Hs(i),i.updateQueue=null,a=qg(i,l,a,h),zg(e),l=Ff(),e!==null&&!ke?(Gf(e,i,d),Wi(e,i,d)):(Ft&&l&&Rf(i),i.flags|=1,He(e,i,a,d),i.child)}function F_(e,i,a,l,h){if(Hs(i),i.stateNode===null){var d=Ua,v=a.contextType;typeof v=="object"&&v!==null&&(d=$e(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=sd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Uf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?$e(v):Ua,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(rd(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&sd.enqueueReplaceState(d,d.state,null),fl(i,l,d,h),hl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,I=Ks(a,T);d.props=I;var j=d.context,Q=a.contextType;v=Ua,typeof Q=="object"&&Q!==null&&(v=$e(Q));var Z=a.getDerivedStateFromProps;Q=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||j!==v)&&N_(i,d,l,v),Ar=!1;var z=i.memoizedState;d.state=z,fl(i,l,d,h),hl(),j=i.memoizedState,T||z!==j||Ar?(typeof Z=="function"&&(rd(i,a,Z,l),j=i.memoizedState),(I=Ar||D_(i,a,I,l,z,j,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=v,l=I):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,kf(e,i),v=i.memoizedProps,Q=Ks(a,v),d.props=Q,Z=i.pendingProps,z=d.context,j=a.contextType,I=Ua,typeof j=="object"&&j!==null&&(I=$e(j)),T=a.getDerivedStateFromProps,(j=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||z!==I)&&N_(i,d,l,I),Ar=!1,z=i.memoizedState,d.state=z,fl(i,l,d,h),hl();var q=i.memoizedState;v!==Z||z!==q||Ar||e!==null&&e.dependencies!==null&&ec(e.dependencies)?(typeof T=="function"&&(rd(i,a,T,l),q=i.memoizedState),(Q=Ar||D_(i,a,Q,l,z,q,I)||e!==null&&e.dependencies!==null&&ec(e.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,I)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=I,l=Q):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ec(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Ka(i,e.child,null,h),i.child=Ka(i,null,a,h)):He(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Wi(e,i,h),e}function G_(e,i,a,l){return il(),i.flags|=256,He(e,i,a,l),i.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(e){return{baseLanes:e,cachePool:Mg()}}function cd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Bn),e}function K_(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ft){if(h?Rr(i):Ir(),Ft){var T=fe,I;if(I=T){t:{for(I=T,T=pi;I.nodeType!==8;){if(!T){T=null;break t}if(I=$n(I.nextSibling),I===null){T=null;break t}}T=I}T!==null?(i.memoizedState={dehydrated:T,treeContext:Ls!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},I=vn(18,null,null,0),I.stateNode=T,I.return=i,i.child=I,an=i,fe=null,I=!0):I=!1}I||zs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Qd(T)?i.lanes=32:i.lanes=536870912,null;$i(i)}return T=l.children,l=l.fallback,h?(Ir(),h=i.mode,T=Tc({mode:"hidden",children:T},h),l=ks(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=ud(a),h.childLanes=cd(e,v,a),i.memoizedState=ld,l):(Rr(i),hd(i,T))}if(I=e.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(d)i.flags&256?(Rr(i),i.flags&=-257,i=fd(e,i,a)):i.memoizedState!==null?(Ir(),i.child=e.child,i.flags|=128,i=null):(Ir(),h=l.fallback,T=i.mode,l=Tc({mode:"visible",children:l.children},T),h=ks(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ka(i,e.child,null,a),l=i.child,l.memoizedState=ud(a),l.childLanes=cd(e,v,a),i.memoizedState=ld,i=h);else if(Rr(i),Qd(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var j=v.dgst;v=j,l=Error(s(419)),l.stack="",l.digest=v,rl({value:l,source:null,stack:null}),i=fd(e,i,a)}else if(ke||sl(e,i,a,!1),v=(a&e.childLanes)!==0,ke||v){if(v=ne,v!==null&&(l=a&-a,l=(l&42)!==0?1:mr(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,Pa(e,l),Sn(v,e,l),k_;T.data==="$?"||Nd(),i=fd(e,i,a)}else T.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=I.treeContext,fe=$n(T.nextSibling),an=i,Ft=!0,js=null,pi=!1,e!==null&&(Un[kn++]=Gi,Un[kn++]=Ki,Un[kn++]=Ls,Gi=e.id,Ki=e.overflow,Ls=i),i=hd(i,l.children),i.flags|=4096);return i}return h?(Ir(),h=l.fallback,T=i.mode,I=e.child,j=I.sibling,l=Fi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,j!==null?h=Fi(j,h):(h=ks(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=e.child.memoizedState,T===null?T=ud(a):(I=T.cachePool,I!==null?(j=Me._currentValue,I=I.parent!==j?{parent:j,pool:j}:I):I=Mg(),T={baseLanes:T.baseLanes|a,cachePool:I}),h.memoizedState=T,h.childLanes=cd(e,v,a),i.memoizedState=ld,l):(Rr(i),a=e.child,e=a.sibling,a=Fi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function hd(e,i){return i=Tc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Tc(e,i){return e=vn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function fd(e,i,a){return Ka(i,e.child,null,a),e=hd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Q_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Nf(e.return,i,a)}function dd(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Y_(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(He(e,i,l.children,a),l=Ve.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Q_(e,a,i);else if(e.tag===19)Q_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(tt(Ve,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&_c(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),dd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&_c(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}dd(i,!0,a,null,d);break;case"together":dd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Mr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(sl(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Fi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Fi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function md(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ec(e)))}function Fb(e,i,a){switch(i.tag){case 3:Qt(i,i.stateNode.containerInfo),Tr(i,Me,e.memoizedState.cache),il();break;case 27:case 5:Hn(i);break;case 4:Qt(i,i.stateNode.containerInfo);break;case 10:Tr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Rr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?K_(e,i,a):(Rr(i),e=Wi(e,i,a),e!==null?e.sibling:null);Rr(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(sl(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Y_(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),tt(Ve,Ve.current),l)break;return null;case 22:case 23:return i.lanes=0,z_(e,i,a);case 24:Tr(i,Me,e.memoizedState.cache)}return Wi(e,i,a)}function X_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ke=!0;else{if(!md(e,a)&&(i.flags&128)===0)return ke=!1,Fb(e,i,a);ke=(e.flags&131072)!==0}else ke=!1,Ft&&(i.flags&1048576)!==0&&wg(i,tc,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")bf(l)?(e=Ks(l,e),i.tag=1,i=F_(null,i,l,e,a)):(i.tag=0,i=od(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===dt){i.tag=11,i=L_(null,i,l,e,a);break t}else if(h===N){i.tag=14,i=B_(null,i,l,e,a);break t}}throw i=Ht(l)||l,Error(s(306,i,""))}}return i;case 0:return od(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Ks(l,i.pendingProps),F_(e,i,l,h,a);case 3:t:{if(Qt(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,kf(e,i),fl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Tr(i,Me,l),l!==d.cache&&Of(i,[Me],a,!0),hl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=G_(e,i,l,a);break t}else if(l!==h){h=xn(Error(s(424)),i),rl(h),i=G_(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(fe=$n(e.firstChild),an=i,Ft=!0,js=null,pi=!0,a=I_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(il(),l===h){i=Wi(e,i,a);break t}He(e,i,l,a)}i=i.child}return i;case 26:return Ec(e,i),e===null?(a=Jy(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ft||(a=i.type,e=i.pendingProps,l=Pc(yt.current).createElement(a),l[De]=i,l[Te]=e,Ge(l,a,e),ge(l),i.stateNode=l):i.memoizedState=Jy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Hn(i),e===null&&Ft&&(l=i.stateNode=$y(i.type,i.pendingProps,yt.current),an=i,pi=!0,h=fe,Ur(i.type)?(Yd=h,fe=$n(l.firstChild)):fe=h),He(e,i,i.pendingProps.children,a),Ec(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ft&&((h=l=fe)&&(l=y1(l,i.type,i.pendingProps,pi),l!==null?(i.stateNode=l,an=i,fe=$n(l.firstChild),pi=!1,h=!0):h=!1),h||zs(i)),Hn(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Fd(h,d)?l=null:v!==null&&Fd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Hf(e,i,Ub,null,null,a),xl._currentValue=h),Ec(e,i),He(e,i,l,a),i.child;case 6:return e===null&&Ft&&((e=a=fe)&&(a=v1(a,i.pendingProps,pi),a!==null?(i.stateNode=a,an=i,fe=null,e=!0):e=!1),e||zs(i)),null;case 13:return K_(e,i,a);case 4:return Qt(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Ka(i,null,l,a):He(e,i,l,a),i.child;case 11:return L_(e,i,i.type,i.pendingProps,a);case 7:return He(e,i,i.pendingProps,a),i.child;case 8:return He(e,i,i.pendingProps.children,a),i.child;case 12:return He(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Tr(i,i.type,l.value),He(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Hs(i),h=$e(h),l=l(h),i.flags|=1,He(e,i,l,a),i.child;case 14:return B_(e,i,i.type,i.pendingProps,a);case 15:return j_(e,i,i.type,i.pendingProps,a);case 19:return Y_(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=Tc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Fi(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return z_(e,i,a);case 24:return Hs(i),l=$e(Me),e===null?(h=xf(),h===null&&(h=ne,d=Mf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Uf(i),Tr(i,Me,h)):((e.lanes&a)!==0&&(kf(e,i),fl(i,null,null,a),hl()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Tr(i,Me,l)):(l=d.cache,Tr(i,Me,l),l!==h.cache&&Of(i,[Me],a,!0))),He(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Zi(e){e.flags|=4}function $_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!rv(i)){if(i=Ln.current,i!==null&&((jt&4194048)===jt?gi!==null:(jt&62914560)!==jt&&(jt&536870912)===0||i!==gi))throw ul=Pf,Vg;e.flags|=8192}}function Ac(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Uo():536870912,e.lanes|=i,$a|=i)}function vl(e,i){if(!Ft)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function le(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function Gb(e,i,a){var l=i.pendingProps;switch(If(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Yi(Me),mn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(nl(i)?Zi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Cg())),le(i),null;case 26:return a=i.memoizedState,e===null?(Zi(i),a!==null?(le(i),$_(i,a)):(le(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Zi(i),le(i),$_(i,a)):(le(i),i.flags&=-16777217):(e.memoizedProps!==l&&Zi(i),le(i),i.flags&=-16777217),null;case 27:Cn(i),a=yt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return le(i),null}e=mt.current,nl(i)?Rg(i):(e=$y(h,l,a),i.stateNode=e,Zi(i))}return le(i),null;case 5:if(Cn(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return le(i),null}if(e=mt.current,nl(i))Rg(i);else{switch(h=Pc(yt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[De]=i,e[Te]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Ge(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Zi(i)}}return le(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Zi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=yt.current,nl(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=an,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[De]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Hy(e.nodeValue,a)),e||zs(i)}else e=Pc(e).createTextNode(l),e[De]=i,i.stateNode=e}return le(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=nl(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[De]=i}else il(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;le(i),h=!1}else h=Cg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?($i(i),i):($i(i),null)}if($i(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Ac(i,i.updateQueue),le(i),null;case 4:return mn(),e===null&&Bd(i.stateNode.containerInfo),le(i),null;case 10:return Yi(i.type),le(i),null;case 19:if(rt(Ve),h=i.memoizedState,h===null)return le(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)vl(h,!1);else{if(de!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=_c(e),d!==null){for(i.flags|=128,vl(h,!1),e=d.updateQueue,i.updateQueue=e,Ac(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Sg(a,e),a=a.sibling;return tt(Ve,Ve.current&1|2),i.child}e=e.sibling}h.tail!==null&&Ce()>wc&&(i.flags|=128,l=!0,vl(h,!1),i.lanes=4194304)}else{if(!l)if(e=_c(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,Ac(i,e),vl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ft)return le(i),null}else 2*Ce()-h.renderingStartTime>wc&&a!==536870912&&(i.flags|=128,l=!0,vl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ce(),i.sibling=null,e=Ve.current,tt(Ve,l?e&1|2:e&1),i):(le(i),null);case 22:case 23:return $i(i),zf(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&Ac(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&rt(Fs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Yi(Me),le(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Kb(e,i){switch(If(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Yi(Me),mn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Cn(i),null;case 13:if($i(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));il()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return rt(Ve),null;case 4:return mn(),null;case 10:return Yi(i.type),null;case 22:case 23:return $i(i),zf(),e!==null&&rt(Fs),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Yi(Me),null;case 25:return null;default:return null}}function W_(e,i){switch(If(i),i.tag){case 3:Yi(Me),mn();break;case 26:case 27:case 5:Cn(i);break;case 4:mn();break;case 13:$i(i);break;case 19:rt(Ve);break;case 10:Yi(i.type);break;case 22:case 23:$i(i),zf(),e!==null&&rt(Fs);break;case 24:Yi(Me)}}function El(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){ee(i,i.return,T)}}function Cr(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var I=a,j=T;try{j()}catch(Q){ee(h,I,Q)}}}l=l.next}while(l!==d)}}catch(Q){ee(i,i.return,Q)}}function Z_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Bg(i,a)}catch(l){ee(e,e.return,l)}}}function J_(e,i,a){a.props=Ks(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ee(e,i,l)}}function Tl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){ee(e,i,h)}}function _i(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ee(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ee(e,i,h)}else a.current=null}function ty(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ee(e,e.return,h)}}function pd(e,i,a){try{var l=e.stateNode;d1(l,e.type,a,i),l[Te]=i}catch(h){ee(e,e.return,h)}}function ey(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ur(e.type)||e.tag===4}function gd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ey(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ur(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _d(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=xc));else if(l!==4&&(l===27&&Ur(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(_d(e,i,a),e=e.sibling;e!==null;)_d(e,i,a),e=e.sibling}function bc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Ur(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(bc(e,i,a),e=e.sibling;e!==null;)bc(e,i,a),e=e.sibling}function ny(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ge(i,l,a),i[De]=e,i[Te]=a}catch(d){ee(e,e.return,d)}}var Ji=!1,ye=!1,yd=!1,iy=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Qb(e,i){if(e=e.containerInfo,qd=zc,e=mg(e),gf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,I=-1,j=0,Q=0,Z=e,z=null;e:for(;;){for(var q;Z!==a||h!==0&&Z.nodeType!==3||(T=v+h),Z!==d||l!==0&&Z.nodeType!==3||(I=v+l),Z.nodeType===3&&(v+=Z.nodeValue.length),(q=Z.firstChild)!==null;)z=Z,Z=q;for(;;){if(Z===e)break e;if(z===a&&++j===h&&(T=v),z===d&&++Q===l&&(I=v),(q=Z.nextSibling)!==null)break;Z=z,z=Z.parentNode}Z=q}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hd={focusedElem:e,selectionRange:a},zc=!1,Le=i;Le!==null;)if(i=Le,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Le=e;else for(;Le!==null;){switch(i=Le,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var At=Ks(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(At,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(_t){ee(a,a.return,_t)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Kd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Le=e;break}Le=i.return}}function ry(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Dr(e,a),l&4&&El(5,a);break;case 1:if(Dr(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){ee(a,a.return,v)}else{var h=Ks(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ee(a,a.return,v)}}l&64&&Z_(a),l&512&&Tl(a,a.return);break;case 3:if(Dr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Bg(e,i)}catch(v){ee(a,a.return,v)}}break;case 27:i===null&&l&4&&ny(a);case 26:case 5:Dr(e,a),i===null&&l&4&&ty(a),l&512&&Tl(a,a.return);break;case 12:Dr(e,a);break;case 13:Dr(e,a),l&4&&oy(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=n1.bind(null,a),E1(e,a))));break;case 22:if(l=a.memoizedState!==null||Ji,!l){i=i!==null&&i.memoizedState!==null||ye,h=Ji;var d=ye;Ji=l,(ye=i)&&!d?Nr(e,a,(a.subtreeFlags&8772)!==0):Dr(e,a),Ji=h,ye=d}break;case 30:break;default:Dr(e,a)}}function sy(e){var i=e.alternate;i!==null&&(e.alternate=null,sy(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&_r(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,un=!1;function tr(e,i,a){for(a=a.child;a!==null;)ay(e,i,a),a=a.sibling}function ay(e,i,a){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(he,a)}catch{}switch(a.tag){case 26:ye||_i(a,i),tr(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ye||_i(a,i);var l=ae,h=un;Ur(a.type)&&(ae=a.stateNode,un=!1),tr(e,i,a),Nl(a.stateNode),ae=l,un=h;break;case 5:ye||_i(a,i);case 6:if(l=ae,h=un,ae=null,tr(e,i,a),ae=l,un=h,ae!==null)if(un)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(d){ee(a,i,d)}else try{ae.removeChild(a.stateNode)}catch(d){ee(a,i,d)}break;case 18:ae!==null&&(un?(e=ae,Yy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ll(e)):Yy(ae,a.stateNode));break;case 4:l=ae,h=un,ae=a.stateNode.containerInfo,un=!0,tr(e,i,a),ae=l,un=h;break;case 0:case 11:case 14:case 15:ye||Cr(2,a,i),ye||Cr(4,a,i),tr(e,i,a);break;case 1:ye||(_i(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&J_(a,i,l)),tr(e,i,a);break;case 21:tr(e,i,a);break;case 22:ye=(l=ye)||a.memoizedState!==null,tr(e,i,a),ye=l;break;default:tr(e,i,a)}}function oy(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ll(e)}catch(a){ee(i,i.return,a)}}function Yb(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new iy),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new iy),i;default:throw Error(s(435,e.tag))}}function vd(e,i){var a=Yb(e);i.forEach(function(l){var h=i1.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function En(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(Ur(T.type)){ae=T.stateNode,un=!1;break t}break;case 5:ae=T.stateNode,un=!1;break t;case 3:case 4:ae=T.stateNode.containerInfo,un=!0;break t}T=T.return}if(ae===null)throw Error(s(160));ay(d,v,h),ae=null,un=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ly(i,e),i=i.sibling}var Xn=null;function ly(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:En(i,e),Tn(e),l&4&&(Cr(3,e,e.return),El(3,e),Cr(5,e,e.return));break;case 1:En(i,e),Tn(e),l&512&&(ye||a===null||_i(a,a.return)),l&64&&Ji&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Xn;if(En(i,e),Tn(e),l&512&&(ye||a===null||_i(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Ts]||d[De]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ge(d,l,a),d[De]=e,ge(d),l=d;break t;case"link":var v=nv("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;case"meta":if(v=nv("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=h.createElement(l),Ge(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[De]=e,ge(d),l=d}e.stateNode=l}else iv(h,e.type,e.stateNode);else e.stateNode=ev(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?iv(h,e.type,e.stateNode):ev(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&pd(e,e.memoizedProps,a.memoizedProps)}break;case 27:En(i,e),Tn(e),l&512&&(ye||a===null||_i(a,a.return)),a!==null&&l&4&&pd(e,e.memoizedProps,a.memoizedProps);break;case 5:if(En(i,e),Tn(e),l&512&&(ye||a===null||_i(a,a.return)),e.flags&32){h=e.stateNode;try{Nn(h,"")}catch(q){ee(e,e.return,q)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,pd(e,h,a!==null?a.memoizedProps:h)),l&1024&&(yd=!0);break;case 6:if(En(i,e),Tn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(q){ee(e,e.return,q)}}break;case 3:if(Lc=null,h=Xn,Xn=Uc(i.containerInfo),En(i,e),Xn=h,Tn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(i.containerInfo)}catch(q){ee(e,e.return,q)}yd&&(yd=!1,uy(e));break;case 4:l=Xn,Xn=Uc(e.stateNode.containerInfo),En(i,e),Tn(e),Xn=l;break;case 12:En(i,e),Tn(e);break;case 13:En(i,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wd=Ce()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,vd(e,l)));break;case 22:h=e.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,j=Ji,Q=ye;if(Ji=j||h,ye=Q||I,En(i,e),ye=Q,Ji=j,Tn(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Ji||ye||Qs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(d=I.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=I.stateNode;var Z=I.memoizedProps.style,z=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){ee(I,I.return,q)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(q){ee(I,I.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,vd(e,a))));break;case 19:En(i,e),Tn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,vd(e,l)));break;case 30:break;case 21:break;default:En(i,e),Tn(e)}}function Tn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(ey(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=gd(e);bc(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(Nn(v,""),a.flags&=-33);var T=gd(e);bc(e,T,v);break;case 3:case 4:var I=a.stateNode.containerInfo,j=gd(e);_d(e,j,I);break;default:throw Error(s(161))}}catch(Q){ee(e,e.return,Q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function uy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;uy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Dr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ry(e,i.alternate,i),i=i.sibling}function Qs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Cr(4,i,i.return),Qs(i);break;case 1:_i(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&J_(i,i.return,a),Qs(i);break;case 27:Nl(i.stateNode);case 26:case 5:_i(i,i.return),Qs(i);break;case 22:i.memoizedState===null&&Qs(i);break;case 30:Qs(i);break;default:Qs(i)}e=e.sibling}}function Nr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Nr(h,d,a),El(4,d);break;case 1:if(Nr(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){ee(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Lg(I[h],T)}catch(j){ee(l,l.return,j)}}a&&v&64&&Z_(d),Tl(d,d.return);break;case 27:ny(d);case 26:case 5:Nr(h,d,a),a&&l===null&&v&4&&ty(d),Tl(d,d.return);break;case 12:Nr(h,d,a);break;case 13:Nr(h,d,a),a&&v&4&&oy(h,d);break;case 22:d.memoizedState===null&&Nr(h,d,a),Tl(d,d.return);break;case 30:break;default:Nr(h,d,a)}i=i.sibling}}function Ed(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&al(a))}function Td(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&al(e))}function yi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cy(e,i,a,l),i=i.sibling}function cy(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:yi(e,i,a,l),h&2048&&El(9,i);break;case 1:yi(e,i,a,l);break;case 3:yi(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&al(e)));break;case 12:if(h&2048){yi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(I){ee(i,i.return,I)}}else yi(e,i,a,l);break;case 13:yi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?yi(e,i,a,l):Al(e,i):d._visibility&2?yi(e,i,a,l):(d._visibility|=2,Qa(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Ed(v,i);break;case 24:yi(e,i,a,l),h&2048&&Td(i.alternate,i);break;default:yi(e,i,a,l)}}function Qa(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,T=a,I=l,j=v.flags;switch(v.tag){case 0:case 11:case 15:Qa(d,v,T,I,h),El(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&2?Qa(d,v,T,I,h):Al(d,v):(Q._visibility|=2,Qa(d,v,T,I,h)),h&&j&2048&&Ed(v.alternate,v);break;case 24:Qa(d,v,T,I,h),h&&j&2048&&Td(v.alternate,v);break;default:Qa(d,v,T,I,h)}i=i.sibling}}function Al(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:Al(a,l),h&2048&&Ed(l.alternate,l);break;case 24:Al(a,l),h&2048&&Td(l.alternate,l);break;default:Al(a,l)}i=i.sibling}}var bl=8192;function Ya(e){if(e.subtreeFlags&bl)for(e=e.child;e!==null;)hy(e),e=e.sibling}function hy(e){switch(e.tag){case 26:Ya(e),e.flags&bl&&e.memoizedState!==null&&V1(Xn,e.memoizedState,e.memoizedProps);break;case 5:Ya(e);break;case 3:case 4:var i=Xn;Xn=Uc(e.stateNode.containerInfo),Ya(e),Xn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=bl,bl=16777216,Ya(e),bl=i):Ya(e));break;default:Ya(e)}}function fy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Sl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Le=l,my(l,e)}fy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dy(e),e=e.sibling}function dy(e){switch(e.tag){case 0:case 11:case 15:Sl(e),e.flags&2048&&Cr(9,e,e.return);break;case 3:Sl(e);break;case 12:Sl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Sc(e)):Sl(e);break;default:Sl(e)}}function Sc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Le=l,my(l,e)}fy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Cr(8,i,i.return),Sc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Sc(i));break;default:Sc(i)}e=e.sibling}}function my(e,i){for(;Le!==null;){var a=Le;switch(a.tag){case 0:case 11:case 15:Cr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Le=l;else t:for(a=e;Le!==null;){l=Le;var h=l.sibling,d=l.return;if(sy(l),l===a){Le=null;break t}if(h!==null){h.return=d,Le=h;break t}Le=d}}}var Xb={getCacheForType:function(e){var i=$e(Me),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},$b=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ne=null,Ot=null,jt=0,$t=0,An=null,Or=!1,Xa=!1,Ad=!1,er=0,de=0,Mr=0,Ys=0,bd=0,Bn=0,$a=0,wl=null,cn=null,Sd=!1,wd=0,wc=1/0,Rc=null,Vr=null,Fe=0,xr=null,Wa=null,Za=0,Rd=0,Id=null,py=null,Rl=0,Cd=null;function bn(){if((Xt&2)!==0&&jt!==0)return jt&-jt;if(K.T!==null){var e=Ba;return e!==0?e:Pd()}return pr()}function gy(){Bn===0&&(Bn=(jt&536870912)===0||Ft?Po():536870912);var e=Ln.current;return e!==null&&(e.flags|=32),Bn}function Sn(e,i,a){(e===ne&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(Ja(e,0),Pr(e,jt,Bn,!1)),Vi(e,a),((Xt&2)===0||e!==ne)&&(e===ne&&((Xt&2)===0&&(Ys|=a),de===4&&Pr(e,jt,Bn,!1)),vi(e))}function _y(e,i,a){if((Xt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||Es(e,i),h=l?Jb(e,i):Od(e,i,!0),d=l;do{if(h===0){Xa&&!l&&Pr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!Wb(a)){h=Od(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=e;h=wl;var I=T.current.memoizedState.isDehydrated;if(I&&(Ja(T,v).flags|=256),v=Od(T,v,!1),v!==2){if(Ad&&!I){T.errorRecoveryDisabledLanes|=d,Ys|=d,h=4;break t}d=cn,cn=h,d!==null&&(cn===null?cn=d:cn.push.apply(cn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ja(e,0),Pr(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Pr(l,i,Bn,!Or);break t;case 2:cn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=wd+300-Ce(),10<h)){if(Pr(l,i,Bn,!Or),ga(l,0,!0)!==0)break t;l.timeoutHandle=Ky(yy.bind(null,l,a,cn,Rc,Sd,i,Bn,Ys,$a,Or,d,2,-0,0),h);break t}yy(l,a,cn,Rc,Sd,i,Bn,Ys,$a,Or,d,0,-0,0)}}break}while(!0);vi(e)}function yy(e,i,a,l,h,d,v,T,I,j,Q,Z,z,q){if(e.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(Vl={stylesheets:null,count:0,unsuspend:M1},hy(i),Z=x1(),Z!==null)){e.cancelPendingCommit=Z(wy.bind(null,e,i,d,a,l,h,v,T,I,Q,1,z,q)),Pr(e,d,v,!j);return}wy(e,i,d,a,l,h,v,T,I)}function Wb(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!yn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Pr(e,i,a,l){i&=~bd,i&=~Ys,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Xe(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ri(e,a,i)}function Ic(){return(Xt&6)===0?(Il(0),!1):!0}function Dd(){if(Ot!==null){if($t===0)var e=Ot.return;else e=Ot,Qi=qs=null,Kf(e),Ga=null,_l=0,e=Ot;for(;e!==null;)W_(e.alternate,e),e=e.return;Ot=null}}function Ja(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,p1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Dd(),ne=e,Ot=a=Fi(e.current,null),jt=i,$t=0,An=null,Or=!1,Xa=Es(e,i),Ad=!1,$a=Bn=bd=Ys=Mr=de=0,cn=wl=null,Sd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Xe(l),d=1<<h;i|=e[h],l&=~d}return er=i,Xu(),a}function vy(e,i){Ct=null,K.H=mc,i===ll||i===rc?(i=Ug(),$t=3):i===Vg?(i=Ug(),$t=4):$t=i===k_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,An=i,Ot===null&&(de=1,vc(e,xn(i,e.current)))}function Ey(){var e=K.H;return K.H=mc,e===null?mc:e}function Ty(){var e=K.A;return K.A=Xb,e}function Nd(){de=4,Or||(jt&4194048)!==jt&&Ln.current!==null||(Xa=!0),(Mr&134217727)===0&&(Ys&134217727)===0||ne===null||Pr(ne,jt,Bn,!1)}function Od(e,i,a){var l=Xt;Xt|=2;var h=Ey(),d=Ty();(ne!==e||jt!==i)&&(Rc=null,Ja(e,i)),i=!1;var v=de;t:do try{if($t!==0&&Ot!==null){var T=Ot,I=An;switch($t){case 8:Dd(),v=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(i=!0);var j=$t;if($t=0,An=null,to(e,T,I,j),a&&Xa){v=0;break t}break;default:j=$t,$t=0,An=null,to(e,T,I,j)}}Zb(),v=de;break}catch(Q){vy(e,Q)}while(!0);return i&&e.shellSuspendCounter++,Qi=qs=null,Xt=l,K.H=h,K.A=d,Ot===null&&(ne=null,jt=0,Xu()),v}function Zb(){for(;Ot!==null;)Ay(Ot)}function Jb(e,i){var a=Xt;Xt|=2;var l=Ey(),h=Ty();ne!==e||jt!==i?(Rc=null,wc=Ce()+500,Ja(e,i)):Xa=Es(e,i);t:do try{if($t!==0&&Ot!==null){i=Ot;var d=An;e:switch($t){case 1:$t=0,An=null,to(e,i,d,1);break;case 2:case 9:if(xg(d)){$t=0,An=null,by(i);break}i=function(){$t!==2&&$t!==9||ne!==e||($t=7),vi(e)},d.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:xg(d)?($t=0,An=null,by(i)):($t=0,An=null,to(e,i,d,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var T=Ot;if(!v||rv(v)){$t=0,An=null;var I=T.sibling;if(I!==null)Ot=I;else{var j=T.return;j!==null?(Ot=j,Cc(j)):Ot=null}break e}}$t=0,An=null,to(e,i,d,5);break;case 6:$t=0,An=null,to(e,i,d,6);break;case 8:Dd(),de=6;break t;default:throw Error(s(462))}}t1();break}catch(Q){vy(e,Q)}while(!0);return Qi=qs=null,K.H=l,K.A=h,Xt=a,Ot!==null?0:(ne=null,jt=0,Xu(),de)}function t1(){for(;Ot!==null&&!dr();)Ay(Ot)}function Ay(e){var i=X_(e.alternate,e,er);e.memoizedProps=e.pendingProps,i===null?Cc(e):Ot=i}function by(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=H_(a,i,i.pendingProps,i.type,void 0,jt);break;case 11:i=H_(a,i,i.pendingProps,i.type.render,i.ref,jt);break;case 5:Kf(i);default:W_(a,i),i=Ot=Sg(i,er),i=X_(a,i,er)}e.memoizedProps=e.pendingProps,i===null?Cc(e):Ot=i}function to(e,i,a,l){Qi=qs=null,Kf(i),Ga=null,_l=0;var h=i.return;try{if(Hb(e,h,i,a,jt)){de=1,vc(e,xn(a,e.current)),Ot=null;return}}catch(d){if(h!==null)throw Ot=h,d;de=1,vc(e,xn(a,e.current)),Ot=null;return}i.flags&32768?(Ft||l===1?e=!0:Xa||(jt&536870912)!==0?e=!1:(Or=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ln.current,l!==null&&l.tag===13&&(l.flags|=16384))),Sy(i,e)):Cc(i)}function Cc(e){var i=e;do{if((i.flags&32768)!==0){Sy(i,Or);return}e=i.return;var a=Gb(i.alternate,i,er);if(a!==null){Ot=a;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=e}while(i!==null);de===0&&(de=5)}function Sy(e,i){do{var a=Kb(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);de=6,Ot=null}function wy(e,i,a,l,h,d,v,T,I){e.cancelPendingCommit=null;do Dc();while(Fe!==0);if((Xt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Tf,ko(e,a,d,v,T,I),e===ne&&(Ot=ne=null,jt=0),Wa=i,xr=e,Za=a,Rd=d,Id=h,py=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,r1(gs,function(){return Ny(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,h=et.p,et.p=2,v=Xt,Xt|=4;try{Qb(e,i,a)}finally{Xt=v,et.p=h,K.T=l}}Fe=1,Ry(),Iy(),Cy()}}function Ry(){if(Fe===1){Fe=0;var e=xr,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=et.p;et.p=2;var h=Xt;Xt|=4;try{ly(i,e);var d=Hd,v=mg(e.containerInfo),T=d.focusedElem,I=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&dg(T.ownerDocument.documentElement,T)){if(I!==null&&gf(T)){var j=I.start,Q=I.end;if(Q===void 0&&(Q=j),"selectionStart"in T)T.selectionStart=j,T.selectionEnd=Math.min(Q,T.value.length);else{var Z=T.ownerDocument||document,z=Z&&Z.defaultView||window;if(z.getSelection){var q=z.getSelection(),At=T.textContent.length,_t=Math.min(I.start,At),te=I.end===void 0?_t:Math.min(I.end,At);!q.extend&&_t>te&&(v=te,te=_t,_t=v);var k=fg(T,_t),O=fg(T,te);if(k&&O&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==O.node||q.focusOffset!==O.offset)){var B=Z.createRange();B.setStart(k.node,k.offset),q.removeAllRanges(),_t>te?(q.addRange(B),q.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),q.addRange(B))}}}}for(Z=[],q=T;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Z.length;T++){var X=Z[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}zc=!!qd,Hd=qd=null}finally{Xt=h,et.p=l,K.T=a}}e.current=i,Fe=2}}function Iy(){if(Fe===2){Fe=0;var e=xr,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=et.p;et.p=2;var h=Xt;Xt|=4;try{ry(e,i.alternate,i)}finally{Xt=h,et.p=l,K.T=a}}Fe=3}}function Cy(){if(Fe===4||Fe===3){Fe=0,ms();var e=xr,i=Wa,a=Za,l=py;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Fe=5:(Fe=0,Wa=xr=null,Dy(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Vr=null),_a(a),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(he,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=K.T,h=et.p,et.p=2,K.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{K.T=i,et.p=h}}(Za&3)!==0&&Dc(),vi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Cd?Rl++:(Rl=0,Cd=e):Rl=0,Il(0)}}function Dy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,al(i)))}function Dc(e){return Ry(),Iy(),Cy(),Ny()}function Ny(){if(Fe!==5)return!1;var e=xr,i=Rd;Rd=0;var a=_a(Za),l=K.T,h=et.p;try{et.p=32>a?32:a,K.T=null,a=Id,Id=null;var d=xr,v=Za;if(Fe=0,Wa=xr=null,Za=0,(Xt&6)!==0)throw Error(s(331));var T=Xt;if(Xt|=4,dy(d.current),cy(d,d.current,v,a),Xt=T,Il(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(he,d)}catch{}return!0}finally{et.p=h,K.T=l,Dy(e,i)}}function Oy(e,i,a){i=xn(a,i),i=ad(e.stateNode,i,2),e=Sr(e,i,2),e!==null&&(Vi(e,2),vi(e))}function ee(e,i,a){if(e.tag===3)Oy(e,e,a);else for(;i!==null;){if(i.tag===3){Oy(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Vr===null||!Vr.has(l))){e=xn(a,e),a=P_(2),l=Sr(i,a,2),l!==null&&(U_(a,l,i,e),Vi(l,2),vi(l));break}}i=i.return}}function Md(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new $b;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ad=!0,h.add(a),e=e1.bind(null,e,i,a),i.then(e,e))}function e1(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ne===e&&(jt&a)===a&&(de===4||de===3&&(jt&62914560)===jt&&300>Ce()-wd?(Xt&2)===0&&Ja(e,0):bd|=a,$a===jt&&($a=0)),vi(e)}function My(e,i){i===0&&(i=Uo()),e=Pa(e,i),e!==null&&(Vi(e,i),vi(e))}function n1(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),My(e,a)}function i1(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),My(e,a)}function r1(e,i){return fr(e,i)}var Nc=null,eo=null,Vd=!1,Oc=!1,xd=!1,Xs=0;function vi(e){e!==eo&&e.next===null&&(eo===null?Nc=eo=e:eo=eo.next=e),Oc=!0,Vd||(Vd=!0,a1())}function Il(e,i){if(!xd&&Oc){xd=!0;do for(var a=!1,l=Nc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Xe(42|e)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Uy(l,d))}else d=jt,d=ga(l,l===ne?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Es(l,d)||(a=!0,Uy(l,d));l=l.next}while(a);xd=!1}}function s1(){Vy()}function Vy(){Oc=Vd=!1;var e=0;Xs!==0&&(m1()&&(e=Xs),Xs=0);for(var i=Ce(),a=null,l=Nc;l!==null;){var h=l.next,d=xy(l,i);d===0?(l.next=null,a===null?Nc=h:a.next=h,h===null&&(eo=a)):(a=l,(e!==0||(d&3)!==0)&&(Oc=!0)),l=h}Il(e)}function xy(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Xe(d),T=1<<v,I=h[v];I===-1?((T&a)===0||(T&l)!==0)&&(h[v]=xo(T,i)):I<=i&&(e.expiredLanes|=T),d&=~T}if(i=ne,a=jt,a=ga(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&($t===2||$t===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&pn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Es(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&pn(l),_a(a)){case 2:case 8:a=ma;break;case 32:a=gs;break;case 268435456:a=pa;break;default:a=gs}return l=Py.bind(null,e),a=fr(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&pn(l),e.callbackPriority=2,e.callbackNode=null,2}function Py(e,i){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Dc()&&e.callbackNode!==a)return null;var l=jt;return l=ga(e,e===ne?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(_y(e,l,i),xy(e,Ce()),e.callbackNode!=null&&e.callbackNode===a?Py.bind(null,e):null)}function Uy(e,i){if(Dc())return null;_y(e,i,!0)}function a1(){g1(function(){(Xt&6)!==0?fr(Fn,s1):Vy()})}function Pd(){return Xs===0&&(Xs=Po()),Xs}function ky(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ba(""+e)}function Ly(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function o1(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=ky((h[Te]||null).action),v=l.submitter;v&&(i=(i=v[Te]||null)?ky(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new Sa("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Xs!==0){var I=v?Ly(h,v):new FormData(h);ed(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=v?Ly(h,v):new FormData(h),ed(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var Ud=0;Ud<Ef.length;Ud++){var kd=Ef[Ud],l1=kd.toLowerCase(),u1=kd[0].toUpperCase()+kd.slice(1);Yn(l1,"on"+u1)}Yn(_g,"onAnimationEnd"),Yn(yg,"onAnimationIteration"),Yn(vg,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Rb,"onTransitionRun"),Yn(Ib,"onTransitionStart"),Yn(Cb,"onTransitionCancel"),Yn(Eg,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cl));function By(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],I=T.instance,j=T.currentTarget;if(T=T.listener,I!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=j;try{d(h)}catch(Q){yc(Q)}h.currentTarget=null,d=I}else for(v=0;v<l.length;v++){if(T=l[v],I=T.instance,j=T.currentTarget,T=T.listener,I!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=j;try{d(h)}catch(Q){yc(Q)}h.currentTarget=null,d=I}}}}function Mt(e,i){var a=i[Bo];a===void 0&&(a=i[Bo]=new Set);var l=e+"__bubble";a.has(l)||(jy(i,e,2,!1),a.add(l))}function Ld(e,i,a){var l=0;i&&(l|=4),jy(a,e,l,i)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Mc]){e[Mc]=!0,jo.forEach(function(a){a!=="selectionchange"&&(c1.has(a)||Ld(a,!1,e),Ld(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Mc]||(i[Mc]=!0,Ld("selectionchange",!1,i))}}function jy(e,i,a,l){switch(cv(i)){case 2:var h=k1;break;case 8:h=L1;break;default:h=Jd}a=h.bind(null,i,a,e),h=void 0,!Mn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function jd(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=xi(T),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){l=d=v;continue t}T=T.parentNode}}l=l.return}xu(function(){var j=d,Q=On(a),Z=[];t:{var z=Tg.get(e);if(z!==void 0){var q=Sa,At=e;switch(e){case"keypress":if(ci(a)===0)break t;case"keydown":case"keyup":q=Na;break;case"focusin":At="focus",q=Ia;break;case"focusout":At="blur",q=Ia;break;case"beforeblur":case"afterblur":q=Ia;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=qu;break;case _g:case yg:case vg:q=Ca;break;case Eg:q=Fu;break;case"scroll":case"scrollend":q=Pu;break;case"wheel":q=Oa;break;case"copy":case"cut":case"paste":q=Da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Zo;break;case"toggle":case"beforetoggle":q=Ku}var _t=(i&4)!==0,te=!_t&&(e==="scroll"||e==="scrollend"),k=_t?z!==null?z+"Capture":null:z;_t=[];for(var O=j,B;O!==null;){var X=O;if(B=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||B===null||k===null||(X=Cs(O,k),X!=null&&_t.push(Dl(O,X,B))),te)break;O=O.return}0<_t.length&&(z=new q(z,At,null,a,Q),Z.push({event:z,listeners:_t}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",z&&a!==Li&&(At=a.relatedTarget||a.fromElement)&&(xi(At)||At[Dn]))break t;if((q||z)&&(z=Q.window===Q?Q:(z=Q.ownerDocument)?z.defaultView||z.parentWindow:window,q?(At=a.relatedTarget||a.toElement,q=j,At=At?xi(At):null,At!==null&&(te=u(At),_t=At.tag,At!==te||_t!==5&&_t!==27&&_t!==6)&&(At=null)):(q=null,At=j),q!==At)){if(_t=Vn,X="onMouseLeave",k="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(_t=Zo,X="onPointerLeave",k="onPointerEnter",O="pointer"),te=q==null?z:ai(q),B=At==null?z:ai(At),z=new _t(X,O+"leave",q,a,Q),z.target=te,z.relatedTarget=B,X=null,xi(Q)===j&&(_t=new _t(k,O+"enter",At,a,Q),_t.target=B,_t.relatedTarget=te,X=_t),te=X,q&&At)e:{for(_t=q,k=At,O=0,B=_t;B;B=no(B))O++;for(B=0,X=k;X;X=no(X))B++;for(;0<O-B;)_t=no(_t),O--;for(;0<B-O;)k=no(k),B--;for(;O--;){if(_t===k||k!==null&&_t===k.alternate)break e;_t=no(_t),k=no(k)}_t=null}else _t=null;q!==null&&zy(Z,z,q,_t,!1),At!==null&&te!==null&&zy(Z,te,At,_t,!0)}}t:{if(z=j?ai(j):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var ut=ag;else if(Oe(z))if(og)ut=bb;else{ut=Tb;var Dt=Eb}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&Go(j.elementType)&&(ut=ag):ut=Ab;if(ut&&(ut=ut(e,j))){Hi(Z,ut,a,Q);break t}Dt&&Dt(e,z,j),e==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&vr(z,"number",z.value)}switch(Dt=j?ai(j):window,e){case"focusin":(Oe(Dt)||Dt.contentEditable==="true")&&(Ma=Dt,_f=j,el=null);break;case"focusout":el=_f=Ma=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,pg(Z,a,Q);break;case"selectionchange":if(wb)break;case"keydown":case"keyup":pg(Z,a,Q)}var ft;if(di)t:{switch(e){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Lt?G(e,a)&&(vt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(y&&a.locale!=="ko"&&(Lt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Lt&&(ft=Qo()):(ui=Q,Er="value"in ui?ui.value:ui.textContent,Lt=!0)),Dt=Vc(j,vt),0<Dt.length&&(vt=new $o(vt,e,null,a,Q),Z.push({event:vt,listeners:Dt}),ft?vt.data=ft:(ft=st(a),ft!==null&&(vt.data=ft)))),(ft=p?Ne(e,a):Bt(e,a))&&(vt=Vc(j,"onBeforeInput"),0<vt.length&&(Dt=new $o("onBeforeInput","beforeinput",null,a,Q),Z.push({event:Dt,listeners:vt}),Dt.data=ft)),o1(Z,e,j,a,Q)}By(Z,i)})}function Dl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Vc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Cs(e,a),h!=null&&l.unshift(Dl(e,h,d)),h=Cs(e,i),h!=null&&l.push(Dl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function no(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zy(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,I=T.alternate,j=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||j===null||(I=j,h?(j=Cs(a,d),j!=null&&v.unshift(Dl(a,j,I))):h||(j=Cs(a,d),j!=null&&v.push(Dl(a,j,I)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function qy(e){return(typeof e=="string"?e:""+e).replace(h1,`
`).replace(f1,"")}function Hy(e,i){return i=qy(i),qy(e)===i}function xc(){}function Jt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Nn(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Nn(e,""+l);break;case"className":oi(e,"class",l);break;case"tabIndex":oi(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(e,a,l);break;case"style":Fo(e,l,d);break;case"data":if(i!=="object"){oi(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ba(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Jt(e,i,"name",h.name,h,null),Jt(e,i,"formEncType",h.formEncType,h,null),Jt(e,i,"formMethod",h.formMethod,h,null),Jt(e,i,"formTarget",h.formTarget,h,null)):(Jt(e,i,"encType",h.encType,h,null),Jt(e,i,"method",h.method,h,null),Jt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ba(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=xc);break;case"onScroll":l!=null&&Mt("scroll",e);break;case"onScrollEnd":l!=null&&Mt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ba(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Mt("beforetoggle",e),Mt("toggle",e),yr(e,"popover",l);break;case"xlinkActuate":ze(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ze(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ze(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ze(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ze(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ze(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ze(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ze(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ze(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cf.get(a)||a,yr(e,a,l))}}function zd(e,i,a,l,h,d){switch(a){case"style":Fo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Nn(e,l):(typeof l=="number"||typeof l=="bigint")&&Nn(e,""+l);break;case"onScroll":l!=null&&Mt("scroll",e);break;case"onScrollEnd":l!=null&&Mt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Te]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):yr(e,a,l)}}}function Ge(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",e),Mt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,d,v,a,null)}}h&&Jt(e,i,"srcSet",a.srcSet,a,null),l&&Jt(e,i,"src",a.src,a,null);return;case"input":Mt("invalid",e);var T=d=v=h=null,I=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":h=Q;break;case"type":v=Q;break;case"checked":I=Q;break;case"defaultChecked":j=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Jt(e,i,l,Q,a,null)}}ws(e,d,T,I,j,v,h,!1),Aa(e);return;case"select":Mt("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Jt(e,i,h,T,a,null)}i=d,a=v,e.multiple=!!l,i!=null?ki(e,!!l,i,!1):a!=null&&ki(e,!!l,a,!0);return;case"textarea":Mt("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Jt(e,i,v,T,a,null)}Rs(e,l,h,d),Aa(e);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Jt(e,i,I,l,a,null)}return;case"dialog":Mt("beforetoggle",e),Mt("toggle",e),Mt("cancel",e),Mt("close",e);break;case"iframe":case"object":Mt("load",e);break;case"video":case"audio":for(l=0;l<Cl.length;l++)Mt(Cl[l],e);break;case"image":Mt("error",e),Mt("load",e);break;case"details":Mt("toggle",e);break;case"embed":case"source":case"link":Mt("error",e),Mt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Jt(e,i,j,l,a,null)}return;default:if(Go(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&zd(e,i,Q,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Jt(e,i,T,l,a,null))}function d1(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,I=null,j=null,Q=null;for(q in a){var Z=a[q];if(a.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":I=Z;default:l.hasOwnProperty(q)||Jt(e,i,q,null,l,Z)}}for(var z in l){var q=l[z];if(Z=a[z],l.hasOwnProperty(z)&&(q!=null||Z!=null))switch(z){case"type":d=q;break;case"name":h=q;break;case"checked":j=q;break;case"defaultChecked":Q=q;break;case"value":v=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==Z&&Jt(e,i,z,q,l,Z)}}_n(e,v,T,I,j,Q,d,h);return;case"select":q=v=T=z=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":q=I;default:l.hasOwnProperty(d)||Jt(e,i,d,null,l,I)}for(h in l)if(d=l[h],I=a[h],l.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":z=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==I&&Jt(e,i,h,d,l,I)}i=T,a=v,l=q,z!=null?ki(e,!!a,z,!1):!!l!=!!a&&(i!=null?ki(e,!!a,i,!0):ki(e,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Jt(e,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Jt(e,i,v,h,l,d)}Wt(e,z,q);return;case"option":for(var At in a)if(z=a[At],a.hasOwnProperty(At)&&z!=null&&!l.hasOwnProperty(At))switch(At){case"selected":e.selected=!1;break;default:Jt(e,i,At,null,l,z)}for(I in l)if(z=l[I],q=a[I],l.hasOwnProperty(I)&&z!==q&&(z!=null||q!=null))switch(I){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Jt(e,i,I,z,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in a)z=a[_t],a.hasOwnProperty(_t)&&z!=null&&!l.hasOwnProperty(_t)&&Jt(e,i,_t,null,l,z);for(j in l)if(z=l[j],q=a[j],l.hasOwnProperty(j)&&z!==q&&(z!=null||q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Jt(e,i,j,z,l,q)}return;default:if(Go(i)){for(var te in a)z=a[te],a.hasOwnProperty(te)&&z!==void 0&&!l.hasOwnProperty(te)&&zd(e,i,te,void 0,l,z);for(Q in l)z=l[Q],q=a[Q],!l.hasOwnProperty(Q)||z===q||z===void 0&&q===void 0||zd(e,i,Q,z,l,q);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!l.hasOwnProperty(k)&&Jt(e,i,k,null,l,z);for(Z in l)z=l[Z],q=a[Z],!l.hasOwnProperty(Z)||z===q||z==null&&q==null||Jt(e,i,Z,z,l,q)}var qd=null,Hd=null;function Pc(e){return e.nodeType===9?e:e.ownerDocument}function Fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Fd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Gd=null;function m1(){var e=window.event;return e&&e.type==="popstate"?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,g1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(e){return Qy.resolve(null).then(e).catch(_1)}:Ky;function _1(e){setTimeout(function(){throw e})}function Ur(e){return e==="head"}function Yy(e,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&Nl(v.documentElement),a&2&&Nl(v.body),a&4)for(a=v.head,Nl(a),v=a.firstChild;v;){var T=v.nextSibling,I=v.nodeName;v[Ts]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){e.removeChild(d),Ll(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ll(i)}function Kd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Kd(a),_r(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function y1(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ts])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=$n(e.nextSibling),e===null)break}return null}function v1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$n(e.nextSibling),e===null))return null;return e}function Qd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function E1(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $n(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Yd=null;function Xy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function $y(e,i,a){switch(i=Pc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Nl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);_r(e)}var jn=new Map,Wy=new Set;function Uc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var nr=et.d;et.d={f:T1,r:A1,D:b1,C:S1,L:w1,m:R1,X:C1,S:I1,M:D1};function T1(){var e=nr.f(),i=Ic();return e||i}function A1(e){var i=si(e);i!==null&&i.tag===5&&i.type==="form"?__(i):nr.r(e)}var io=typeof document>"u"?null:document;function Zy(e,i,a){var l=io;if(l&&typeof i=="string"&&i){var h=Ae(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Wy.has(h)||(Wy.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ge(i,"link",e),ge(i),l.head.appendChild(i)))}}function b1(e){nr.D(e),Zy("dns-prefetch",e,null)}function S1(e,i){nr.C(e,i),Zy("preconnect",e,i)}function w1(e,i,a){nr.L(e,i,a);var l=io;if(l&&e&&i){var h='link[rel="preload"][as="'+Ae(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ae(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ae(a.imageSizes)+'"]')):h+='[href="'+Ae(e)+'"]';var d=h;switch(i){case"style":d=ro(e);break;case"script":d=so(e)}jn.has(d)||(e=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),jn.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ol(d))||i==="script"&&l.querySelector(Ml(d))||(i=l.createElement("link"),Ge(i,"link",e),ge(i),l.head.appendChild(i)))}}function R1(e,i){nr.m(e,i);var a=io;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Ae(l)+'"][href="'+Ae(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=so(e)}if(!jn.has(d)&&(e=E({rel:"modulepreload",href:e},i),jn.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(d)))return}l=a.createElement("link"),Ge(l,"link",e),ge(l),a.head.appendChild(l)}}}function I1(e,i,a){nr.S(e,i,a);var l=io;if(l&&e){var h=nn(l).hoistableStyles,d=ro(e);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(Ol(d)))T.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":i},a),(a=jn.get(d))&&Xd(e,a);var I=v=l.createElement("link");ge(I),Ge(I,"link",e),I._p=new Promise(function(j,Q){I.onload=j,I.onerror=Q}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,kc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function C1(e,i){nr.X(e,i);var a=io;if(a&&e){var l=nn(a).hoistableScripts,h=so(e),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(e=E({src:e,async:!0},i),(i=jn.get(h))&&$d(e,i),d=a.createElement("script"),ge(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function D1(e,i){nr.M(e,i);var a=io;if(a&&e){var l=nn(a).hoistableScripts,h=so(e),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(e=E({src:e,async:!0,type:"module"},i),(i=jn.get(h))&&$d(e,i),d=a.createElement("script"),ge(d),Ge(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Jy(e,i,a,l){var h=(h=yt.current)?Uc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ro(a.href),a=nn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ro(a.href);var d=nn(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(Ol(e)))&&!d._p&&(v.instance=d,v.state.loading=5),jn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},jn.set(e,a),d||N1(h,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=so(a),a=nn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ro(e){return'href="'+Ae(e)+'"'}function Ol(e){return'link[rel="stylesheet"]['+e+"]"}function tv(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function N1(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ge(i,"link",a),ge(i),e.head.appendChild(i))}function so(e){return'[src="'+Ae(e)+'"]'}function Ml(e){return"script[async]"+e}function ev(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Ae(a.href)+'"]');if(l)return i.instance=l,ge(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ge(l),Ge(l,"style",h),kc(l,a.precedence,e),i.instance=l;case"stylesheet":h=ro(a.href);var d=e.querySelector(Ol(h));if(d)return i.state.loading|=4,i.instance=d,ge(d),d;l=tv(a),(h=jn.get(h))&&Xd(l,h),d=(e.ownerDocument||e).createElement("link"),ge(d);var v=d;return v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),Ge(d,"link",l),i.state.loading|=4,kc(d,a.precedence,e),i.instance=d;case"script":return d=so(a.src),(h=e.querySelector(Ml(d)))?(i.instance=h,ge(h),h):(l=a,(h=jn.get(d))&&(l=E({},a),$d(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),Ge(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,kc(l,a.precedence,e));return i.instance}function kc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Xd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function $d(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Lc=null;function nv(e,i,a){if(Lc===null){var l=new Map,h=Lc=new Map;h.set(a,l)}else h=Lc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[Ts]||d[De]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function iv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function O1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function rv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Vl=null;function M1(){}function V1(e,i,a){if(Vl===null)throw Error(s(475));var l=Vl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ro(a.href),d=e.querySelector(Ol(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Bc.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,ge(d);return}d=e.ownerDocument||e,a=tv(a),(h=jn.get(h))&&Xd(a,h),d=d.createElement("link"),ge(d);var v=d;v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),Ge(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Bc.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function x1(){if(Vl===null)throw Error(s(475));var e=Vl;return e.stylesheets&&e.count===0&&Wd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Bc(){if(this.count--,this.count===0){if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jc=null;function Wd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jc=new Map,i.forEach(P1,e),jc=null,Bc.call(e))}function P1(e,i){if(!(i.state.loading&4)){var a=jc.get(e);if(a)var l=a.get(null);else{a=new Map,jc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Bc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var xl={$$typeof:nt,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function U1(e,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function sv(e,i,a,l,h,d,v,T,I,j,Q,Z){return e=new U1(e,i,a,v,T,I,j,Z),i=1,d===!0&&(i|=24),d=vn(3,null,null,i),e.current=d,d.stateNode=e,i=Mf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Uf(d),e}function av(e){return e?(e=Ua,e):Ua}function ov(e,i,a,l,h,d){h=av(h),l.context===null?l.context=h:l.pendingContext=h,l=br(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Sr(e,l,i),a!==null&&(Sn(a,e,i),cl(a,e,i))}function lv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Zd(e,i){lv(e,i),(e=e.alternate)&&lv(e,i)}function uv(e){if(e.tag===13){var i=Pa(e,67108864);i!==null&&Sn(i,e,67108864),Zd(e,67108864)}}var zc=!0;function k1(e,i,a,l){var h=K.T;K.T=null;var d=et.p;try{et.p=2,Jd(e,i,a,l)}finally{et.p=d,K.T=h}}function L1(e,i,a,l){var h=K.T;K.T=null;var d=et.p;try{et.p=8,Jd(e,i,a,l)}finally{et.p=d,K.T=h}}function Jd(e,i,a,l){if(zc){var h=tm(l);if(h===null)jd(e,i,l,qc,a),hv(e,l);else if(j1(h,e,i,a,l))l.stopPropagation();else if(hv(e,l),i&4&&-1<B1.indexOf(e)){for(;h!==null;){var d=si(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Gn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var I=1<<31-Xe(v);T.entanglements[1]|=I,v&=~I}vi(d),(Xt&6)===0&&(wc=Ce()+500,Il(0))}}break;case 13:T=Pa(d,2),T!==null&&Sn(T,d,2),Ic(),Zd(d,2)}if(d=tm(l),d===null&&jd(e,i,l,qc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else jd(e,i,l,null,a)}}function tm(e){return e=On(e),em(e)}var qc=null;function em(e){if(qc=null,e=xi(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return qc=e,null}function cv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ps()){case Fn:return 2;case ma:return 8;case gs:case sf:return 32;case pa:return 268435456;default:return 32}default:return 32}}var nm=!1,kr=null,Lr=null,Br=null,Pl=new Map,Ul=new Map,jr=[],B1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hv(e,i){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":Pl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(i.pointerId)}}function kl(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=si(i),i!==null&&uv(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function j1(e,i,a,l,h){switch(i){case"focusin":return kr=kl(kr,e,i,a,l,h),!0;case"dragenter":return Lr=kl(Lr,e,i,a,l,h),!0;case"mouseover":return Br=kl(Br,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Pl.set(d,kl(Pl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ul.set(d,kl(Ul.get(d)||null,e,i,a,l,h)),!0}return!1}function fv(e){var i=xi(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,Iu(e.priority,function(){if(a.tag===13){var l=bn();l=mr(l);var h=Pa(a,l);h!==null&&Sn(h,a,l),Zd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=tm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Li=l,a.target.dispatchEvent(l),Li=null}else return i=si(a),i!==null&&uv(i),e.blockedOn=a,!1;i.shift()}return!0}function dv(e,i,a){Hc(e)&&a.delete(i)}function z1(){nm=!1,kr!==null&&Hc(kr)&&(kr=null),Lr!==null&&Hc(Lr)&&(Lr=null),Br!==null&&Hc(Br)&&(Br=null),Pl.forEach(dv),Ul.forEach(dv)}function Fc(e,i){e.blockedOn===i&&(e.blockedOn=null,nm||(nm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,z1)))}var Gc=null;function mv(e){Gc!==e&&(Gc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Gc===e&&(Gc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var d=si(a);d!==null&&(e.splice(i,3),i-=3,ed(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ll(e){function i(I){return Fc(I,e)}kr!==null&&Fc(kr,e),Lr!==null&&Fc(Lr,e),Br!==null&&Fc(Br,e),Pl.forEach(i),Ul.forEach(i);for(var a=0;a<jr.length;a++){var l=jr[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<jr.length&&(a=jr[0],a.blockedOn===null);)fv(a),a.blockedOn===null&&jr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Te]||null;if(typeof d=="function")v||mv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Te]||null)T=v.formAction;else if(em(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),mv(a)}}}function im(e){this._internalRoot=e}Kc.prototype.render=im.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=bn();ov(a,l,e,i,null,null)},Kc.prototype.unmount=im.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;ov(e.current,2,null,e,null,null),Ic(),i[Dn]=null}};function Kc(e){this._internalRoot=e}Kc.prototype.unstable_scheduleHydration=function(e){if(e){var i=pr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<jr.length&&i!==0&&i<jr[a].priority;a++);jr.splice(a,0,e),a===0&&fv(e)}};var pv=t.version;if(pv!=="19.1.1")throw Error(s(527,pv,"19.1.1"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var q1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{he=Qc.inject(q1),Yt=Qc}catch{}}return jl.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=O_,d=M_,v=V_,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=sv(e,1,!1,null,null,a,l,h,d,v,T,null),e[Dn]=i.current,Bd(e),new im(i)},jl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=O_,v=M_,T=V_,I=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=sv(e,1,!0,i,a??null,l,h,d,v,T,I,j),i.context=av(null),a=i.current,l=bn(),l=mr(l),h=br(l),h.callback=null,Sr(a,h,l),a=l,i.current.lanes=a,Vi(i,a),vi(i),e[Dn]=i.current,Bd(e),new Kc(i)},jl.version="19.1.1",jl}var wv;function Z1(){if(wv)return am.exports;wv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),am.exports=W1(),am.exports}var J1=Z1();const tS=()=>{};var Rv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},eS=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},_T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let S=(m&15)<<2|_>>6,x=_&63;g||(x=64,f||(S=64)),s.push(n[E],n[w],n[S],n[x])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(gT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):eS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||_==null||w==null)throw new nS;const S=u<<2|m>>4;if(s.push(S),_!==64){const x=m<<4&240|_>>2;if(s.push(x),w!==64){const P=_<<6&192|w;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iS=function(r){const t=gT(r);return _T.encodeByteArray(t,!0)},dh=function(r){return iS(r).replace(/\./g,"")},yT=function(r){try{return _T.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=()=>rS().__FIREBASE_DEFAULTS__,aS=()=>{if(typeof process>"u"||typeof Rv>"u")return;const r=Rv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&yT(r[1]);return t&&JSON.parse(t)},xh=()=>{try{return tS()||sS()||aS()||oS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},vT=r=>xh()?.emulatorHosts?.[r],ET=r=>{const t=vT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},TT=()=>xh()?.config,AT=r=>xh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function np(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[dh(JSON.stringify(n)),dh(JSON.stringify(f)),""].join(".")}const $l={};function uS(){const r={prod:[],emulator:[]};for(const t of Object.keys($l))$l[t]?r.emulator.push(t):r.prod.push(t);return r}function cS(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let Iv=!1;function ip(r,t){if(typeof window>"u"||typeof document>"u"||!cs(window.location.host)||$l[r]===t||$l[r]||Iv)return;$l[r]=t;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=uS().prod.length>0;function f(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Iv=!0,f()},S}function E(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=cS(s),x=n("text"),P=document.getElementById(x)||document.createElement("span"),Y=n("learnmore"),H=document.getElementById(Y)||document.createElement("a"),it=n("preprendIcon"),at=document.getElementById(it)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const nt=S.element;m(nt),E(H,Y);const dt=_();g(at,it),nt.append(at,P,H,dt),document.body.appendChild(nt)}u?(P.innerText="Preview backend disconnected.",at.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(at.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function fS(){const r=xh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function pS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){const r=en();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function _S(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yS(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="FirebaseError";class Oi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ES,Object.setPrototypeOf(this,Oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?TS(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new Oi(o,m,s)}}function TS(r,t){return r.replace(AS,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const AS=/\{\$([^}]+)}/g;function bS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function es(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(Cv(u)&&Cv(f)){if(!es(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Cv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function Hl(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Fl(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function SS(r,t){const n=new wS(r,t);return n.subscribe.bind(n)}class wS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");RS(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(r){return r&&r._delegate?r._delegate:r}class ns{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new lS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(DS(t))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Ws){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ws){return this.instances.has(t)}getOptions(t=Ws){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:CS(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ws){return this.component?this.component.multipleInstances?t:Ws:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(r){return r===Ws?void 0:r}function DS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new IS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Vt||(Vt={}));const OS={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},MS=Vt.INFO,VS={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},xS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=VS[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rp{constructor(t){this.name=t,this._logLevel=MS,this._logHandler=xS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?OS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...t),this._logHandler(this,Vt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...t),this._logHandler(this,Vt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...t),this._logHandler(this,Vt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...t),this._logHandler(this,Vt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...t),this._logHandler(this,Vt.ERROR,...t)}}const PS=(r,t)=>t.some(n=>r instanceof n);let Dv,Nv;function US(){return Dv||(Dv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kS(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,Rm=new WeakMap,wT=new WeakMap,hm=new WeakMap,sp=new WeakMap;function LS(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n($r(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&ST.set(n,r)}).catch(()=>{}),sp.set(t,r),t}function BS(r){if(Rm.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Rm.set(r,t)}let Im={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Rm.get(r);if(t==="objectStoreNames")return r.objectStoreNames||wT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $r(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function jS(r){Im=r(Im)}function zS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(fm(this),t,...n);return wT.set(s,t.sort?t.sort():[t]),$r(s)}:kS().includes(r)?function(...t){return r.apply(fm(this),t),$r(ST.get(this))}:function(...t){return $r(r.apply(fm(this),t))}}function qS(r){return typeof r=="function"?zS(r):(r instanceof IDBTransaction&&BS(r),PS(r,US())?new Proxy(r,Im):r)}function $r(r){if(r instanceof IDBRequest)return LS(r);if(hm.has(r))return hm.get(r);const t=qS(r);return t!==r&&(hm.set(r,t),sp.set(t,r)),t}const fm=r=>sp.get(r);function HS(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),m=$r(f);return s&&f.addEventListener("upgradeneeded",g=>{s($r(f.result),g.oldVersion,g.newVersion,$r(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const FS=["get","getKey","getAll","getAllKeys","count"],GS=["put","add","delete","clear"],dm=new Map;function Ov(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(dm.get(t))return dm.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=GS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||FS.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return dm.set(t,u),u}jS(r=>({...r,get:(t,n,s)=>Ov(t,n)||r.get(t,n,s),has:(t,n)=>!!Ov(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function QS(r){return r.getComponent()?.type==="VERSION"}const Cm="@firebase/app",Mv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new rp("@firebase/app"),YS="@firebase/app-compat",XS="@firebase/analytics-compat",$S="@firebase/analytics",WS="@firebase/app-check-compat",ZS="@firebase/app-check",JS="@firebase/auth",tw="@firebase/auth-compat",ew="@firebase/database",nw="@firebase/data-connect",iw="@firebase/database-compat",rw="@firebase/functions",sw="@firebase/functions-compat",aw="@firebase/installations",ow="@firebase/installations-compat",lw="@firebase/messaging",uw="@firebase/messaging-compat",cw="@firebase/performance",hw="@firebase/performance-compat",fw="@firebase/remote-config",dw="@firebase/remote-config-compat",mw="@firebase/storage",pw="@firebase/storage-compat",gw="@firebase/firestore",_w="@firebase/ai",yw="@firebase/firestore-compat",vw="firebase",Ew="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]",Tw={[Cm]:"fire-core",[YS]:"fire-core-compat",[$S]:"fire-analytics",[XS]:"fire-analytics-compat",[ZS]:"fire-app-check",[WS]:"fire-app-check-compat",[JS]:"fire-auth",[tw]:"fire-auth-compat",[ew]:"fire-rtdb",[nw]:"fire-data-connect",[iw]:"fire-rtdb-compat",[rw]:"fire-fn",[sw]:"fire-fn-compat",[aw]:"fire-iid",[ow]:"fire-iid-compat",[lw]:"fire-fcm",[uw]:"fire-fcm-compat",[cw]:"fire-perf",[hw]:"fire-perf-compat",[fw]:"fire-rc",[dw]:"fire-rc-compat",[mw]:"fire-gcs",[pw]:"fire-gcs-compat",[gw]:"fire-fst",[yw]:"fire-fst-compat",[_w]:"fire-vertex","fire-js":"fire-js",[vw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,Aw=new Map,Nm=new Map;function Vv(r,t){try{r.container.addComponent(t)}catch(n){ar.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function ia(r){const t=r.name;if(Nm.has(t))return ar.debug(`There were multiple attempts to register component ${t}.`),!1;Nm.set(t,r);for(const n of mh.values())Vv(n,r);for(const n of Aw.values())Vv(n,r);return!0}function Ph(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function wn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new du("app","Firebase",bw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca=Ew;function RT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Dm,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Wr.create("bad-app-name",{appName:String(o)});if(n||(n=TT()),!n)throw Wr.create("no-options");const u=mh.get(o);if(u){if(es(n,u.options)&&es(s,u.config))return u;throw Wr.create("duplicate-app",{appName:o})}const f=new NS(o);for(const g of Nm.values())f.addComponent(g);const m=new Sw(n,s,f);return mh.set(o,m),m}function ap(r=Dm){const t=mh.get(r);if(!t&&r===Dm&&TT())return RT();if(!t)throw Wr.create("no-app",{appName:r});return t}function bi(r,t,n){let s=Tw[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ar.warn(f.join(" "));return}ia(new ns(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firebase-heartbeat-database",Rw=1,ru="firebase-heartbeat-store";let mm=null;function IT(){return mm||(mm=HS(ww,Rw,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(r=>{throw Wr.create("idb-open",{originalErrorMessage:r.message})})),mm}async function Iw(r){try{const n=(await IT()).transaction(ru),s=await n.objectStore(ru).get(CT(r));return await n.done,s}catch(t){if(t instanceof Oi)ar.warn(t.message);else{const n=Wr.create("idb-get",{originalErrorMessage:t?.message});ar.warn(n.message)}}}async function xv(r,t){try{const s=(await IT()).transaction(ru,"readwrite");await s.objectStore(ru).put(t,CT(r)),await s.done}catch(n){if(n instanceof Oi)ar.warn(n.message);else{const s=Wr.create("idb-set",{originalErrorMessage:n?.message});ar.warn(s.message)}}}function CT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=1024,Dw=30;class Nw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mw(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>Dw){const o=Vw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ar.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pv(),{heartbeatsToSend:n,unsentEntries:s}=Ow(this._heartbeatsCache.heartbeats),o=dh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ar.warn(t),""}}}function Pv(){return new Date().toISOString().substring(0,10)}function Ow(r,t=Cw){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Uv(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Uv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Mw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yS()?vS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Iw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return xv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uv(r){return dh(JSON.stringify({version:2,heartbeats:r})).length}function Vw(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){ia(new ns("platform-logger",t=>new KS(t),"PRIVATE")),ia(new ns("heartbeat",t=>new Nw(t),"PRIVATE")),bi(Cm,Mv,r),bi(Cm,Mv,"esm2020"),bi("fire-js","")}xw("");function DT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pw=DT,NT=new du("auth","Firebase",DT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new rp("@firebase/auth");function Uw(r,...t){ph.logLevel<=Vt.WARN&&ph.warn(`Auth (${ca}): ${r}`,...t)}function ih(r,...t){ph.logLevel<=Vt.ERROR&&ph.error(`Auth (${ca}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r,...t){throw op(r,...t)}function Si(r,...t){return op(r,...t)}function OT(r,t,n){const s={...Pw(),[t]:n};return new du("auth","Firebase",s).create(t,{appName:r.name})}function sr(r){return OT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function op(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return NT.create(r,...t)}function Et(r,t,...n){if(!r)throw op(t,...n)}function ir(r){const t="INTERNAL ASSERTION FAILED: "+r;throw ih(t),new Error(t)}function or(r,t){r||ir(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){return typeof self<"u"&&self.location?.href||""}function kw(){return kv()==="http:"||kv()==="https:"}function kv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kw()||mS()||"connection"in navigator)?navigator.onLine:!0}function Bw(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,n){this.shortDelay=t,this.longDelay=n,or(n>t,"Short delay should be less than long delay!"),this.isMobile=hS()||pS()}get(){return Lw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(r,t){or(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qw=new pu(3e4,6e4);function hs(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function cr(r,t,n,s,o={}){return VT(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const m=mu({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:g,...u};return dS()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&cs(r.emulatorConfig.host)&&(_.credentials="include"),MT.fetch()(await xT(r,r.config.apiHost,n,m),_)})}async function VT(r,t,n){r._canInitEmulator=!1;const s={...jw,...t};try{const o=new Fw(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Yc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Yc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Yc(r,"user-disabled",f);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw OT(r,E,_);ei(r,E)}}catch(o){if(o instanceof Oi)throw o;ei(r,"network-request-failed",{message:String(o)})}}async function gu(r,t,n,s,o={}){const u=await cr(r,t,n,s,o);return"mfaPendingCredential"in u&&ei(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function xT(r,t,n,s){const o=`${t}${n}?${s}`,u=r,f=u.config.emulator?lp(r.config,o):`${r.config.apiScheme}://${o}`;return zw.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function Hw(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Si(this.auth,"network-request-failed")),qw.get())})}}function Yc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Si(r,t,s);return o.customData._tokenResponse=n,o}function Lv(r){return r!==void 0&&r.enterprise!==void 0}class Gw{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Hw(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kw(r,t){return cr(r,"GET","/v2/recaptchaConfig",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(r,t){return cr(r,"POST","/v1/accounts:delete",t)}async function gh(r,t){return cr(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Yw(r,t=!1){const n=oe(r),s=await n.getIdToken(t),o=up(s);Et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Wl(pm(o.auth_time)),issuedAtTime:Wl(pm(o.iat)),expirationTime:Wl(pm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function pm(r){return Number(r)*1e3}function up(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const o=yT(n);return o?JSON.parse(o):(ih("Failed to decode base64 JWT payload"),null)}catch(o){return ih("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Bv(r){const t=up(r);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Oi&&Xw(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Xw({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(r){const t=r.auth,n=await r.getIdToken(),s=await _o(r,gh(t,{idToken:n}));Et(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?PT(o.providerUserInfo):[],f=Zw(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!f?.length,_=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,E)}async function Ww(r){const t=oe(r);await _h(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Zw(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function PT(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(r,t){const n=await VT(r,{},async()=>{const s=mu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await xT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&cs(r.emulatorConfig.host)&&(g.credentials="include"),MT.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tR(r,t){return cr(r,"POST","/v2/accounts:revokeToken",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Bv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const n=Bv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Jw(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new fo;return s&&(Et(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(Et(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(Et(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(r,t){Et(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Zn{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new $w(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await _o(this,this.stsTokenManager.getToken(this.auth,t));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Yw(this,t)}reload(){return Ww(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Zn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(sr(this.auth));const t=await this.getIdToken();return await _o(this,Qw(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:x,providerData:P,stsTokenManager:Y}=n;Et(w&&Y,t,"internal-error");const H=fo.fromJSON(this.name,Y);Et(typeof w=="string",t,"internal-error"),qr(s,t.name),qr(o,t.name),Et(typeof S=="boolean",t,"internal-error"),Et(typeof x=="boolean",t,"internal-error"),qr(u,t.name),qr(f,t.name),qr(m,t.name),qr(g,t.name),qr(_,t.name),qr(E,t.name);const it=new Zn({uid:w,auth:t,email:o,emailVerified:S,displayName:s,isAnonymous:x,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:H,createdAt:_,lastLoginAt:E});return P&&Array.isArray(P)&&(it.providerData=P.map(at=>({...at}))),g&&(it._redirectEventId=g),it}static async _fromIdTokenResponse(t,n,s=!1){const o=new fo;o.updateFromServerResponse(n);const u=new Zn({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await _h(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];Et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?PT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new fo;m.updateFromIdToken(s);const g=new Zn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Mm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;function rr(r){or(r instanceof Function,"Expected a class definition");let t=jv.get(r);return t?(or(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,jv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}UT.type="NONE";const zv=UT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(r,t,n){return`firebase:${r}:${t}:${n}`}class mo{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=rh(this.userKey,o.apiKey,u),this.fullPersistenceKey=rh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await gh(this.auth,{idToken:t}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,t):null}return Zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new mo(rr(zv),t,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||rr(zv);const f=rh(s,t.config.apiKey,t.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){let w;if(typeof E=="string"){const S=await gh(t,{idToken:E}).catch(()=>{});if(!S)break;w=await Zn._fromGetAccountInfoResponse(t,S,E)}else w=Zn._fromJSON(t,E);_!==u&&(m=w),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new mo(u,t,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new mo(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qT(t))return"Blackberry";if(HT(t))return"Webos";if(LT(t))return"Safari";if((t.includes("chrome/")||BT(t))&&!t.includes("edge/"))return"Chrome";if(zT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function kT(r=en()){return/firefox\//i.test(r)}function LT(r=en()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function BT(r=en()){return/crios\//i.test(r)}function jT(r=en()){return/iemobile/i.test(r)}function zT(r=en()){return/android/i.test(r)}function qT(r=en()){return/blackberry/i.test(r)}function HT(r=en()){return/webos/i.test(r)}function cp(r=en()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eR(r=en()){return cp(r)&&!!window.navigator?.standalone}function nR(){return gS()&&document.documentMode===10}function FT(r=en()){return cp(r)||zT(r)||HT(r)||qT(r)||/windows phone/i.test(r)||jT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(r,t=[]){let n;switch(r){case"Browser":n=qv(en());break;case"Worker":n=`${qv(en())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ca}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(r,t={}){return cr(r,"GET","/v2/passwordPolicy",hs(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=6;class aR{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hv(this),this.idTokenSubscription=new Hv(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await gh(this,{idToken:t}),s=await Zn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(wn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await _h(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Bw()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(wn(this.app))return Promise.reject(sr(this));const n=t?oe(t):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return wn(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await rR(this),n=new aR(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new du("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await tR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&rr(t)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=t.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=GT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Uw(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ha(r){return oe(r)}class Hv{constructor(t){this.auth=t,this.observer=null,this.addObserver=SS(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lR(r){Uh=r}function KT(r){return Uh.loadJS(r)}function uR(){return Uh.recaptchaEnterpriseScript}function cR(){return Uh.gapiScript}function hR(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class fR{constructor(){this.enterprise=new dR}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class dR{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const mR="recaptcha-enterprise",QT="NO_RECAPTCHA";class pR{constructor(t){this.type=mR,this.auth=ha(t)}async verify(t="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Kw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new Gw(g);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;Lv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(QT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fR().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Lv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uR();g.length!==0&&(g+=m),KT(g).then(()=>{o(m,u,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function Fv(r,t,n,s=!1,o=!1){const u=new pR(r);let f;if(o)f=QT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Vm(r,t,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Fv(r,t,n,n==="getOobCode");return s(r,u)}else return s(r,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Fv(r,t,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(r,t){const n=Ph(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(es(u,t??{}))return o;ei(o,"already-initialized")}return n.initialize({options:t})}function _R(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(rr);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function yR(r,t,n){const s=ha(r);Et(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=YT(t),{host:f,port:m}=vR(t),g=m===null?"":`:${m}`,_={url:`${u}//${f}${g}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Et(es(_,s.config.emulator)&&es(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,cs(f)?(np(`${u}//${f}${g}`),ip("Auth",!0)):ER()}function YT(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function vR(r){const t=YT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Gv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Gv(f)}}}function Gv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function ER(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(t){return ir("not implemented")}_linkToIdToken(t,n){return ir("not implemented")}_getReauthenticationResolver(t){return ir("not implemented")}}async function TR(r,t){return cr(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(r,t){return gu(r,"POST","/v1/accounts:signInWithPassword",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(r,t){return gu(r,"POST","/v1/accounts:signInWithEmailLink",hs(r,t))}async function SR(r,t){return gu(r,"POST","/v1/accounts:signInWithEmailLink",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends hp{constructor(t,n,s,o=null){super("password",s),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new su(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new su(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(t,n,"signInWithPassword",AR);case"emailLink":return bR(t,{email:this._email,oobCode:this._password});default:ei(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vm(t,s,"signUpPassword",TR);case"emailLink":return SR(t,{idToken:n,email:this._email,oobCode:this._password});default:ei(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(r,t){return gu(r,"POST","/v1/accounts:signInWithIdp",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="http://localhost";class ra extends hp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ra(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new ra(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return po(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,po(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,po(t,n)}buildRequest(){const t={requestUri:wR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=mu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IR(r){const t=Hl(Fl(r)).link,n=t?Hl(Fl(t)).deep_link_id:null,s=Hl(Fl(r)).deep_link_id;return(s?Hl(Fl(s)).link:null)||s||n||t||r}class fp{constructor(t){const n=Hl(Fl(t)),s=n.apiKey??null,o=n.oobCode??null,u=RR(n.mode??null);Et(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=IR(t);try{return new fp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(t,n){return su._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=fp.parseLink(n);return Et(s,"argument-error"),su._fromEmailAndCode(t,s.code,s.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends XT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends _u{constructor(){super("facebook.com")}static credential(t){return ra._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hr.credentialFromTaggedObject(t)}static credentialFromError(t){return Hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hr.credential(t.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ra._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Fr.credentialFromTaggedObject(t)}static credentialFromError(t){return Fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Fr.credential(n,s)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends _u{constructor(){super("github.com")}static credential(t){return ra._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Gr.credentialFromTaggedObject(t)}static credentialFromError(t){return Gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Gr.credential(t.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends _u{constructor(){super("twitter.com")}static credential(t,n){return ra._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Kr.credentialFromTaggedObject(t)}static credentialFromError(t){return Kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Kr.credential(n,s)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(r,t){return gu(r,"POST","/v1/accounts:signUp",hs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Zn._fromIdTokenResponse(t,s,o),f=Kv(s);return new sa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=Kv(s);return new sa({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function Kv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends Oi{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new yh(t,n,s,o)}}function $T(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(r,u,t,s):u})}async function DR(r,t,n=!1){const s=await _o(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return sa._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(r,t,n=!1){const{auth:s}=r;if(wn(s.app))return Promise.reject(sr(s));const o="reauthenticate";try{const u=await _o(r,$T(s,o,t,r),n);Et(u.idToken,s,"internal-error");const f=up(u.idToken);Et(f,s,"internal-error");const{sub:m}=f;return Et(r.uid===m,s,"user-mismatch"),sa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ei(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(r,t,n=!1){if(wn(r.app))return Promise.reject(sr(r));const s="signIn",o=await $T(r,s,t),u=await sa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function OR(r,t){return WT(ha(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(r){const t=ha(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function MR(r,t,n){if(wn(r.app))return Promise.reject(sr(r));const s=ha(r),f=await Vm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ZT(r),g}),m=await sa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function VR(r,t,n){return wn(r.app)?Promise.reject(sr(r)):OR(oe(r),wo.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ZT(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(r,t){return cr(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(r,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const s=oe(r),u={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await _o(s,xR(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function PR(r,t,n,s){return oe(r).onIdTokenChanged(t,n,s)}function UR(r,t,n){return oe(r).beforeAuthStateChanged(t,n)}function kR(r,t,n,s){return oe(r).onAuthStateChanged(t,n,s)}function LR(r){return oe(r).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1e3,jR=10;class e0 extends t0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);nR()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,jR):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}e0.type="LOCAL";const zR=e0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends t0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}n0.type="SESSION";const i0=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new kh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,u)),g=await qR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const _=dp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function FR(r){wi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function GR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KR(){return navigator?.serviceWorker?.controller||null}function QR(){return r0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firebaseLocalStorageDb",YR=1,Eh="firebaseLocalStorage",a0="fbase_key";class yu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lh(r,t){return r.transaction([Eh],t?"readwrite":"readonly").objectStore(Eh)}function XR(){const r=indexedDB.deleteDatabase(s0);return new yu(r).toPromise()}function xm(){const r=indexedDB.open(s0,YR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Eh,{keyPath:a0})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Eh)?t(s):(s.close(),await XR(),t(await xm()))})})}async function Qv(r,t,n){const s=Lh(r,!0).put({[a0]:t,value:n});return new yu(s).toPromise()}async function $R(r,t){const n=Lh(r,!1).get(t),s=await new yu(n).toPromise();return s===void 0?null:s.value}function Yv(r,t){const n=Lh(r,!0).delete(t);return new yu(n).toPromise()}const WR=800,ZR=3;class o0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xm(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>ZR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return r0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(QR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await GR(),!this.activeServiceWorker)return;this.sender=new HR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||KR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await xm();return await Qv(t,vh,"1"),await Yv(t,vh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Qv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>$R(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Lh(o,!1).getAll();return new yu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}o0.type="LOCAL";const JR=o0;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r,t){return t?rr(t):(Et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends hp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return po(t,this._buildIdpRequest())}_linkToIdToken(t,n){return po(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return po(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function eI(r){return WT(r.auth,new mp(r),r.bypassAuthState)}function nI(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),NR(n,new mp(r),r.bypassAuthState)}async function iI(r){const{auth:t,user:n}=r;return Et(n,t,"internal-error"),DR(n,new mp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return eI;case"linkViaPopup":case"linkViaRedirect":return iI;case"reauthViaPopup":case"reauthViaRedirect":return nI;default:ei(this.auth,"internal-error")}}resolve(t){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new pu(2e3,1e4);class ho extends l0{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const t=dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,rI.get())};t()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="pendingRedirect",sh=new Map;class aI extends l0{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=sh.get(this.auth._key());if(!t){try{const s=await oI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}sh.set(this.auth._key(),t)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oI(r,t){const n=cI(t),s=uI(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function lI(r,t){sh.set(r._key(),t)}function uI(r){return rr(r._redirectPersistence)}function cI(r){return rh(sI,r.config.apiKey,r.name)}async function hI(r,t,n=!1){if(wn(r.app))return Promise.reject(sr(r));const s=ha(r),o=tI(s,t),f=await new aI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=600*1e3;class dI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!mI(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!u0(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Si(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=fI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(t))}saveEventToCache(t){this.cachedEventUids.add(Xv(t)),this.lastProcessedEventTime=Date.now()}}function Xv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function u0({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function mI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(r,t={}){return cr(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_I=/^https?/;async function yI(r){if(r.config.emulator)return;const{authorizedDomains:t}=await pI(r);for(const n of t)try{if(vI(n))return}catch{}ei(r,"unauthorized-domain")}function vI(r){const t=Om(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!_I.test(n))return!1;if(gI.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=new pu(3e4,6e4);function $v(){const r=wi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function TI(r){return new Promise((t,n)=>{function s(){$v(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$v(),n(Si(r,"network-request-failed"))},timeout:EI.get()})}if(wi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(wi().gapi?.load)s();else{const o=hR("iframefcb");return wi()[o]=()=>{gapi.load?s():n(Si(r,"network-request-failed"))},KT(`${cR()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw ah=null,t})}let ah=null;function AI(r){return ah=ah||TI(r),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=new pu(5e3,15e3),SI="__/auth/iframe",wI="emulator/auth/iframe",RI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},II=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CI(r){const t=r.config;Et(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?lp(t,wI):`https://${r.config.authDomain}/${SI}`,s={apiKey:t.apiKey,appName:r.name,v:ca},o=II.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${mu(s).slice(1)}`}async function DI(r){const t=await AI(r),n=wi().gapi;return Et(n,r,"internal-error"),t.open({where:document.body,url:CI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Si(r,"network-request-failed"),m=wi().setTimeout(()=>{u(f)},bI.get());function g(){wi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OI=500,MI=600,VI="_blank",xI="http://localhost";class Wv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PI(r,t,n,s=OI,o=MI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...NI,width:s.toString(),height:o.toString(),top:u,left:f},_=en().toLowerCase();n&&(m=BT(_)?VI:n),kT(_)&&(t=t||xI,g.scrollbars="yes");const E=Object.entries(g).reduce((S,[x,P])=>`${S}${x}=${P},`,"");if(eR(_)&&m!=="_self")return UI(t||"",m),new Wv(null);const w=window.open(t||"",m,E);Et(w,r,"popup-blocked");try{w.focus()}catch{}return new Wv(w)}function UI(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__/auth/handler",LI="emulator/auth/handler",BI=encodeURIComponent("fac");async function Zv(r,t,n,s,o,u){Et(r.config.authDomain,r,"auth-domain-config-required"),Et(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ca,eventId:o};if(t instanceof XT){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",bS(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,w]of Object.entries({}))f[E]=w}if(t instanceof _u){const E=t.getScopes().filter(w=>w!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),_=g?`#${BI}=${encodeURIComponent(g)}`:"";return`${jI(r)}?${mu(m).slice(1)}${_}`}function jI({config:r}){return r.emulator?lp(r,LI):`https://${r.authDomain}/${kI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class zI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=i0,this._completeRedirectFn=hI,this._overrideRedirectResult=lI}async _openPopup(t,n,s,o){or(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Zv(t,n,s,Om(),o);return PI(t,u,dp())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await Zv(t,n,s,Om(),o);return FR(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(or(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await DI(t),s=new dI(t);return n.register("authEvent",o=>(Et(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(gm,{type:gm},o=>{const u=o?.[0]?.[gm];u!==void 0&&n(!!u),ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FT()||LT()||cp()}}const qI=zI;var Jv="@firebase/auth",tE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GI(r){ia(new ns("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Et(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GT(r)},_=new oR(s,o,u,g);return _R(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),ia(new ns("auth-internal",t=>{const n=ha(t.getProvider("auth").getImmediate());return(s=>new HI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(Jv,tE,FI(r)),bi(Jv,tE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=300,QI=AT("authIdTokenMaxAge")||KI;let eE=null;const YI=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>QI)return;const o=n?.token;eE!==o&&(eE=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XI(r=ap()){const t=Ph(r,"auth");if(t.isInitialized())return t.getImmediate();const n=gR(r,{popupRedirectResolver:qI,persistence:[JR,zR,i0]}),s=AT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=YI(u.toString());UR(n,f,()=>f(n.currentUser)),PR(n,m=>f(m))}}const o=vT("auth");return o&&yR(n,`http://${o}`),n}function $I(){return document.getElementsByTagName("head")?.[0]??document}lR({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=Si("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",$I().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GI("Browser");var WI="firebase",ZI="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(WI,ZI,"app");var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,c0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,b){function R(){}R.prototype=b.prototype,N.D=b.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(M,V,U){for(var C=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)C[Ht-2]=arguments[Ht];return b.prototype[V].apply(M,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,b,R){R||(R=0);var M=Array(16);if(typeof b=="string")for(var V=0;16>V;++V)M[V]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(V=0;16>V;++V)M[V]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=N.g[0],R=N.g[1],V=N.g[2];var U=N.g[3],C=b+(U^R&(V^U))+M[0]+3614090360&4294967295;b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+M[1]+3905402710&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+M[2]+606105819&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+M[3]+3250441966&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+M[4]+4118548399&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+M[5]+1200080426&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+M[6]+2821735955&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+M[7]+4249261313&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+M[8]+1770035416&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+M[9]+2336552879&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+M[10]+4294925233&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+M[11]+2304563134&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+M[12]+1804603682&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+M[13]+4254626195&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+M[14]+2792965006&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+M[15]+1236535329&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(V^U&(R^V))+M[1]+4129170786&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+M[6]+3225465664&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+M[11]+643717713&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+M[0]+3921069994&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+M[5]+3593408605&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+M[10]+38016083&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+M[15]+3634488961&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+M[4]+3889429448&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+M[9]+568446438&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+M[14]+3275163606&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+M[3]+4107603335&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+M[8]+1163531501&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+M[13]+2850285829&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+M[2]+4243563512&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+M[7]+1735328473&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+M[12]+2368359562&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(R^V^U)+M[5]+4294588738&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+M[8]+2272392833&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+M[11]+1839030562&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+M[14]+4259657740&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+M[1]+2763975236&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+M[4]+1272893353&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+M[7]+4139469664&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+M[10]+3200236656&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+M[13]+681279174&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+M[0]+3936430074&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+M[3]+3572445317&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+M[6]+76029189&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+M[9]+3654602809&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+M[12]+3873151461&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+M[15]+530742520&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+M[2]+3299628645&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(V^(R|~U))+M[0]+4096336452&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+M[7]+1126891415&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+M[14]+2878612391&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+M[5]+4237533241&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+M[12]+1700485571&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+M[3]+2399980690&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+M[10]+4293915773&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+M[1]+2240044497&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+M[8]+1873313359&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+M[15]+4264355552&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+M[6]+2734768916&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+M[13]+1309151649&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+M[4]+4149444226&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+M[11]+3174756917&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+M[2]+718787259&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+U&4294967295}s.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var R=b-this.blockSize,M=this.B,V=this.h,U=0;U<b;){if(V==0)for(;U<=R;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<b;)if(M[V++]=N.charCodeAt(U++),V==this.blockSize){o(this,M),V=0;break}}else for(;U<b;)if(M[V++]=N[U++],V==this.blockSize){o(this,M),V=0;break}}this.h=V,this.o+=b},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var R=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=R&255,R/=256;for(this.u(N),N=Array(16),b=R=0;4>b;++b)for(var M=0;32>M;M+=8)N[R++]=this.g[b]>>>M&255;return N};function u(N,b){var R=m;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=b(N)}function f(N,b){this.h=b;for(var R=[],M=!0,V=N.length-1;0<=V;V--){var U=N[V]|0;M&&U==b||(R[V]=U,M=!1)}this.g=R}var m={};function g(N){return-128<=N&&128>N?u(N,function(b){return new f([b|0],0>b?-1:0)}):new f([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return H(_(-N));for(var b=[],R=1,M=0;N>=R;M++)b[M]=N/R|0,R*=4294967296;return new f(b,0)}function E(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return H(E(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=_(Math.pow(b,8)),M=w,V=0;V<N.length;V+=8){var U=Math.min(8,N.length-V),C=parseInt(N.substring(V,V+U),b);8>U?(U=_(Math.pow(b,U)),M=M.j(U).add(_(C))):(M=M.j(R),M=M.add(_(C)))}return M}var w=g(0),S=g(1),x=g(16777216);r=f.prototype,r.m=function(){if(Y(this))return-H(this).m();for(var N=0,b=1,R=0;R<this.g.length;R++){var M=this.i(R);N+=(0<=M?M:4294967296+M)*b,b*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(Y(this))return"-"+H(this).toString(N);for(var b=_(Math.pow(N,6)),R=this,M="";;){var V=dt(R,b).g;R=it(R,V.j(b));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=V,P(R))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function Y(N){return N.h==-1}r.l=function(N){return N=it(this,N),Y(N)?-1:P(N)?0:1};function H(N){for(var b=N.g.length,R=[],M=0;M<b;M++)R[M]=~N.g[M];return new f(R,~N.h).add(S)}r.abs=function(){return Y(this)?H(this):this},r.add=function(N){for(var b=Math.max(this.g.length,N.g.length),R=[],M=0,V=0;V<=b;V++){var U=M+(this.i(V)&65535)+(N.i(V)&65535),C=(U>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);M=C>>>16,U&=65535,C&=65535,R[V]=C<<16|U}return new f(R,R[R.length-1]&-2147483648?-1:0)};function it(N,b){return N.add(H(b))}r.j=function(N){if(P(this)||P(N))return w;if(Y(this))return Y(N)?H(this).j(H(N)):H(H(this).j(N));if(Y(N))return H(this.j(H(N)));if(0>this.l(x)&&0>N.l(x))return _(this.m()*N.m());for(var b=this.g.length+N.g.length,R=[],M=0;M<2*b;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<N.g.length;V++){var U=this.i(M)>>>16,C=this.i(M)&65535,Ht=N.i(V)>>>16,kt=N.i(V)&65535;R[2*M+2*V]+=C*kt,at(R,2*M+2*V),R[2*M+2*V+1]+=U*kt,at(R,2*M+2*V+1),R[2*M+2*V+1]+=C*Ht,at(R,2*M+2*V+1),R[2*M+2*V+2]+=U*Ht,at(R,2*M+2*V+2)}for(M=0;M<b;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=b;M<2*b;M++)R[M]=0;return new f(R,0)};function at(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function nt(N,b){this.g=N,this.h=b}function dt(N,b){if(P(b))throw Error("division by zero");if(P(N))return new nt(w,w);if(Y(N))return b=dt(H(N),b),new nt(H(b.g),H(b.h));if(Y(b))return b=dt(N,H(b)),new nt(H(b.g),b.h);if(30<N.g.length){if(Y(N)||Y(b))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=b;0>=M.l(N);)R=ht(R),M=ht(M);var V=pt(R,1),U=pt(M,1);for(M=pt(M,2),R=pt(R,2);!P(M);){var C=U.add(M);0>=C.l(N)&&(V=V.add(R),U=C),M=pt(M,1),R=pt(R,1)}return b=it(N,V.j(b)),new nt(V,b)}for(V=w;0<=N.l(b);){for(R=Math.max(1,Math.floor(N.m()/b.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=_(R),C=U.j(b);Y(C)||0<C.l(N);)R-=M,U=_(R),C=U.j(b);P(U)&&(U=S),V=V.add(U),N=it(N,C)}return new nt(V,N)}r.A=function(N){return dt(this,N).h},r.and=function(N){for(var b=Math.max(this.g.length,N.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)&N.i(M);return new f(R,this.h&N.h)},r.or=function(N){for(var b=Math.max(this.g.length,N.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)|N.i(M);return new f(R,this.h|N.h)},r.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),R=[],M=0;M<b;M++)R[M]=this.i(M)^N.i(M);return new f(R,this.h^N.h)};function ht(N){for(var b=N.g.length+1,R=[],M=0;M<b;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new f(R,N.h)}function pt(N,b){var R=b>>5;b%=32;for(var M=N.g.length-R,V=[],U=0;U<M;U++)V[U]=0<b?N.i(U+R)>>>b|N.i(U+R+1)<<32-b:N.i(U+R);return new f(V,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,c0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,Zr=f}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h0,Gl,f0,oh,Pm,d0,m0,p0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)t:{var y=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in y))break t;y=y[L]}c=c[c.length-1],A=y[c],p=p(A),p!=A&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,A=!1,L={next:function(){if(!A&&y<c.length){var G=y++;return{value:p(G,c[G]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,y){return c.call.apply(c.bind,arguments)}function w(c,p,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function S(c,p,y){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,S.apply(null,arguments)}function x(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function P(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,L,G){for(var st=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)st[Lt-2]=arguments[Lt];return p.prototype[L].apply(A,st)}}function Y(c){const p=c.length;if(0<p){const y=Array(p);for(let A=0;A<p;A++)y[A]=c[A];return y}return[]}function H(c,p){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(g(A)){const L=c.length||0,G=A.length||0;c.length=L+G;for(let st=0;st<G;st++)c[L+st]=A[st]}else c.push(A)}}class it{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function at(c){return/^[\s\xa0]*$/.test(c)}function nt(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function dt(c){return dt[" "](c),c}dt[" "]=function(){};var ht=nt().indexOf("Gecko")!=-1&&!(nt().toLowerCase().indexOf("webkit")!=-1&&nt().indexOf("Edge")==-1)&&!(nt().indexOf("Trident")!=-1||nt().indexOf("MSIE")!=-1)&&nt().indexOf("Edge")==-1;function pt(c,p,y){for(const A in c)p.call(y,c[A],A,c)}function N(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function b(c){const p={};for(const y in c)p[y]=c[y];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,p){let y,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(y in A)c[y]=A[y];for(let G=0;G<R.length;G++)y=R[G],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function V(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function U(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Ut;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Ht{constructor(){this.h=this.g=null}add(p,y){const A=kt.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var kt=new it(()=>new K,c=>c.reset());class K{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ct=!1,Ut=new Ht,D=()=>{const c=m.Promise.resolve(void 0);et=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(y){U(y)}var p=kt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ct=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function Rt(c,p){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(ht){t:{try{dt(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Rt.aa.h.call(this)}}P(Rt,tt);var yt={2:"touch",3:"pen",4:"mouse"};Rt.prototype.h=function(){Rt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Qt=0;function mn(c,p,y,A,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=L,this.key=++Qt,this.da=this.fa=!1}function Hn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Cn(c){this.src=c,this.g={},this.h=0}Cn.prototype.add=function(c,p,y,A,L){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var st=fr(c,p,A,L);return-1<st?(p=c[st],y||(p.fa=!1)):(p=new mn(p,this.src,G,!!A,L),p.fa=y,c.push(p)),p};function ii(c,p){var y=p.type;if(y in c.g){var A=c.g[y],L=Array.prototype.indexOf.call(A,p,void 0),G;(G=0<=L)&&Array.prototype.splice.call(A,L,1),G&&(Hn(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function fr(c,p,y,A){for(var L=0;L<c.length;++L){var G=c[L];if(!G.da&&G.listener==p&&G.capture==!!y&&G.ha==A)return L}return-1}var pn="closure_lm_"+(1e6*Math.random()|0),dr={};function ms(c,p,y,A,L){if(Array.isArray(p)){for(var G=0;G<p.length;G++)ms(c,p[G],y,A,L);return null}return y=wu(y),c&&c[ce]?c.K(p,y,_(A)?!!A.capture:!1,L):Ce(c,p,y,!1,A,L)}function Ce(c,p,y,A,L,G){if(!p)throw Error("Invalid event type");var st=_(L)?!!L.capture:!!L,Lt=pa(c);if(Lt||(c[pn]=Lt=new Cn(c)),y=Lt.add(p,y,A,st,G),y.proxy)return y;if(A=ps(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)mt||(L=st),L===void 0&&(L=!1),c.addEventListener(p.toString(),A,L);else if(c.attachEvent)c.attachEvent(gs(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ps(){function c(y){return p.call(c.src,c.listener,y)}const p=sf;return c}function Fn(c,p,y,A,L){if(Array.isArray(p))for(var G=0;G<p.length;G++)Fn(c,p[G],y,A,L);else A=_(A)?!!A.capture:!!A,y=wu(y),c&&c[ce]?(c=c.i,p=String(p).toString(),p in c.g&&(G=c.g[p],y=fr(G,y,A,L),-1<y&&(Hn(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete c.g[p],c.h--)))):c&&(c=pa(c))&&(p=c.g[p.toString()],c=-1,p&&(c=fr(p,y,A,L)),(y=-1<c?p[c]:null)&&ma(y))}function ma(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ce])ii(p.i,c);else{var y=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(y,A,c.capture):p.detachEvent?p.detachEvent(gs(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=pa(p))?(ii(y,c),y.h==0&&(y.src=null,p[pn]=null)):Hn(c)}}}function gs(c){return c in dr?dr[c]:dr[c]="on"+c}function sf(c,p){if(c.da)c=!0;else{p=new Rt(p,this);var y=c.listener,A=c.ha||c.src;c.fa&&ma(c),c=y.call(A,p)}return c}function pa(c){return c=c[pn],c instanceof Cn?c:null}var Vo="__closure_events_fn_"+(1e9*Math.random()>>>0);function wu(c){return typeof c=="function"?c:(c[Vo]||(c[Vo]=function(p){return c.handleEvent(p)}),c[Vo])}function he(){rt.call(this),this.i=new Cn(this),this.M=this,this.F=null}P(he,rt),he.prototype[ce]=!0,he.prototype.removeEventListener=function(c,p,y,A){Fn(this,c,p,y,A)};function Yt(c,p){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new tt(p,c);else if(p instanceof tt)p.target=p.target||c;else{var L=p;p=new tt(A,c),M(p,L)}if(L=!0,y)for(var G=y.length-1;0<=G;G--){var st=p.g=y[G];L=gn(st,A,!0,p)&&L}if(st=p.g=c,L=gn(st,A,!0,p)&&L,L=gn(st,A,!1,p)&&L,y)for(G=0;G<y.length;G++)st=p.g=y[G],L=gn(st,A,!1,p)&&L}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],A=0;A<y.length;A++)Hn(y[A]);delete c.g[p],c.h--}}this.F=null},he.prototype.K=function(c,p,y,A){return this.i.add(String(c),p,!1,y,A)},he.prototype.L=function(c,p,y,A){return this.i.add(String(c),p,!0,y,A)};function gn(c,p,y,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,G=0;G<p.length;++G){var st=p[G];if(st&&!st.da&&st.capture==y){var Lt=st.listener,Ne=st.ha||st.src;st.fa&&ii(c.i,st),L=Lt.call(Ne,A)!==!1&&L}}return L&&!A.defaultPrevented}function Xe(c,p,y){if(typeof c=="function")y&&(c=S(c,y));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Ru(c){c.g=Xe(()=>{c.g=null,c.i&&(c.i=!1,Ru(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class af extends rt{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ru(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(c){rt.call(this),this.h=c,this.g={}}P(_s,rt);var ys=[];function vs(c){pt(c.g,function(p,y){this.g.hasOwnProperty(y)&&ma(p)},c),c.g={}}_s.prototype.N=function(){_s.aa.N.call(this),vs(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=m.JSON.stringify,ga=m.JSON.parse,Es=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function xo(){}xo.prototype.h=null;function Po(c){return c.h||(c.h=c.i())}function Uo(){}var Mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vi(){tt.call(this,"d")}P(Vi,tt);function ko(){tt.call(this,"c")}P(ko,tt);var ri={},Lo=null;function mr(){return Lo=Lo||new he}ri.La="serverreachability";function _a(c){tt.call(this,ri.La,c)}P(_a,tt);function pr(c){const p=mr();Yt(p,new _a(p))}ri.STAT_EVENT="statevent";function Iu(c,p){tt.call(this,ri.STAT_EVENT,c),this.stat=p}P(Iu,tt);function se(c){const p=mr();Yt(p,new Iu(p,c))}ri.Ma="timingevent";function De(c,p){tt.call(this,ri.Ma,c),this.size=p}P(De,tt);function Te(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Bo(c,p,y,A,L,G){c.info(function(){if(c.g)if(G)for(var st="",Lt=G.split("&"),Ne=0;Ne<Lt.length;Ne++){var Bt=Lt[Ne].split("=");if(1<Bt.length){var Ue=Bt[0];Bt=Bt[1];var Oe=Ue.split("_");st=2<=Oe.length&&Oe[1]=="type"?st+(Ue+"="+Bt+"&"):st+(Ue+"=redacted&")}}else st=null;else st=G;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+p+`
`+y+`
`+st})}function of(c,p,y,A,L,G,st){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+p+`
`+y+`
`+G+" "+st})}function gr(c,p,y,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ts(c,y)+(A?" "+A:"")})}function Cu(c,p){c.info(function(){return"TIMEOUT: "+p})}Dn.prototype.info=function(){};function Ts(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var G=L[0];if(G!="noop"&&G!="stop"&&G!="close")for(var st=1;st<L.length;st++)L[st]=""}}}}return Gn(y)}catch{return p}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function ai(){}P(ai,xo),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},si=new ai;function nn(c,p,y,A){this.j=c,this.i=p,this.l=y,this.R=A||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}var jo={},ya={};function Kn(c,p,y){c.L=1,c.v=Rs(_n(p)),c.m=y,c.P=!0,Pi(c,null)}function Pi(c,p){c.F=Date.now(),As(c),c.A=_n(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Ko(y.i,"t",A),c.C=0,y=c.j.J,c.h=new ge,c.g=Fu(c.j,y?p:null,!c.m),0<c.O&&(c.M=new af(S(c.Y,c,c.g),c.O)),p=c.U,y=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(ys[0]=L.toString()),L=ys);for(var G=0;G<L.length;G++){var st=ms(y,L[G],A||p.handleEvent,!1,p.h||p);if(!st)break;p.g[st.key]=st}p=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),pr(),Bo(c.i,c.u,c.A,c.l,c.R,c.m)}nn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Vn(c)==3?p.j():this.Y(c)},nn.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=Vn(this.g);var p=this.g.Ba();const Hi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||Uu(this.g)))){this.J||Oe!=4||p==7||(p==8||0>=Hi?pr(3):pr(2)),yr(this);var y=this.g.Z();this.X=y;e:if(Du(this)){var A=Uu(this.g);c="";var L=A.length,G=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ze(this),oi(this);var st="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(G&&p==L-1)});A.length=0,this.h.g+=c,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=y==200,of(this.i,this.u,this.A,this.l,this.R,Oe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Lt,Ne=this.g;if((Lt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(Lt)){var Bt=Lt;break e}}Bt=null}if(y=Bt)gr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,y);else{this.o=!1,this.s=3,se(12),ze(this),oi(this);break t}}if(this.P){y=!0;let qe;for(;!this.J&&this.C<st.length;)if(qe=Nu(this,st),qe==ya){Oe==4&&(this.s=4,se(14),y=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==jo){this.s=4,se(15),gr(this.i,this.l,st,"[Invalid Chunk]"),y=!1;break}else gr(this.i,this.l,qe,null),bs(this,qe);if(Du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||st.length!=0||this.h.h||(this.s=1,se(16),y=!1),this.o=this.o&&y,!y)gr(this.i,this.l,st,"[Invalid Chunked Response]"),ze(this),oi(this);else if(0<st.length&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.ba&&!Ue.M&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),xs(Ue),Ue.M=!0,se(11))}}else gr(this.i,this.l,st,null),bs(this,st);Oe==4&&ze(this),this.o&&!this.J&&(Oe==4?zu(this.j,this):(this.o=!1,As(this)))}else ff(this.g),y==400&&0<st.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),ze(this),oi(this)}}}catch{}finally{}};function Du(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Nu(c,p){var y=c.C,A=p.indexOf(`
`,y);return A==-1?ya:(y=Number(p.substring(y,A)),isNaN(y)?jo:(A+=1,A+y>p.length?ya:(p=p.slice(A,A+y),c.C=A+y,p)))}nn.prototype.cancel=function(){this.J=!0,ze(this)};function As(c){c.S=Date.now()+c.I,Ou(c,c.I)}function Ou(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Te(S(c.ba,c),p)}function yr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}nn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Cu(this.i,this.A),this.L!=2&&(pr(),se(17)),ze(this),this.s=2,oi(this)):Ou(this,this.S-c)};function oi(c){c.j.G==0||c.J||zu(c.j,c)}function ze(c){yr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,vs(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function bs(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||zo(y.h,c))){if(!c.K&&zo(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Na(y),Ca(y);else break t;Wo(y),se(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Te(S(y.Za,y),6e3));if(1>=Ea(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else qi(y,11)}else if((c.K||y.g==c)&&Na(y),!at(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let Bt=L[p];if(y.T=Bt[0],Bt=Bt[1],y.G==2)if(Bt[0]=="c"){y.K=Bt[1],y.ia=Bt[2];const Ue=Bt[3];Ue!=null&&(y.la=Ue,y.j.info("VER="+y.la));const Oe=Bt[4];Oe!=null&&(y.Aa=Oe,y.j.info("SVER="+y.Aa));const Hi=Bt[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(A=1.5*Hi,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const qe=c.g;if(qe){const mi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var G=A.h;G.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Ta(G,G.h),G.h=null))}if(A.D){const Jo=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(A.ya=Jo,Wt(A.I,A.D,Jo))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var st=c;if(A.qa=Hu(A,A.J?A.ia:null,A.W),st.K){rn(A.h,st);var Lt=st,Ne=A.L;Ne&&(Lt.I=Ne),Lt.B&&(yr(Lt),As(Lt)),A.g=st}else Bu(A);0<y.i.length&&Da(y)}else Bt[0]!="stop"&&Bt[0]!="close"||qi(y,7);else y.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?qi(y,7):Xo(y):Bt[0]!="noop"&&y.l&&y.l.ta(Bt),y.v=0)}}pr(4)}catch{}}var Mu=class{constructor(c,p){this.g=c,this.map=p}};function Ui(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ea(c){return c.h?1:c.g?c.g.size:0}function zo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Ta(c,p){c.g?c.g.add(p):c.h=p}function rn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Ui.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function qo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return Y(c.i)}function lf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,A=0;A<y;A++)p.push(c[A]);return p}p=[],y=0;for(A in c)p[y++]=c[A];return p}function Aa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const A in c)p[y++]=A;return p}}}function Ho(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Aa(c),A=lf(c),L=A.length,G=0;G<L;G++)p.call(void 0,A[G],y&&y[G],c)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uf(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),L=null;if(0<=A){var G=c[y].substring(0,A);L=c[y].substring(A+1)}else G=c[y];p(G,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ae(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ae){this.h=c.h,ws(this,c.j),this.o=c.o,this.g=c.g,vr(this,c.s),this.l=c.l;var p=c.i,y=new Li;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ki(this,y),this.m=c.m}else c&&(p=String(c).match(Ss))?(this.h=!1,ws(this,p[1]||"",!0),this.o=Nn(p[2]||""),this.g=Nn(p[3]||"",!0),vr(this,p[4]),this.l=Nn(p[5]||"",!0),ki(this,p[6]||"",!0),this.m=Nn(p[7]||"")):(this.h=!1,this.i=new Li(null,this.h))}Ae.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Is(p,Fo,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Is(p,Fo,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Is(y,y.charAt(0)=="/"?cf:Go,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Is(y,ba)),c.join("")};function _n(c){return new Ae(c)}function ws(c,p,y){c.j=y?Nn(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function vr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ki(c,p,y){p instanceof Li?(c.i=p,xu(c.i,c.h)):(y||(p=Is(p,hf)),c.i=new Li(p,c.h))}function Wt(c,p,y){c.i.set(p,y)}function Rs(c){return Wt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Nn(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Is(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Vu),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Vu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Fo=/[#\/\?@]/g,Go=/[#\?:]/g,cf=/[#\?]/g,hf=/[#\?@]/g,ba=/#/g;function Li(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function On(c){c.g||(c.g=new Map,c.h=0,c.i&&uf(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Li.prototype,r.add=function(c,p){On(this),this.i=null,c=li(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function Bi(c,p){On(c),p=li(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ji(c,p){return On(c),p=li(c,p),c.g.has(p)}r.forEach=function(c,p){On(this),this.g.forEach(function(y,A){y.forEach(function(L){c.call(p,L,A,this)},this)},this)},r.na=function(){On(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let A=0;A<p.length;A++){const L=c[A];for(let G=0;G<L.length;G++)y.push(p[A])}return y},r.V=function(c){On(this);let p=[];if(typeof c=="string")ji(this,c)&&(p=p.concat(this.g.get(li(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},r.set=function(c,p){return On(this),this.i=null,c=li(this,c),ji(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Ko(c,p,y){Bi(c,p),0<y.length&&(c.i=null,c.g.set(li(c,p),Y(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var A=p[y];const G=encodeURIComponent(String(A)),st=this.V(A);for(A=0;A<st.length;A++){var L=G;st[A]!==""&&(L+="="+encodeURIComponent(String(st[A]))),c.push(L)}}return this.i=c.join("&")};function li(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function xu(c,p){p&&!c.j&&(On(c),c.i=null,c.g.forEach(function(y,A){var L=A.toLowerCase();A!=L&&(Bi(this,A),Ko(this,L,y))},c)),c.j=p}function Cs(c,p){const y=new Dn;if(m.Image){const A=new Image;A.onload=x(Mn,y,"TestLoadImage: loaded",!0,p,A),A.onerror=x(Mn,y,"TestLoadImage: error",!1,p,A),A.onabort=x(Mn,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=x(Mn,y,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Qn(c,p){const y=new Dn,A=new AbortController,L=setTimeout(()=>{A.abort(),Mn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(L),G.ok?Mn(y,"TestPingServer: ok",!0,p):Mn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Mn(y,"TestPingServer: error",!1,p)})}function Mn(c,p,y,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(y)}catch{}}function Ds(){this.g=new Es}function ui(c,p,y){const A=y||"";try{Ho(c,function(L,G){let st=L;_(L)&&(st=Gn(L)),p.push(A+G+"="+encodeURIComponent(st))})}catch(L){throw p.push(A+"type="+encodeURIComponent("_badmap")),L}}function Er(c){this.l=c.Ub||null,this.j=c.eb||!1}P(Er,xo),Er.prototype.g=function(){return new zi(this.l,this.j)},Er.prototype.i=function(c){return function(){return c}}({});function zi(c,p){he.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(zi,he),r=zi.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,hi(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ci(this):hi(this),this.readyState==3&&Qo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ci(this))},r.Qa=function(c){this.g&&(this.response=c,ci(this))},r.ga=function(){this.g&&ci(this)};function ci(c){c.readyState=4,c.l=null,c.j=null,c.v=null,hi(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function hi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yo(c){let p="";return pt(c,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Pe(c,p,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=Yo(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Wt(c,p,y))}function Gt(c){he.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Gt,he);var Sa=/^https?$/i,Ns=["POST","PUT"];r=Gt.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?Po(this.o):Po(si),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){Pu(this,G);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)y.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())y.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ns,p,void 0))||A||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,st]of y)this.g.setRequestHeader(G,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Os(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Pu(this,G)}};function Pu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,wa(c),fi(c)}function wa(c){c.A||(c.A=!0,Yt(c,"complete"),Yt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Yt(this,"complete"),Yt(this,"abort"),fi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),Gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ra(this):this.bb())},r.bb=function(){Ra(this)};function Ra(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)Xe(c.Ea,0,c);else if(Yt(c,"readystatechange"),Vn(c)==4){c.h=!1;try{const st=c.Z();t:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var A;if(A=st===0){var L=String(c.D).match(Ss)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),A=!Sa.test(L?L.toLowerCase():"")}y=A}if(y)Yt(c,"complete"),Yt(c,"success");else{c.m=6;try{var G=2<Vn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",wa(c)}}finally{fi(c)}}}}function fi(c,p){if(c.g){Os(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Yt(c,"ready");try{y.onreadystatechange=A}catch{}}}function Os(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ga(p)}};function Uu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ff(c){const p={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(at(c[A]))continue;var y=V(c[A]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=p[L]||[];p[L]=G,G.push(y)}N(p,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function Ia(c){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ms("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ms("baseRetryDelayMs",5e3,c),this.cb=Ms("retryDelaySeedMs",1e4,c),this.Wa=Ms("forwardChannelMaxRetries",2,c),this.wa=Ms("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(c&&c.concurrentRequestLimit),this.Da=new Ds,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ia.prototype,r.la=8,r.G=1,r.connect=function(c,p,y,A){se(0),this.W=c,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Hu(this,null,this.W),Da(this)};function Xo(c){if(ku(c),c.G==3){var p=c.U++,y=_n(c.I);if(Wt(y,"SID",c.K),Wt(y,"RID",p),Wt(y,"TYPE","terminate"),Vs(c,y),p=new nn(c,c.j,p),p.L=2,p.v=Rs(_n(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=Fu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),As(p)}qu(c)}function Ca(c){c.g&&(xs(c),c.g.cancel(),c.g=null)}function ku(c){Ca(c),c.u&&(m.clearTimeout(c.u),c.u=null),Na(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Da(c){if(!va(c.h)&&!c.s){c.s=!0;var p=c.Ga;et||D(),ct||(et(),ct=!0),Ut.add(p,c),c.B=0}}function df(c,p){return Ea(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Te(S(c.Ga,c,p),Zo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new nn(this,this.j,c);let G=this.o;if(this.S&&(G?(G=b(G),M(G,this.S)):G=this.S),this.m!==null||this.O||(L.H=G,G=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=Lu(this,L,p),y=_n(this.I),Wt(y,"RID",c),Wt(y,"CVER",22),this.D&&Wt(y,"X-HTTP-Session-Id",this.D),Vs(this,y),G&&(this.O?p="headers="+encodeURIComponent(String(Yo(G)))+"&"+p:this.m&&Pe(y,this.m,G)),Ta(this.h,L),this.Ua&&Wt(y,"TYPE","init"),this.P?(Wt(y,"$req",p),Wt(y,"SID","null"),L.T=!0,Kn(L,y,null)):Kn(L,y,p),this.G=2}}else this.G==3&&(c?$o(this,c):this.i.length==0||va(this.h)||$o(this))};function $o(c,p){var y;p?y=p.l:y=c.U++;const A=_n(c.I);Wt(A,"SID",c.K),Wt(A,"RID",y),Wt(A,"AID",c.T),Vs(c,A),c.m&&c.o&&Pe(A,c.m,c.o),y=new nn(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Lu(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ta(c.h,y),Kn(y,A,p)}function Vs(c,p){c.H&&pt(c.H,function(y,A){Wt(p,A,y)}),c.l&&Ho({},function(y,A){Wt(p,A,y)})}function Lu(c,p,y){y=Math.min(c.i.length,y);var A=c.l?S(c.l.Na,c.l,c):null;t:{var L=c.i;let G=-1;for(;;){const st=["count="+y];G==-1?0<y?(G=L[0].g,st.push("ofs="+G)):G=0:st.push("ofs="+G);let Lt=!0;for(let Ne=0;Ne<y;Ne++){let Bt=L[Ne].g;const Ue=L[Ne].map;if(Bt-=G,0>Bt)G=Math.max(0,L[Ne].g-100),Lt=!1;else try{ui(Ue,st,"req"+Bt+"_")}catch{A&&A(Ue)}}if(Lt){A=st.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,A}function Bu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;et||D(),ct||(et(),ct=!0),Ut.add(p,c),c.v=0}}function Wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Te(S(c.Fa,c),Zo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Te(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),Ca(this),ju(this))};function xs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function ju(c){c.g=new nn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=_n(c.qa);Wt(p,"RID","rpc"),Wt(p,"SID",c.K),Wt(p,"AID",c.T),Wt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Wt(p,"TO",c.ja),Wt(p,"TYPE","xmlhttp"),Vs(c,p),c.m&&c.o&&Pe(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Rs(_n(p)),y.m=null,y.P=!0,Pi(y,c)}r.Za=function(){this.C!=null&&(this.C=null,Ca(this),Wo(this),se(19))};function Na(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function zu(c,p){var y=null;if(c.g==p){Na(c),xs(c),c.g=null;var A=2}else if(zo(c.h,p))y=p.D,rn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;A=mr(),Yt(A,new De(A,y)),Da(c)}else Bu(c);else if(L=p.s,L==3||L==0&&0<p.X||!(A==1&&df(c,p)||A==2&&Wo(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:qi(c,5);break;case 4:qi(c,10);break;case 3:qi(c,6);break;default:qi(c,2)}}}function Zo(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function qi(c,p){if(c.j.info("Error code "+p),p==2){var y=S(c.fb,c),A=c.Xa;const L=!A;A=new Ae(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ws(A,"https"),Rs(A),L?Cs(A.toString(),y):Qn(A.toString(),y)}else se(2);c.G=0,c.l&&c.l.sa(p),qu(c),ku(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function qu(c){if(c.G=0,c.ka=[],c.l){const p=qo(c.h);(p.length!=0||c.i.length!=0)&&(H(c.ka,p),H(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Hu(c,p,y){var A=y instanceof Ae?_n(y):new Ae(y);if(A.g!="")p&&(A.g=p+"."+A.g),vr(A,A.s);else{var L=m.location;A=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var G=new Ae(null);A&&ws(G,A),p&&(G.g=p),L&&vr(G,L),y&&(G.l=y),A=G}return y=c.D,p=c.ya,y&&p&&Wt(A,y,p),Wt(A,"VER",c.la),Vs(c,A),A}function Fu(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Gt(new Er({eb:y})):new Gt(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}r=Gu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Oa(){}Oa.prototype.g=function(c,p){return new sn(c,p)};function sn(c,p){he.call(this),this.g=new Ia(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!at(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!at(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new di(this)}P(sn,he),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Xo(this.g)},sn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Gn(c),c=y);p.i.push(new Mu(p.Ya++,c)),p.G==3&&Da(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,sn.aa.N.call(this)};function Ku(c){Vi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}P(Ku,Vi);function Qu(){ko.call(this),this.status=1}P(Qu,ko);function di(c){this.g=c}P(di,Gu),di.prototype.ua=function(){Yt(this.g,"a")},di.prototype.ta=function(c){Yt(this.g,new Ku(c))},di.prototype.sa=function(c){Yt(this.g,new Qu)},di.prototype.ra=function(){Yt(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,p0=function(){return new Oa},m0=function(){return mr()},d0=ri,Pm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,oh=_r,xi.COMPLETE="complete",f0=xi,Uo.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",he.prototype.listen=he.prototype.K,Gl=Uo,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,h0=Gt}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});const iE="@firebase/firestore",rE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new rp("@firebase/firestore");function oo(){return aa.logLevel}function lt(r,...t){if(aa.logLevel<=Vt.DEBUG){const n=t.map(pp);aa.debug(`Firestore (${Ro}): ${r}`,...n)}}function lr(r,...t){if(aa.logLevel<=Vt.ERROR){const n=t.map(pp);aa.error(`Firestore (${Ro}): ${r}`,...n)}}function yo(r,...t){if(aa.logLevel<=Vt.WARN){const n=t.map(pp);aa.warn(`Firestore (${Ro}): ${r}`,...n)}}function pp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,g0(r,s,n)}function g0(r,t,n){let s=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw lr(s),new Error(s)}function Kt(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||g0(t,o,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends Oi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class JI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}}class tC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eC{constructor(t){this.t=t,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Kt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Jr,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Jr)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Kt(typeof s.accessToken=="string",31837,{l:s}),new _0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string",2055,{h:t}),new Je(t)}}class nC{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iC{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rC{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Kt(this.o===void 0,3512);const s=u=>{u.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>s(u))};const o=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=sC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function xt(r,t){return r<t?-1:r>t?1:0}function Um(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return _m(o)===_m(u)?xt(o,u):_m(o)?1:-1}return xt(r.length,t.length)}const aC=55296,oC=57343;function _m(r){const t=r.charCodeAt(0);return t>=aC&&t<=oC}function vo(r,t,n){return r.length===t.length&&r.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__name__";class Ti{constructor(t,n,s){n===void 0?n=0:n>t.length&&Tt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Tt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return Ti.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Ti?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=Ti.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return xt(t.length,n.length)}static compareSegments(t,n){const s=Ti.isNumericId(t),o=Ti.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Ti.extractNumericId(t).compare(Ti.extractNumericId(n)):Um(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Zr.fromString(t.substring(4,t.length-2))}}class ie extends Ti{construct(t,n,s){return new ie(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ot($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ie(n)}static emptyPath(){return new ie([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Ti{construct(t,n,s){return new Qe(t,n,s)}static isValidIdentifier(t){return lC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aE}static keyField(){return new Qe([aE])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ot($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ot($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ot($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ot($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(ie.fromString(t))}static fromName(t){return new gt(ie.fromString(t).popFirst(5))}static empty(){return new gt(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ie.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ie.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new ie(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(r,t,n){if(!n)throw new ot($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function uC(r,t,n,s){if(t===!0&&s===!0)throw new ot($.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function oE(r){if(!gt.isDocumentKey(r))throw new ot($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function lE(r){if(gt.isDocumentKey(r))throw new ot($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function v0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Bh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":Tt(12329,{type:typeof r})}function Jn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bh(r);throw new ot($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,t){const n={typeString:r};return t&&(n.value=t),n}function vu(r,t){if(!v0(r))throw new ot($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ot($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=-62135596800,cE=1e6;class re{static now(){return re.fromMillis(Date.now())}static fromDate(t){return re.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*cE);return new re(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<uE)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cE}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(vu(t,re._jsonSchema))return new re(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-uE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}re._jsonSchemaVersion="firestore/timestamp/1.0",re._jsonSchema={type:Ie("string",re._jsonSchemaVersion),seconds:Ie("number"),nanoseconds:Ie("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{static fromTimestamp(t){return new bt(t)}static min(){return new bt(new re(0,0))}static max(){return new bt(new re(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;function cC(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=bt.fromTimestamp(s===1e9?new re(n+1,0):new re(n,s));return new is(o,gt.empty(),t)}function hC(r){return new is(r.readTime,r.key,au)}class is{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new is(bt.min(),gt.empty(),au)}static max(){return new is(bt.max(),gt.empty(),au)}}function fC(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=gt.comparator(r.documentKey,t.documentKey),n!==0?n:xt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Io(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==dC)throw r;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new J((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):J.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):J.reject(n)}static resolve(t){return new J((n,s)=>{n(t)})}static reject(t){return new J((n,s)=>{s(t)})}static waitFor(t){return new J((n,s)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>s(g))}),f=!0,u===o&&n()})}static or(t){let n=J.resolve(!1);for(const s of t)n=n.next(o=>o?J.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(t,n){return new J((s,o)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;n(t[_]).next(E=>{f[_]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(t,n){return new J((s,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):s()};u()})}}function pC(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Co(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-1;function zh(r){return r==null}function Th(r){return r===0&&1/r==-1/0}function gC(r){return typeof r=="number"&&Number.isInteger(r)&&!Th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="";function _C(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=hE(t)),t=yC(r.get(n),t);return hE(t)}function yC(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case E0:n+="";break;default:n+=u}}return n}function hE(r){return r+E0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function fs(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function T0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||Ke.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new $c(this.root,t,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new $c(this.root,t,this.comparator,!0)}}class $c{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??Ke.RED,this.left=o??Ke.EMPTY,this.right=u??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new Ke(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Ke.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Tt(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Tt(57766)}get value(){throw Tt(16141)}get color(){throw Tt(16727)}get left(){throw Tt(29726)}get right(){throw Tt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new Ke(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(t){return new dE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof xe)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new xe(this.comparator);return n.data=t,n}}class dE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(t){this.fields=t,t.sort(Qe.comparator)}static empty(){return new Rn([])}unionWith(t){let n=new xe(Qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Rn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vo(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new A0("Invalid base64 string: "+u):u}}(t);return new Ye(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new Ye(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(r){if(Kt(!!r,39018),typeof r=="string"){let t=0;const n=vC.exec(r);if(Kt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(r.seconds),nanos:ve(r.nanos)}}function ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ss(r){return typeof r=="string"?Ye.fromBase64String(r):Ye.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="server_timestamp",S0="__type__",w0="__previous_value__",R0="__local_write_time__";function yp(r){return(r?.mapValue?.fields||{})[S0]?.stringValue===b0}function qh(r){const t=r.mapValue.fields[w0];return yp(t)?qh(t):t}function ou(r){const t=rs(r.mapValue.fields[R0].timestampValue);return new re(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n,s,o,u,f,m,g,_,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const Ah="(default)";class lu{constructor(t,n){this.projectId=t,this.database=n||Ah}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===Ah}isEqual(t){return t instanceof lu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="__type__",TC="__max__",Wc={mapValue:{}},C0="__vector__",bh="value";function as(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?yp(r)?4:bC(r)?9007199254740991:AC(r)?10:11:Tt(28295,{value:r})}function Ni(r,t){if(r===t)return!0;const n=as(r);if(n!==as(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return ou(r).isEqual(ou(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=rs(o.timestampValue),m=rs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(o,u){return ss(o.bytesValue).isEqual(ss(u.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(o,u){return ve(o.geoPointValue.latitude)===ve(u.geoPointValue.latitude)&&ve(o.geoPointValue.longitude)===ve(u.geoPointValue.longitude)}(r,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ve(o.integerValue)===ve(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ve(o.doubleValue),m=ve(u.doubleValue);return f===m?Th(f)===Th(m):isNaN(f)&&isNaN(m)}return!1}(r,t);case 9:return vo(r.arrayValue.values||[],t.arrayValue.values||[],Ni);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(fE(f)!==fE(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Ni(f[g],m[g])))return!1;return!0}(r,t);default:return Tt(52216,{left:r})}}function uu(r,t){return(r.values||[]).find(n=>Ni(n,t))!==void 0}function Eo(r,t){if(r===t)return 0;const n=as(r),s=as(t);if(n!==s)return xt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return xt(r.booleanValue,t.booleanValue);case 2:return function(u,f){const m=ve(u.integerValue||u.doubleValue),g=ve(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,t);case 3:return mE(r.timestampValue,t.timestampValue);case 4:return mE(ou(r),ou(t));case 5:return Um(r.stringValue,t.stringValue);case 6:return function(u,f){const m=ss(u),g=ss(f);return m.compareTo(g)}(r.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=xt(m[_],g[_]);if(E!==0)return E}return xt(m.length,g.length)}(r.referenceValue,t.referenceValue);case 8:return function(u,f){const m=xt(ve(u.latitude),ve(f.latitude));return m!==0?m:xt(ve(u.longitude),ve(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return pE(r.arrayValue,t.arrayValue);case 10:return function(u,f){const m=u.fields||{},g=f.fields||{},_=m[bh]?.arrayValue,E=g[bh]?.arrayValue,w=xt(_?.values?.length||0,E?.values?.length||0);return w!==0?w:pE(_,E)}(r.mapValue,t.mapValue);case 11:return function(u,f){if(u===Wc.mapValue&&f===Wc.mapValue)return 0;if(u===Wc.mapValue)return 1;if(f===Wc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=f.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let w=0;w<g.length&&w<E.length;++w){const S=Um(g[w],E[w]);if(S!==0)return S;const x=Eo(m[g[w]],_[E[w]]);if(x!==0)return x}return xt(g.length,E.length)}(r.mapValue,t.mapValue);default:throw Tt(23264,{he:n})}}function mE(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return xt(r,t);const n=rs(r),s=rs(t),o=xt(n.seconds,s.seconds);return o!==0?o:xt(n.nanos,s.nanos)}function pE(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Eo(n[o],s[o]);if(u)return u}return xt(n.length,s.length)}function To(r){return km(r)}function km(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=rs(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return ss(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return gt.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=km(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${km(n.fields[f])}`;return o+"}"}(r.mapValue):Tt(61005,{value:r})}function lh(r){switch(as(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=qh(r);return t?16+lh(t):16;case 5:return 2*r.stringValue.length;case 6:return ss(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+lh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return fs(s.fields,(u,f)=>{o+=u.length+lh(f)}),o}(r.mapValue);default:throw Tt(13486,{value:r})}}function gE(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Lm(r){return!!r&&"integerValue"in r}function vp(r){return!!r&&"arrayValue"in r}function _E(r){return!!r&&"nullValue"in r}function yE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uh(r){return!!r&&"mapValue"in r}function AC(r){return(r?.mapValue?.fields||{})[I0]?.stringValue===C0}function Zl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return fs(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Zl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zl(r.arrayValue.values[n]);return t}return{...r}}function bC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===TC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.value=t}static empty(){return new dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!uh(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zl(n)}setAll(t){let n=Qe.emptyPath(),s={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Zl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ni(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];uh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){fs(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new dn(Zl(this.value))}}function D0(r){const t=[];return fs(r.fields,(n,s)=>{const o=new Qe([n]);if(uh(s)){const u=D0(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new Rn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t,n,s,o,u,f,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new tn(t,0,bt.min(),bt.min(),bt.min(),dn.empty(),0)}static newFoundDocument(t,n,s,o){return new tn(t,1,n,bt.min(),s,o,0)}static newNoDocument(t,n){return new tn(t,2,n,bt.min(),bt.min(),dn.empty(),0)}static newUnknownDocument(t,n){return new tn(t,3,n,bt.min(),bt.min(),dn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(t,n){this.position=t,this.inclusive=n}}function vE(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=gt.comparator(gt.fromName(f.referenceValue),n.key):s=Eo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function EE(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ni(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(t,n="asc"){this.field=t,this.dir=n}}function SC(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{}class Re extends N0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new RC(t,n,s):n==="array-contains"?new DC(t,s):n==="in"?new NC(t,s):n==="not-in"?new OC(t,s):n==="array-contains-any"?new MC(t,s):new Re(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new IC(t,s):new CC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Eo(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ni extends N0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new ni(t,n)}matches(t){return O0(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O0(r){return r.op==="and"}function M0(r){return wC(r)&&O0(r)}function wC(r){for(const t of r.filters)if(t instanceof ni)return!1;return!0}function Bm(r){if(r instanceof Re)return r.field.canonicalString()+r.op.toString()+To(r.value);if(M0(r))return r.filters.map(t=>Bm(t)).join(",");{const t=r.filters.map(n=>Bm(n)).join(",");return`${r.op}(${t})`}}function V0(r,t){return r instanceof Re?function(s,o){return o instanceof Re&&s.op===o.op&&s.field.isEqual(o.field)&&Ni(s.value,o.value)}(r,t):r instanceof ni?function(s,o){return o instanceof ni&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&V0(f,o.filters[m]),!0):!1}(r,t):void Tt(19439)}function x0(r){return r instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${To(n.value)}`}(r):r instanceof ni?function(n){return n.op.toString()+" {"+n.getFilters().map(x0).join(" ,")+"}"}(r):"Filter"}class RC extends Re{constructor(t,n,s){super(t,n,s),this.key=gt.fromName(s.referenceValue)}matches(t){const n=gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class IC extends Re{constructor(t,n){super(t,"in",n),this.keys=P0("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class CC extends Re{constructor(t,n){super(t,"not-in",n),this.keys=P0("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function P0(r,t){return(t.arrayValue?.values||[]).map(n=>gt.fromName(n.referenceValue))}class DC extends Re{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vp(n)&&uu(n.arrayValue,this.value)}}class NC extends Re{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class OC extends Re{constructor(t,n){super(t,"not-in",n)}matches(t){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class MC extends Re{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>uu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t,n=null,s=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function TE(r,t=null,n=[],s=[],o=null,u=null,f=null){return new VC(r,t,n,s,o,u,f)}function Ep(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Bm(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),zh(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>To(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>To(s)).join(",")),t.Te=n}return t.Te}function Tp(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!SC(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!V0(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!EE(r.startAt,t.startAt)&&EE(r.endAt,t.endAt)}function jm(r){return gt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xC(r,t,n,s,o,u,f,m){return new Do(r,t,n,s,o,u,f,m)}function Ap(r){return new Do(r)}function AE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function U0(r){return r.collectionGroup!==null}function Jl(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new xe(Qe.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new cu(u,s))}),n.has(Qe.keyField().canonicalString())||t.Ie.push(new cu(Qe.keyField(),s))}return t.Ie}function Ri(r){const t=St(r);return t.Ee||(t.Ee=PC(t,Jl(r))),t.Ee}function PC(r,t){if(r.limitType==="F")return TE(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new cu(o.field,u)});const n=r.endAt?new Sh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Sh(r.startAt.position,r.startAt.inclusive):null;return TE(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function zm(r,t){const n=r.filters.concat([t]);return new Do(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function wh(r,t,n){return new Do(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Hh(r,t){return Tp(Ri(r),Ri(t))&&r.limitType===t.limitType}function k0(r){return`${Ep(Ri(r))}|lt:${r.limitType}`}function lo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>x0(o)).join(", ")}]`),zh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>To(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>To(o)).join(",")),`Target(${s})`}(Ri(r))}; limitType=${r.limitType})`}function Fh(r,t){return t.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):gt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,t)&&function(s,o){for(const u of Jl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,t)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,t)&&function(s,o){return!(s.startAt&&!function(f,m,g){const _=vE(f,m,g);return f.inclusive?_<=0:_<0}(s.startAt,Jl(s),o)||s.endAt&&!function(f,m,g){const _=vE(f,m,g);return f.inclusive?_>=0:_>0}(s.endAt,Jl(s),o))}(r,t)}function UC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function L0(r){return(t,n)=>{let s=!1;for(const o of Jl(r)){const u=kC(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function kC(r,t,n){const s=r.field.isKeyField()?gt.comparator(t.key,n.key):function(u,f,m){const g=f.data.field(u),_=m.data.field(u);return g!==null&&_!==null?Eo(g,_):Tt(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Tt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){fs(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return T0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new ue(gt.comparator);function ur(){return LC}const B0=new ue(gt.comparator);function Kl(...r){let t=B0;for(const n of r)t=t.insert(n.key,n);return t}function j0(r){let t=B0;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Zs(){return tu()}function z0(){return tu()}function tu(){return new fa(r=>r.toString(),(r,t)=>r.isEqual(t))}const BC=new ue(gt.comparator),jC=new xe(gt.comparator);function Pt(...r){let t=jC;for(const n of r)t=t.add(n);return t}const zC=new xe(xt);function qC(){return zC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(t)?"-0":t}}function q0(r){return{integerValue:""+r}}function HC(r,t){return gC(t)?q0(t):bp(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function FC(r,t,n){return r instanceof hu?function(o,u){const f={fields:{[S0]:{stringValue:b0},[R0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&yp(u)&&(u=qh(u)),u&&(f.fields[w0]=u),{mapValue:f}}(n,t):r instanceof Ao?F0(r,t):r instanceof fu?G0(r,t):function(o,u){const f=H0(o,u),m=bE(f)+bE(o.Ae);return Lm(f)&&Lm(o.Ae)?q0(m):bp(o.serializer,m)}(r,t)}function GC(r,t,n){return r instanceof Ao?F0(r,t):r instanceof fu?G0(r,t):n}function H0(r,t){return r instanceof Rh?function(s){return Lm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(t)?t:{integerValue:0}:null}class hu extends Gh{}class Ao extends Gh{constructor(t){super(),this.elements=t}}function F0(r,t){const n=K0(t);for(const s of r.elements)n.some(o=>Ni(o,s))||n.push(s);return{arrayValue:{values:n}}}class fu extends Gh{constructor(t){super(),this.elements=t}}function G0(r,t){let n=K0(t);for(const s of r.elements)n=n.filter(o=>!Ni(o,s));return{arrayValue:{values:n}}}class Rh extends Gh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function bE(r){return ve(r.integerValue||r.doubleValue)}function K0(r){return vp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,n){this.field=t,this.transform=n}}function KC(r,t){return r.field.isEqual(t.field)&&function(s,o){return s instanceof Ao&&o instanceof Ao||s instanceof fu&&o instanceof fu?vo(s.elements,o.elements,Ni):s instanceof Rh&&o instanceof Rh?Ni(s.Ae,o.Ae):s instanceof hu&&o instanceof hu}(r.transform,t.transform)}class QC{constructor(t,n){this.version=t,this.transformResults=n}}class ti{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ti}static exists(t){return new ti(void 0,t)}static updateTime(t){return new ti(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ch(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Kh{}function Y0(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new $0(r.key,ti.none()):new Eu(r.key,r.data,ti.none());{const n=r.data,s=dn.empty();let o=new xe(Qe.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new ds(r.key,s,new Rn(o.toArray()),ti.none())}}function YC(r,t,n){r instanceof Eu?function(o,u,f){const m=o.value.clone(),g=wE(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,t,n):r instanceof ds?function(o,u,f){if(!ch(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=wE(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(X0(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function eu(r,t,n,s){return r instanceof Eu?function(u,f,m,g){if(!ch(u.precondition,f))return m;const _=u.value.clone(),E=RE(u.fieldTransforms,g,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(r,t,n,s):r instanceof ds?function(u,f,m,g){if(!ch(u.precondition,f))return m;const _=RE(u.fieldTransforms,g,f),E=f.data;return E.setAll(X0(u)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,t,n,s):function(u,f,m){return ch(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,t,n)}function XC(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=H0(s.transform,o||null);u!=null&&(n===null&&(n=dn.empty()),n.set(s.field,u))}return n||null}function SE(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&vo(s,o,(u,f)=>KC(u,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Eu extends Kh{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ds extends Kh{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function X0(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function wE(r,t,n){const s=new Map;Kt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=t.data.field(u.field);s.set(u.field,GC(f,m,n[o]))}return s}function RE(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,FC(u,f,t))}return s}class $0 extends Kh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $C extends Kh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&YC(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=eu(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=eu(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=z0();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=Y0(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(bt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pt())}isEqual(t){return this.batchId===t.batchId&&vo(this.mutations,t.mutations,(n,s)=>SE(n,s))&&vo(this.baseMutations,t.baseMutations,(n,s)=>SE(n,s))}}class Sp{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Kt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=function(){return BC}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Sp(t,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,zt;function t2(r){switch(r){case $.OK:return Tt(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Tt(15467,{code:r})}}function W0(r){if(r===void 0)return lr("GRPC error has no .code"),$.UNKNOWN;switch(r){case we.OK:return $.OK;case we.CANCELLED:return $.CANCELLED;case we.UNKNOWN:return $.UNKNOWN;case we.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case we.INTERNAL:return $.INTERNAL;case we.UNAVAILABLE:return $.UNAVAILABLE;case we.UNAUTHENTICATED:return $.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case we.NOT_FOUND:return $.NOT_FOUND;case we.ALREADY_EXISTS:return $.ALREADY_EXISTS;case we.PERMISSION_DENIED:return $.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case we.ABORTED:return $.ABORTED;case we.OUT_OF_RANGE:return $.OUT_OF_RANGE;case we.UNIMPLEMENTED:return $.UNIMPLEMENTED;case we.DATA_LOSS:return $.DATA_LOSS;default:return Tt(39323,{code:r})}}(zt=we||(we={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Zr([4294967295,4294967295],0);function IE(r){const t=e2().encode(r),n=new c0;return n.update(t),new Uint8Array(n.digest())}function CE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Zr([n,s],0),new Zr([o,u],0)]}class wp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(s<0)throw new Ql(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Zr.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Zr.fromNumber(s)));return o.compare(n2)===1&&(o=new Zr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=IE(t),[s,o]=CE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new wp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(t){if(this.ge===0)return;const n=IE(t),[s,o]=CE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,Tu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Qh(bt.min(),o,new ue(xt),ur(),Pt())}}class Tu{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Tu(s,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class Z0{constructor(t,n){this.targetId=t,this.Ce=n}}class J0{constructor(t,n,s=Ye.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class DE{constructor(){this.ve=0,this.Fe=NE(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pt(),n=Pt(),s=Pt();return this.Fe.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Tt(38017,{changeType:u})}}),new Tu(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=NE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i2{constructor(t){this.Ge=t,this.ze=new Map,this.je=ur(),this.Je=Zc(),this.He=Zc(),this.Ye=new ue(xt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Tt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(jm(u))if(s===0){const f=new gt(u.path);this.et(n,f,tn.newNoDocument(f,bt.min()))}else Kt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(t),g=m?this.ct(m,t,f):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=ss(s).toUint8Array()}catch(g){if(g instanceof A0)return yo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new wp(f,o,u)}catch(g){return yo(g instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(t){const n=new Map;this.ze.forEach((u,f)=>{const m=this.ot(f);if(m){if(u.current&&jm(m.target)){const g=new gt(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,tn.newNoDocument(g,t))}u.Be&&(n.set(f,u.ke()),u.qe())}});let s=Pt();this.He.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.je.forEach((u,f)=>f.setReadTime(t));const o=new Qh(t,n,this.Ye,this.je,s);return this.je=ur(),this.Je=Zc(),this.He=Zc(),this.Ye=new ue(xt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new DE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new xe(xt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new xe(xt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new DE),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Zc(){return new ue(gt.comparator)}function NE(){return new ue(gt.comparator)}const r2={asc:"ASCENDING",desc:"DESCENDING"},s2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a2={and:"AND",or:"OR"};class o2{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function qm(r,t){return r.useProto3Json||zh(t)?t:{value:t}}function Ih(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tA(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function l2(r,t){return Ih(r,t.toTimestamp())}function Ii(r){return Kt(!!r,49232),bt.fromTimestamp(function(n){const s=rs(n);return new re(s.seconds,s.nanos)}(r))}function Rp(r,t){return Hm(r,t).canonicalString()}function Hm(r,t){const n=function(o){return new ie(["projects",o.projectId,"databases",o.database])}(r).child("documents");return t===void 0?n:n.child(t)}function eA(r){const t=ie.fromString(r);return Kt(aA(t),10190,{key:t.toString()}),t}function Fm(r,t){return Rp(r.databaseId,t.path)}function ym(r,t){const n=eA(t);if(n.get(1)!==r.databaseId.projectId)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ot($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new gt(iA(n))}function nA(r,t){return Rp(r.databaseId,t)}function u2(r){const t=eA(r);return t.length===4?ie.emptyPath():iA(t)}function Gm(r){return new ie(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function iA(r){return Kt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function OE(r,t,n){return{name:Fm(r,t),fields:n.value.mapValue.fields}}function c2(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Tt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Kt(E===void 0||typeof E=="string",58123),Ye.fromBase64String(E||"")):(Kt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ye.fromUint8Array(E||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(_){const E=_.code===void 0?$.UNKNOWN:W0(_.code);return new ot(E,_.message||"")}(f);n=new J0(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=ym(r,s.document.name),u=Ii(s.document.updateTime),f=s.document.createTime?Ii(s.document.createTime):bt.min(),m=new dn({mapValue:{fields:s.document.fields}}),g=tn.newFoundDocument(o,u,f,m),_=s.targetIds||[],E=s.removedTargetIds||[];n=new hh(_,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=ym(r,s.document),u=s.readTime?Ii(s.readTime):bt.min(),f=tn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new hh([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=ym(r,s.document),u=s.removedTargetIds||[];n=new hh([],u,o,null)}else{if(!("filter"in t))return Tt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new JC(o,u),m=s.targetId;n=new Z0(m,f)}}return n}function h2(r,t){let n;if(t instanceof Eu)n={update:OE(r,t.key,t.value)};else if(t instanceof $0)n={delete:Fm(r,t.key)};else if(t instanceof ds)n={update:OE(r,t.key,t.data),updateMask:E2(t.fieldMask)};else{if(!(t instanceof $C))return Tt(16599,{Vt:t.type});n={verify:Fm(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof hu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ao)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Tt(20930,{transform:f.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:l2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Tt(27497)}(r,t.precondition)),n}function f2(r,t){return r&&r.length>0?(Kt(t!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Ii(o.updateTime):Ii(u);return f.isEqual(bt.min())&&(f=Ii(u)),new QC(f,o.transformResults||[])}(n,t))):[]}function d2(r,t){return{documents:[nA(r,t.path)]}}function m2(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=nA(r,o);const u=function(_){if(_.length!==0)return sA(ni.create(_,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(_){if(_.length!==0)return _.map(E=>function(S){return{field:uo(S.field),direction:_2(S.dir)}}(E))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=qm(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:n,parent:o}}function p2(r){let t=u2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Kt(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=function(w){const S=rA(w);return S instanceof ni&&M0(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(S=>function(P){return new cu(co(P.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(w){let S;return S=typeof w=="object"?w.value:w,zh(S)?null:S}(n.limit));let g=null;n.startAt&&(g=function(w){const S=!!w.before,x=w.values||[];return new Sh(x,S)}(n.startAt));let _=null;return n.endAt&&(_=function(w){const S=!w.before,x=w.values||[];return new Sh(x,S)}(n.endAt)),xC(t,o,f,u,m,"F",g,_)}function g2(r,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tt(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function rA(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=co(n.unaryFilter.field);return Re.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=co(n.unaryFilter.field);return Re.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=co(n.unaryFilter.field);return Re.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=co(n.unaryFilter.field);return Re.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tt(61313);default:return Tt(60726)}}(r):r.fieldFilter!==void 0?function(n){return Re.create(co(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tt(58110);default:return Tt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ni.create(n.compositeFilter.filters.map(s=>rA(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Tt(1026)}}(n.compositeFilter.op))}(r):Tt(30097,{filter:r})}function _2(r){return r2[r]}function y2(r){return s2[r]}function v2(r){return a2[r]}function uo(r){return{fieldPath:r.canonicalString()}}function co(r){return Qe.fromServerFormat(r.fieldPath)}function sA(r){return r instanceof Re?function(n){if(n.op==="=="){if(yE(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(_E(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yE(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(_E(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:y2(n.op),value:n.value}}}(r):r instanceof ni?function(n){const s=n.getFilters().map(o=>sA(o));return s.length===1?s[0]:{compositeFilter:{op:v2(n.op),filters:s}}}(r):Tt(54877,{filter:r})}function E2(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function aA(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,n,s,o,u=bt.min(),f=bt.min(),m=Ye.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.yt=t}}function A2(r){const t=p2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.Cn=new S2}addToCollectionParentIndex(t,n){return this.Cn.add(n),J.resolve()}getCollectionParents(t,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return J.resolve()}deleteFieldIndex(t,n){return J.resolve()}deleteAllFieldIndexes(t){return J.resolve()}createTargetIndexes(t,n){return J.resolve()}getDocumentsMatchingTarget(t,n){return J.resolve(null)}getIndexType(t,n){return J.resolve(0)}getFieldIndexes(t,n){return J.resolve([])}getNextCollectionGroupToUpdate(t){return J.resolve(null)}getMinOffset(t,n){return J.resolve(is.min())}getMinOffsetFromCollectionGroup(t,n){return J.resolve(is.min())}updateCollectionGroup(t,n,s){return J.resolve()}updateIndexEntries(t,n){return J.resolve()}}class S2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new xe(ie.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new xe(ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oA=41943040;class fn{static withCacheSize(t){return new fn(t,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(oA,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new bo(0)}static cr(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="LruGarbageCollector",w2=1048576;function xE([r,t],[n,s]){const o=xt(r,n);return o===0?xt(t,s):o}class R2{constructor(t){this.Ir=t,this.buffer=new xe(xE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();xE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lt(VE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Co(n)?lt(VE,"Ignoring IndexedDB error during garbage collection: ",n):await Io(n)}await this.Vr(3e5)})}}class C2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return J.resolve(jh.ce);const s=new R2(n);return this.mr.forEachTarget(t,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(t,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(ME)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ME):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,f,m,g,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(t,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(t,s,n))).next(w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(t,s))).next(w=>(_=Date.now(),oo()<=Vt.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function D2(r,t){return new C2(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.changes=new fa(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(s!==null&&eu(s.mutation,o,Rn.empty(),re.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Pt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Pt()){const o=Zs();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,s).next(u=>{let f=Kl();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=Zs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Pt()))}populateOverlays(t,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,s,o){let u=ur();const f=tu(),m=function(){return tu()}();return n.forEach((g,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof ds)?u=u.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),eu(E.mutation,_,E.mutation.getFieldMask(),re.now())):f.set(_.key,Rn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,E)=>f.set(_,E)),n.forEach((_,E)=>m.set(_,new O2(E,f.get(_)??null))),m))}recalculateAndSaveOverlays(t,n){const s=tu();let o=new ue((f,m)=>f-m),u=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let E=s.get(g)||Rn.empty();E=m.applyToLocalView(_,E),s.set(g,E);const w=(o.get(m.batchId)||Pt()).add(g);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,w=z0();E.forEach(S=>{if(!u.has(S)){const x=Y0(n.get(S),s.get(S));x!==null&&w.set(S,x),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(t,_,w))}return J.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,o){return function(f){return gt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):U0(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):J.resolve(Zs());let m=au,g=u;return f.next(_=>J.forEach(_,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?J.resolve():this.remoteDocumentCache.getEntry(t,E).next(S=>{g=g.insert(E,S)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,Pt())).next(E=>({batchId:m,changes:j0(E)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new gt(n)).next(s=>{let o=Kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=Kl();return this.indexManager.getCollectionParents(t,u).next(m=>J.forEach(m,g=>{const _=function(w,S){return new Do(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,s,o).next(E=>{E.forEach((w,S)=>{f=f.insert(w,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o))).next(f=>{u.forEach((g,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,tn.newInvalidDocument(E)))});let m=Kl();return f.forEach((g,_)=>{const E=u.get(g);E!==void 0&&eu(E.mutation,_,Rn.empty(),re.now()),Fh(n,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ii(o.createTime)}}(n)),J.resolve()}getNamedQuery(t,n){return J.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(o){return{name:o.name,query:A2(o.bundledQuery),readTime:Ii(o.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.overlays=new ue(gt.comparator),this.qr=new Map}getOverlay(t,n){return J.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Zs();return J.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((o,u)=>{this.St(t,n,u)}),J.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(t,n,s){const o=Zs(),u=n.length+1,f=new gt(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ue((_,E)=>_-E);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let E=u.get(_.largestBatchId);E===null&&(E=Zs(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=Zs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return J.resolve(m)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new ZC(n,s));let u=this.qr.get(n);u===void 0&&(u=Pt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return J.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Qr=new xe(je.$r),this.Ur=new xe(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new je(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new je(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new gt(new ie([])),s=new je(n,t),o=new je(n,t+1),u=[];return this.Ur.forEachInRange([s,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new gt(new ie([])),s=new je(n,t),o=new je(n,t+1);let u=Pt();return this.Ur.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new je(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class je{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return gt.comparator(t.key,n.key)||xt(t.Yr,n.Yr)}static Kr(t,n){return xt(t.Yr,n.Yr)||gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xe(je.$r)}checkEmpty(t){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new WC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new je(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return J.resolve(f)}lookupMutationBatch(t,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?_p:this.tr-1)}getAllMutationBatches(t){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new je(n,0),o=new je(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],f=>{const m=this.Xr(f.Yr);u.push(m)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new xe(xt);return n.forEach(o=>{const u=new je(o,0),f=new je(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],m=>{s=s.add(m.Yr)})}),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;gt.isDocumentKey(u)||(u=u.child(""));const f=new je(new gt(u),0);let m=new xe(xt);return this.Zr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)},f),J.resolve(this.ti(m))}ti(t){const n=[];return t.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Kt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(n.mutations,o=>{const u=new je(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new je(n,0),o=this.Zr.firstAfterOrEqual(s);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,J.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(t){this.ri=t,this.docs=function(){return new ue(gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(t,n){let s=ur();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))}),J.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=ur();const f=n.path,m=new gt(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||fC(hC(E),s)<=0||(o.has(E.key)||Fh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(t,n,s,o){Tt(9500)}ii(t,n){return J.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new L2(this)}getSize(t){return J.resolve(this.size)}}class L2 extends N2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)}),J.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t){this.persistence=t,this.si=new fa(n=>Ep(n),Tp),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ip,this.targetCount=0,this.ai=bo.ur()}forEachTarget(t,n){return this.si.forEach((s,o)=>n(o)),J.resolve()}getLastRemoteSnapshotVersion(t){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return J.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),J.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new bo(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(t,n){return this.Pr(n),J.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),J.waitFor(u).next(()=>o)}getTargetCount(t){return J.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return J.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),J.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),J.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return J.resolve(s)}containsKey(t,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t,n){this.ui={},this.overlays={},this.ci=new jh(0),this.li=!1,this.li=!0,this.hi=new P2,this.referenceDelegate=t(this),this.Pi=new B2(this),this.indexManager=new b2,this.remoteDocumentCache=function(o){return new k2(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new T2(n),this.Ii=new V2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new x2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new U2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){lt("MemoryPersistence","Starting transaction:",t);const o=new j2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(t,n){return J.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class j2 extends mC{constructor(t){super(),this.currentSequenceNumber=t}}class Cp{constructor(t){this.persistence=t,this.Ri=new Ip,this.Vi=null}static mi(t){return new Cp(t)}get fi(){if(this.Vi)return this.Vi;throw Tt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),J.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,s=>{const o=gt.fromPath(s);return this.gi(t,o).next(u=>{u||n.removeEntry(o,bt.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ch{constructor(t,n){this.persistence=t,this.pi=new fa(s=>_C(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=D2(this,n)}static mi(t,n){return new Ch(t,n)}Ei(){}di(t){return J.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(o=>s+o))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return J.forEach(this.pi,(s,o)=>this.br(t,s,o).next(u=>u?J.resolve():n(o)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,f=>this.br(t,f,n).next(m=>{m||(s++,u.removeEntry(f,bt.min()))})).next(()=>u.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),J.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),J.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),J.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),J.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=lh(t.data.value)),n}br(t,n,s){return J.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Pt(),o=Pt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Dp(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _S()?8:pC(en())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(t,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new z2;return this.Ss(t,n,f).next(m=>{if(u.result=m,this.Vs)return this.bs(t,n,f,m.size)})}).next(()=>u.result)}bs(t,n,s,o){return s.documentReadCount<this.fs?(oo()<=Vt.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(oo()<=Vt.DEBUG&&lt("QueryEngine","Query:",lo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(oo()<=Vt.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ri(n))):J.resolve())}ys(t,n){if(AE(n))return J.resolve(null);let s=Ri(n);return this.indexManager.getIndexType(t,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=wh(n,null,"F"),s=Ri(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(u=>{const f=Pt(...u);return this.ps.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,s).next(g=>{const _=this.Ds(n,m);return this.Cs(n,_,f,g.readTime)?this.ys(t,wh(n,null,"F")):this.vs(t,_,n,g)}))})))}ws(t,n,s,o){return AE(n)||o.isEqual(bt.min())?J.resolve(null):this.ps.getDocuments(t,s).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?J.resolve(null):(oo()<=Vt.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lo(n)),this.vs(t,f,n,cC(o,au)).next(m=>m))})}Ds(t,n){let s=new xe(L0(t));return n.forEach((o,u)=>{Fh(t,u)&&(s=s.add(u))}),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return oo()<=Vt.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",lo(n)),this.ps.getDocumentsMatchingQuery(t,n,is.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",H2=3e8;class F2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ue(xt),this.xs=new fa(u=>Ep(u),Tp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new M2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function G2(r,t,n,s){return new F2(r,t,n,s)}async function uA(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let g=Pt();for(const _ of o){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next(_=>({Ls:_,removedBatchIds:f,addedBatchIds:m}))})})}function K2(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const w=_.batch,S=w.keys();let x=J.resolve();return S.forEach(P=>{x=x.next(()=>E.getEntry(g,P)).next(Y=>{const H=_.docVersions.get(P);Kt(H!==null,48541),Y.version.compareTo(H)<0&&(w.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),E.addEntry(Y)))})}),x.next(()=>m.mutationQueue.removeMutationBatch(g,w))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Pt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>n.localDocuments.getDocuments(s,o))})}function cA(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function Q2(r,t){const n=St(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach((E,w)=>{const S=o.get(w);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(u,E.addedDocuments,w)));let x=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(w)!==null?x=x.withResumeToken(Ye.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):E.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(E.resumeToken,s)),o=o.insert(w,x),function(Y,H,it){return Y.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=H2?!0:it.addedDocuments.size+it.modifiedDocuments.size+it.removedDocuments.size>0}(S,x,E)&&m.push(n.Pi.updateTargetData(u,x))});let g=ur(),_=Pt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(Y2(u,f,t.documentUpdates).next(E=>{g=E.ks,_=E.qs})),!s.isEqual(bt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next(w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return J.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(n.Ms=o,u))}function Y2(r,t,n){let s=Pt(),o=Pt();return n.forEach(u=>s=s.add(u)),t.getEntries(r,s).next(u=>{let f=ur();return n.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(bt.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):lt(Np,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{ks:f,qs:o}})}function X2(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=_p),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function $2(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,t).next(u=>u?(o=u,J.resolve(o)):n.Pi.allocateTargetId(s).next(f=>(o=new Xr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function Km(r,t,n){const s=St(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Co(f))throw f;lt(Np,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function PE(r,t,n){const s=St(r);let o=bt.min(),u=Pt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,_,E){const w=St(g),S=w.xs.get(E);return S!==void 0?J.resolve(w.Ms.get(S)):w.Pi.getTargetData(_,E)}(s,f,Ri(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,t,n?o:bt.min(),n?u:Pt())).next(m=>(W2(s,UC(t),m),{documents:m,Qs:u})))}function W2(r,t,n){let s=r.Os.get(t)||bt.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Os.set(t,s)}class UE{constructor(){this.activeTargetIds=qC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Z2{constructor(){this.Mo=new UE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new UE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="ConnectivityMonitor";class LE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(kE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lt(kE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Qm(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",tD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Ah?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const f=Qm(),m=this.zo(t,n.toUriEncodedString());lt(vm,`Sending RPC '${t}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:_}=new URL(m),E=cs(_);return this.Jo(t,m,g,s,E).then(w=>(lt(vm,`Received RPC '${t}' ${f}: `,w),w),w=>{throw yo(vm,`RPC '${t}' ${f} failed with error: `,w,"url: ",m,"request:",s),w})}Ho(t,n,s,o,u,f){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}zo(t,n){const s=tD[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class iD extends eD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const f=Qm();return new Promise((m,g)=>{const _=new h0;_.setWithCredentials(!0),_.listenOnce(f0.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case oh.NO_ERROR:const w=_.getResponseJson();lt(Ze,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),m(w);break;case oh.TIMEOUT:lt(Ze,`RPC '${t}' ${f} timed out`),g(new ot($.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const S=_.getStatus();if(lt(Ze,`RPC '${t}' ${f} failed with status:`,S,"response text:",_.getResponseText()),S>0){let x=_.getResponseJson();Array.isArray(x)&&(x=x[0]);const P=x?.error;if(P&&P.status&&P.message){const Y=function(it){const at=it.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(at)>=0?at:$.UNKNOWN}(P.status);g(new ot(Y,P.message))}else g(new ot($.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ot($.UNAVAILABLE,"Connection failed."));break;default:Tt(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{lt(Ze,`RPC '${t}' ${f} completed.`)}});const E=JSON.stringify(o);lt(Ze,`RPC '${t}' ${f} sending request:`,o),_.send(n,"POST",E,s,15)})}T_(t,n,s){const o=Qm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=p0(),m=m0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");lt(Ze,`Creating RPC '${t}' stream ${o}: ${E}`,g);const w=f.createWebChannel(E,g);this.I_(w);let S=!1,x=!1;const P=new nD({Yo:H=>{x?lt(Ze,`Not sending because RPC '${t}' stream ${o} is closed:`,H):(S||(lt(Ze,`Opening RPC '${t}' stream ${o} transport.`),w.open(),S=!0),lt(Ze,`RPC '${t}' stream ${o} sending:`,H),w.send(H))},Zo:()=>w.close()}),Y=(H,it,at)=>{H.listen(it,nt=>{try{at(nt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return Y(w,Gl.EventType.OPEN,()=>{x||(lt(Ze,`RPC '${t}' stream ${o} transport opened.`),P.o_())}),Y(w,Gl.EventType.CLOSE,()=>{x||(x=!0,lt(Ze,`RPC '${t}' stream ${o} transport closed`),P.a_(),this.E_(w))}),Y(w,Gl.EventType.ERROR,H=>{x||(x=!0,yo(Ze,`RPC '${t}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),P.a_(new ot($.UNAVAILABLE,"The operation could not be completed")))}),Y(w,Gl.EventType.MESSAGE,H=>{if(!x){const it=H.data[0];Kt(!!it,16349);const at=it,nt=at?.error||at[0]?.error;if(nt){lt(Ze,`RPC '${t}' stream ${o} received error:`,nt);const dt=nt.status;let ht=function(b){const R=we[b];if(R!==void 0)return W0(R)}(dt),pt=nt.message;ht===void 0&&(ht=$.INTERNAL,pt="Unknown error status: "+dt+" with message "+nt.message),x=!0,P.a_(new ot(ht,pt)),w.close()}else lt(Ze,`RPC '${t}' stream ${o} received:`,it),P.u_(it)}}),Y(m,d0.STAT_EVENT,H=>{H.stat===Pm.PROXY?lt(Ze,`RPC '${t}' stream ${o} detected buffering proxy`):H.stat===Pm.NOPROXY&&lt(Ze,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function Em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(r){return new o2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&lt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="PersistentStream";class fA{constructor(t,n,s,o,u,f,m,g){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hA(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{t(()=>{const o=new ot($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lt(BE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(lt(BE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rD extends fA{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=c2(this.serializer,t),s=function(u){if(!("targetChange"in u))return bt.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?bt.min():f.readTime?Ii(f.readTime):bt.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Gm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=jm(g)?{documents:d2(u,g)}:{query:m2(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=tA(u,f.resumeToken);const _=qm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(bt.min())>0){m.readTime=Ih(u,f.snapshotVersion.toTimestamp());const _=qm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const s=g2(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Gm(this.serializer),n.removeTarget=t,this.q_(n)}}class sD extends fA{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=f2(t.writeResults,t.commitTime),s=Ii(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Gm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>h2(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{}class oD extends aD{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(t,Hm(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ot($.UNKNOWN,u.toString())})}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Ho(t,Hm(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ot($.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lr(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class uD{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{da(this)&&(lt(oa,"Restarting streams for network reachability change."),await async function(g){const _=St(g);_.Ea.add(4),await Au(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Xh(_)}(this))})}),this.Ra=new lD(s,o)}}async function Xh(r){if(da(r))for(const t of r.da)await t(!0)}async function Au(r){for(const t of r.da)await t(!1)}function dA(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),xp(n)?Vp(n):No(n).O_()&&Mp(n,t))}function Op(r,t){const n=St(r),s=No(n);n.Ia.delete(t),s.O_()&&mA(n,t),n.Ia.size===0&&(s.O_()?s.L_():da(n)&&n.Ra.set("Unknown"))}function Mp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}No(r).Y_(t)}function mA(r,t){r.Va.Ue(t),No(r).Z_(t)}function Vp(r){r.Va=new i2({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),No(r).start(),r.Ra.ua()}function xp(r){return da(r)&&!No(r).x_()&&r.Ia.size>0}function da(r){return St(r).Ea.size===0}function pA(r){r.Va=void 0}async function cD(r){r.Ra.set("Online")}async function hD(r){r.Ia.forEach((t,n)=>{Mp(r,t)})}async function fD(r,t){pA(r),xp(r)?(r.Ra.ha(t),Vp(r)):r.Ra.set("Unknown")}async function dD(r,t,n){if(r.Ra.set("Online"),t instanceof J0&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))}(r,t)}catch(s){lt(oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Dh(r,s)}else if(t instanceof hh?r.Va.Ze(t):t instanceof Z0?r.Va.st(t):r.Va.tt(t),!n.isEqual(bt.min()))try{const s=await cA(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,_)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Ye.EMPTY_BYTE_STRING,E.snapshotVersion)),mA(u,g);const w=new Xr(E.target,g,_,E.sequenceNumber);Mp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){lt(oa,"Failed to raise snapshot:",s),await Dh(r,s)}}async function Dh(r,t,n){if(!Co(t))throw t;r.Ea.add(1),await Au(r),r.Ra.set("Offline"),n||(n=()=>cA(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{lt(oa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Xh(r)})}function gA(r,t){return t().catch(n=>Dh(r,n,t))}async function $h(r){const t=St(r),n=os(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:_p;for(;mD(t);)try{const o=await X2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,pD(t,o)}catch(o){await Dh(t,o)}_A(t)&&yA(t)}function mD(r){return da(r)&&r.Ta.length<10}function pD(r,t){r.Ta.push(t);const n=os(r);n.O_()&&n.X_&&n.ea(t.mutations)}function _A(r){return da(r)&&!os(r).x_()&&r.Ta.length>0}function yA(r){os(r).start()}async function gD(r){os(r).ra()}async function _D(r){const t=os(r);for(const n of r.Ta)t.ea(n.mutations)}async function yD(r,t,n){const s=r.Ta.shift(),o=Sp.from(s,t,n);await gA(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await $h(r)}async function vD(r,t){t&&os(r).X_&&await async function(s,o){if(function(f){return t2(f)&&f!==$.ABORTED}(o.code)){const u=s.Ta.shift();os(s).B_(),await gA(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await $h(s)}}(r,t),_A(r)&&yA(r)}async function jE(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),lt(oa,"RemoteStore received new credentials");const s=da(n);n.Ea.add(3),await Au(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Xh(n)}async function ED(r,t){const n=St(r);t?(n.Ea.delete(2),await Xh(n)):t||(n.Ea.add(2),await Au(n),n.Ra.set("Unknown"))}function No(r){return r.ma||(r.ma=function(n,s,o){const u=St(n);return u.sa(),new rD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:cD.bind(null,r),t_:hD.bind(null,r),r_:fD.bind(null,r),H_:dD.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),xp(r)?Vp(r):r.Ra.set("Unknown")):(await r.ma.stop(),pA(r))})),r.ma}function os(r){return r.fa||(r.fa=function(n,s,o){const u=St(n);return u.sa(),new sD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:gD.bind(null,r),r_:vD.bind(null,r),ta:_D.bind(null,r),na:yD.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await $h(r)):(await r.fa.stop(),r.Ta.length>0&&(lt(oa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,m=new Pp(t,n,f,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(r,t){if(lr("AsyncQueue",`${t}: ${r}`),Co(r))return new ot($.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{static emptySet(t){return new go(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||gt.comparator(n.key,s.key):(n,s)=>gt.comparator(n.key,s.key),this.keyedMap=Kl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof go)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new go;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.ga=new ue(gt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Tt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class So{constructor(t,n,s,o,u,f,m,g,_){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new So(t,n,go.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class AD{constructor(){this.queries=qE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=St(n),u=o.queries;o.queries=qE(),u.forEach((f,m)=>{for(const g of m.Sa)g.onError(s)})})(this,new ot($.ABORTED,"Firestore shutting down"))}}function qE(){return new fa(r=>k0(r),Hh)}async function vA(r,t){const n=St(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new TD,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Up(f,`Initialization of query '${lo(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&kp(n)}async function EA(r,t){const n=St(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function bD(r,t){const n=St(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&kp(n)}function SD(r,t,n){const s=St(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function kp(r){r.Ca.forEach(t=>{t.next()})}var Ym,HE;(HE=Ym||(Ym={})).Ma="default",HE.Cache="cache";class TA{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new So(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=So.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.key=t}}class bA{constructor(t){this.key=t}}class wD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=L0(t),this.tu=new go(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new zE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,w)=>{const S=o.get(E),x=Fh(this.query,w)?w:null,P=!!S&&this.mutatedKeys.has(S.key),Y=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;S&&x?S.data.isEqual(x.data)?P!==Y&&(s.track({type:3,doc:x}),H=!0):this.su(S,x)||(s.track({type:2,doc:x}),H=!0,(g&&this.eu(x,g)>0||_&&this.eu(x,_)<0)&&(m=!0)):!S&&x?(s.track({type:0,doc:x}),H=!0):S&&!x&&(s.track({type:1,doc:S}),H=!0,(g||_)&&(m=!0)),H&&(x?(f=f.add(x),u=Y?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort((E,w)=>function(x,P){const Y=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tt(20277,{Rt:H})}};return Y(x)-Y(P)}(E.type,w.type)||this.eu(E.doc,w.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,f.length!==0||_?{snapshot:new So(this.query,t.tu,u,f,t.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new bA(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new AA(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=Pt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return So.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lp="SyncEngine";class RD{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class ID{constructor(t){this.key=t,this.hu=!1}}class CD{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new fa(m=>k0(m),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(gt.comparator),this.Au=new Map,this.Ru=new Ip,this.Vu={},this.mu=new Map,this.fu=bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DD(r,t,n=!0){const s=DA(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await SA(s,t,n,!0),o}async function ND(r,t){const n=DA(r);await SA(n,t,!0,!1)}async function SA(r,t,n,s){const o=await $2(r.localStore,Ri(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await OD(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&dA(r.remoteStore,o),m}async function OD(r,t,n,s,o){r.pu=(w,S,x)=>async function(Y,H,it,at){let nt=H.view.ru(it);nt.Cs&&(nt=await PE(Y.localStore,H.query,!1).then(({documents:N})=>H.view.ru(N,nt)));const dt=at&&at.targetChanges.get(H.targetId),ht=at&&at.targetMismatches.get(H.targetId)!=null,pt=H.view.applyChanges(nt,Y.isPrimaryClient,dt,ht);return GE(Y,H.targetId,pt.au),pt.snapshot}(r,w,S,x);const u=await PE(r.localStore,t,!0),f=new wD(t,u.Qs),m=f.ru(u.documents),g=Tu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(m,r.isPrimaryClient,g);GE(r,n,_.au);const E=new RD(t,n,f);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),_.snapshot}async function MD(r,t,n){const s=St(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(f=>!Hh(f,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Km(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Op(s.remoteStore,o.targetId),Xm(s,o.targetId)}).catch(Io)):(Xm(s,o.targetId),await Km(s.localStore,o.targetId,!0))}async function VD(r,t){const n=St(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Op(n.remoteStore,s.targetId))}async function xD(r,t,n){const s=zD(r);try{const o=await function(f,m){const g=St(f),_=re.now(),E=m.reduce((x,P)=>x.add(P.key),Pt());let w,S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>{let P=ur(),Y=Pt();return g.Ns.getEntries(x,E).next(H=>{P=H,P.forEach((it,at)=>{at.isValidDocument()||(Y=Y.add(it))})}).next(()=>g.localDocuments.getOverlayedDocuments(x,P)).next(H=>{w=H;const it=[];for(const at of m){const nt=XC(at,w.get(at.key).overlayedDocument);nt!=null&&it.push(new ds(at.key,nt,D0(nt.value.mapValue),ti.exists(!0)))}return g.mutationQueue.addMutationBatch(x,_,it,m)}).next(H=>{S=H;const it=H.applyToLocalDocumentSet(w,Y);return g.documentOverlayCache.saveOverlays(x,H.batchId,it)})}).then(()=>({batchId:S.batchId,changes:j0(w)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let _=f.Vu[f.currentUser.toKey()];_||(_=new ue(xt)),_=_.insert(m,g),f.Vu[f.currentUser.toKey()]=_}(s,o.batchId,n),await bu(s,o.changes),await $h(s.remoteStore)}catch(o){const u=Up(o,"Failed to persist write");n.reject(u)}}async function wA(r,t){const n=St(r);try{const s=await Q2(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Kt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Kt(f.hu,14607):o.removedDocuments.size>0&&(Kt(f.hu,42227),f.hu=!1))}),await bu(n,s,t)}catch(s){await Io(s)}}function FE(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((u,f)=>{const m=f.view.va(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=St(f);g.onlineState=m;let _=!1;g.queries.forEach((E,w)=>{for(const S of w.Sa)S.va(m)&&(_=!0)}),_&&kp(g)}(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function PD(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let f=new ue(gt.comparator);f=f.insert(u,tn.newNoDocument(u,bt.min()));const m=Pt().add(u),g=new Qh(bt.min(),new Map,new ue(xt),f,m);await wA(s,g),s.du=s.du.remove(u),s.Au.delete(t),Bp(s)}else await Km(s.localStore,t,!1).then(()=>Xm(s,t,n)).catch(Io)}async function UD(r,t){const n=St(r),s=t.batch.batchId;try{const o=await K2(n.localStore,t);IA(n,s,null),RA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bu(n,o)}catch(o){await Io(o)}}async function kD(r,t,n){const s=St(r);try{const o=await function(f,m){const g=St(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(w=>(Kt(w!==null,37113),E=w.keys(),g.mutationQueue.removeMutationBatch(_,w))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(s.localStore,t);IA(s,t,n),RA(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await bu(s,o)}catch(o){await Io(o)}}function RA(r,t){(r.mu.get(t)||[]).forEach(n=>{n.resolve()}),r.mu.delete(t)}function IA(r,t,n){const s=St(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function Xm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||CA(r,s)})}function CA(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(Op(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Bp(r))}function GE(r,t,n){for(const s of n)s instanceof AA?(r.Ru.addReference(s.key,t),LD(r,s)):s instanceof bA?(lt(Lp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||CA(r,s.key)):Tt(19791,{wu:s})}function LD(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(lt(Lp,"New document in limbo: "+n),r.Eu.add(s),Bp(r))}function Bp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new gt(ie.fromString(t)),s=r.fu.next();r.Au.set(s,new ID(n)),r.du=r.du.insert(n,s),dA(r.remoteStore,new Xr(Ri(Ap(n.path)),s,"TargetPurposeLimboResolution",jh.ce))}}async function bu(r,t,n){const s=St(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((m,g)=>{f.push(s.pu(g,t,n).then(_=>{if((_||n)&&s.isPrimaryClient){const E=_?!_.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(_){o.push(_);const E=Dp.As(g.targetId,_);u.push(E)}}))}),await Promise.all(f),s.Pu.H_(o),await async function(g,_){const E=St(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>J.forEach(_,S=>J.forEach(S.Es,x=>E.persistence.referenceDelegate.addReference(w,S.targetId,x)).next(()=>J.forEach(S.ds,x=>E.persistence.referenceDelegate.removeReference(w,S.targetId,x)))))}catch(w){if(!Co(w))throw w;lt(Np,"Failed to update sequence numbers: "+w)}for(const w of _){const S=w.targetId;if(!w.fromCache){const x=E.Ms.get(S),P=x.snapshotVersion,Y=x.withLastLimboFreeSnapshotVersion(P);E.Ms=E.Ms.insert(S,Y)}}}(s.localStore,u))}async function BD(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){lt(Lp,"User change. New user:",t.toKey());const s=await uA(n.localStore,t);n.currentUser=t,function(u,f){u.mu.forEach(m=>{m.forEach(g=>{g.reject(new ot($.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await bu(n,s.Ls)}}function jD(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Pt().add(s.key);{let o=Pt();const u=n.Iu.get(t);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function DA(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=wA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jD.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PD.bind(null,t),t.Pu.H_=bD.bind(null,t.eventManager),t.Pu.yu=SD.bind(null,t.eventManager),t}function zD(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,t),t}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Yh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return G2(this.persistence,new q2,t.initialUser,this.serializer)}Cu(t){return new lA(Cp.mi,this.serializer)}Du(t){return new Z2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class qD extends Nh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Kt(this.persistence.referenceDelegate instanceof Ch,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new I2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new lA(s=>Ch.mi(s,n),this.serializer)}}class $m{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>FE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BD.bind(null,this.syncEngine),await ED(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new AD}()}createDatastore(t){const n=Yh(t.databaseInfo.databaseId),s=function(u){return new iD(u)}(t.databaseInfo);return function(u,f,m,g){return new oD(u,f,m,g)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,o,u,f,m){return new uD(s,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>FE(this.syncEngine,n,0),function(){return LE.v()?new LE:new J2}())}createSyncEngine(t,n){return function(o,u,f,m,g,_,E){const w=new CD(o,u,f,m,g,_);return E&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=St(n);lt(oa,"RemoteStore shutting down."),s.Ea.add(5),await Au(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$m.provider={build:()=>new $m};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):lr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="FirestoreClient";class HD{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Je.UNAUTHENTICATED,this.clientId=gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{lt(ls,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(lt(ls,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Up(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Tm(r,t){r.asyncQueue.verifyOperationInProgress(),lt(ls,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await uA(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function KE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await FD(r);lt(ls,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>jE(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>jE(t.remoteStore,o)),r._onlineComponents=t}async function FD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){lt(ls,"Using user provided OfflineComponentProvider");try{await Tm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;yo("Error using user provided cache. Falling back to memory cache: "+n),await Tm(r,new Nh)}}else lt(ls,"Using default OfflineComponentProvider"),await Tm(r,new qD(void 0));return r._offlineComponents}async function OA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(lt(ls,"Using user provided OnlineComponentProvider"),await KE(r,r._uninitializedComponentsProvider._online)):(lt(ls,"Using default OnlineComponentProvider"),await KE(r,new $m))),r._onlineComponents}function GD(r){return OA(r).then(t=>t.syncEngine)}async function Wm(r){const t=await OA(r),n=t.eventManager;return n.onListen=DD.bind(null,t.syncEngine),n.onUnlisten=MD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ND.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=VD.bind(null,t.syncEngine),n}function KD(r,t,n={}){const s=new Jr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,_){const E=new NA({next:S=>{E.Nu(),f.enqueueAndForget(()=>EA(u,w)),S.fromCache&&g.source==="server"?_.reject(new ot($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),w=new TA(m,E,{includeMetadataChanges:!0,qa:!0});return vA(u,w)}(await Wm(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firestore.googleapis.com",YE=!0;class XE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VA,this.ssl=YE}else this.host=t.host,this.ssl=t.ssl??YE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=oA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<w2)throw new ot($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}uC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MA(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wh{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new JI;switch(s.type){case"firstParty":return new iC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ot($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=QE.get(n);s&&(lt("ComponentProvider","Removing Datastore"),QE.delete(n),s.terminate())}(this),Promise.resolve()}}function QD(r,t,n,s={}){r=Jn(r,Wh);const o=cs(t),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;o&&(np(`https://${m}`),ip("Firestore",!0)),u.host!==VA&&u.host!==m&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!es(g,f)&&(r._setSettings(g),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=Je.MOCK_USER;else{_=bT(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ot($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Je(w)}r._authCredentials=new tC(new _0(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new hr(this.firestore,t,this._query)}}class Ee{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ee(this.firestore,t,this._key)}toJSON(){return{type:Ee._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(vu(n,Ee._jsonSchema))return new Ee(t,s||null,new gt(ie.fromString(n.referencePath)))}}Ee._jsonSchemaVersion="firestore/documentReference/1.0",Ee._jsonSchema={type:Ie("string",Ee._jsonSchemaVersion),referencePath:Ie("string")};class ts extends hr{constructor(t,n,s){super(t,n,Ap(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ee(this.firestore,null,new gt(t))}withConverter(t){return new ts(this.firestore,t,this._path)}}function Qr(r,t,...n){if(r=oe(r),y0("collection","path",t),r instanceof Wh){const s=ie.fromString(t,...n);return lE(s),new ts(r,null,s)}{if(!(r instanceof Ee||r instanceof ts))throw new ot($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ie.fromString(t,...n));return lE(s),new ts(r.firestore,null,s)}}function Oo(r,t,...n){if(r=oe(r),arguments.length===1&&(t=gp.newId()),y0("doc","path",t),r instanceof Wh){const s=ie.fromString(t,...n);return oE(s),new Ee(r,null,new gt(s))}{if(!(r instanceof Ee||r instanceof ts))throw new ot($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ie.fromString(t,...n));return oE(s),new Ee(r.firestore,r instanceof ts?r.converter:null,new gt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="AsyncQueue";class WE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hA(this,"async_queue_retry"),this._c=()=>{const s=Em();s&&lt($E,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Em();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Em();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Co(t))throw t;lt($E,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,lr("INTERNAL UNHANDLED ERROR: ",ZE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Pp.createAndSchedule(this,t,n,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Tt(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function ZE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class la extends Wh{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new WE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new WE(t),this._firestoreClient=void 0,await t}}}function xA(r,t){const n=typeof r=="object"?r:ap(),s=typeof r=="string"?r:Ah,o=Ph(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=ET("firestore");u&&QD(o,...u)}return o}function jp(r){if(r._terminated)throw new ot($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||YD(r),r._firestoreClient}function YD(r){const t=r._freezeSettings(),n=function(o,u,f,m){return new EC(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,MA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new HD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new qn(Ye.fromBase64String(t))}catch(n){throw new ot($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new qn(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(vu(t,qn._jsonSchema))return qn.fromBase64String(t.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ie("string",qn._jsonSchemaVersion),bytes:Ie("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ot($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ot($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ot($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(t){if(vu(t,Ci._jsonSchema))return new Ci(t.latitude,t.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:Ie("string",Ci._jsonSchemaVersion),latitude:Ie("number"),longitude:Ie("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(vu(t,Di._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Di(t.vectorValues);throw new ot($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:Ie("string",Di._jsonSchemaVersion),vectorValues:Ie("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=/^__.*__$/;class $D{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new ds(t,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(t,this.data,n,this.fieldTransforms)}}class PA{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new ds(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function UA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tt(40011,{Ac:r})}}class Jh{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Jh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Oh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(UA(this.Ac)&&XD.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class WD{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Yh(t)}Cc(t,n,s,o=!1){return new Jh({Ac:t,methodName:n,Dc:s,path:Qe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(r){const t=r._freezeSettings(),n=Yh(r._databaseId);return new WD(r._databaseId,!!t.ignoreUndefinedProperties,n)}function kA(r,t,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);Hp("Data must be an object, but it was:",f,s);const m=LA(s,f);let g,_;if(u.merge)g=new Rn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const S=Zm(t,w,n);if(!f.contains(S))throw new ot($.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);jA(E,S)||E.push(S)}g=new Rn(E),_=f.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,_=f.fieldTransforms;return new $D(new dn(m),g,_)}class ef extends Su{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ef}}function ZD(r,t,n){return new Jh({Ac:3,Dc:t.settings.Dc,methodName:r._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class zp extends Su{_toFieldTransform(t){return new Q0(t.path,new hu)}isEqual(t){return t instanceof zp}}class qp extends Su{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=ZD(this,t,!0),s=this.vc.map(u=>Mo(u,n)),o=new Ao(s);return new Q0(t.path,o)}isEqual(t){return t instanceof qp&&es(this.vc,t.vc)}}function JD(r,t,n,s){const o=r.Cc(1,t,n);Hp("Data must be an object, but it was:",o,s);const u=[],f=dn.empty();fs(s,(g,_)=>{const E=Fp(t,g,n);_=oe(_);const w=o.yc(E);if(_ instanceof ef)u.push(E);else{const S=Mo(_,w);S!=null&&(u.push(E),f.set(E,S))}});const m=new Rn(u);return new PA(f,m,o.fieldTransforms)}function tN(r,t,n,s,o,u){const f=r.Cc(1,t,n),m=[Zm(t,s,n)],g=[o];if(u.length%2!=0)throw new ot($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(Zm(t,u[S])),g.push(u[S+1]);const _=[],E=dn.empty();for(let S=m.length-1;S>=0;--S)if(!jA(_,m[S])){const x=m[S];let P=g[S];P=oe(P);const Y=f.yc(x);if(P instanceof ef)_.push(x);else{const H=Mo(P,Y);H!=null&&(_.push(x),E.set(x,H))}}const w=new Rn(_);return new PA(E,w,f.fieldTransforms)}function eN(r,t,n,s=!1){return Mo(n,r.Cc(s?4:3,t))}function Mo(r,t){if(BA(r=oe(r)))return Hp("Unsupported field value:",t,r),LA(r,t);if(r instanceof Su)return function(s,o){if(!UA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let g=Mo(m,o.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(r,t)}return function(s,o){if((s=oe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=re.fromDate(s);return{timestampValue:Ih(o.serializer,u)}}if(s instanceof re){const u=new re(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ih(o.serializer,u)}}if(s instanceof Ci)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qn)return{bytesValue:tA(o.serializer,s._byteString)};if(s instanceof Ee){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Di)return function(f,m){return{mapValue:{fields:{[I0]:{stringValue:C0},[bh]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return bp(m.serializer,_)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${Bh(s)}`)}(r,t)}function LA(r,t){const n={};return T0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fs(r,(s,o)=>{const u=Mo(o,t.mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function BA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof re||r instanceof Ci||r instanceof qn||r instanceof Ee||r instanceof Su||r instanceof Di)}function Hp(r,t,n){if(!BA(n)||!v0(n)){const s=Bh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Zm(r,t,n){if((t=oe(t))instanceof Zh)return t._internalPath;if(typeof t=="string")return Fp(r,t);throw Oh("Field path arguments must be of type string or ",r,!1,void 0,n)}const nN=new RegExp("[~\\*/\\[\\]]");function Fp(r,t,n){if(t.search(nN)>=0)throw Oh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Zh(...t.split("."))._internalPath}catch{throw Oh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Oh(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new ot($.INVALID_ARGUMENT,m+r+g)}function jA(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(nf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iN extends zA{data(){return super.data()}}function nf(r,t){return typeof t=="string"?Fp(r,t):t instanceof Zh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ot($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class Kp extends Gp{}function Yl(r,t,...n){let s=[];t instanceof Gp&&s.push(t),s=s.concat(n),function(u){const f=u.filter(g=>g instanceof Qp).length,m=u.filter(g=>g instanceof rf).length;if(f>1||f>0&&m>0)throw new ot($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class rf extends Kp{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new rf(t,n,s)}_apply(t){const n=this._parse(t);return FA(t._query,n),new hr(t.firestore,t.converter,zm(t._query,n))}_parse(t){const n=tf(t.firestore);return function(u,f,m,g,_,E,w){let S;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ot($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){eT(w,E);const P=[];for(const Y of w)P.push(tT(g,u,Y));S={arrayValue:{values:P}}}else S=tT(g,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||eT(w,E),S=eN(m,f,w,E==="in"||E==="not-in");return Re.create(_,E,S)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Am(r,t,n){const s=t,o=nf("where",r);return rf._create(o,s,n)}class Qp extends Gp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Qp(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ni.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)FA(f,g),f=zm(f,g)}(t._query,n),new hr(t.firestore,t.converter,zm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends Kp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Yp(t,n)}_apply(t){const n=function(o,u,f){if(o.startAt!==null)throw new ot($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ot($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cu(u,f)}(t._query,this._field,this._direction);return new hr(t.firestore,t.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new Do(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function HA(r,t="asc"){const n=t,s=nf("orderBy",r);return Yp._create(s,n)}class Xp extends Kp{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new Xp(t,n,s)}_apply(t){return new hr(t.firestore,t.converter,wh(t._query,this._limit,this._limitType))}}function rN(r){return Xp._create("limit",r,"F")}function tT(r,t,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new ot($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U0(t)&&n.indexOf("/")!==-1)throw new ot($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ie.fromString(n));if(!gt.isDocumentKey(s))throw new ot($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return gE(r,new gt(s))}if(n instanceof Ee)return gE(r,n._key);throw new ot($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(n)}.`)}function eT(r,t){if(!Array.isArray(r)||r.length===0)throw new ot($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FA(r,t){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ot($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ot($.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class sN{convertValue(t,n="none"){switch(as(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ss(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return fs(t,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(t){const n=t.fields?.[bh].arrayValue?.values?.map(s=>ve(s.doubleValue));return new Di(n)}convertGeoPoint(t){return new Ci(ve(t.latitude),ve(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=qh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ou(t));default:return null}}convertTimestamp(t){const n=rs(t);return new re(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ie.fromString(t);Kt(aA(s),9688,{name:t});const o=new lu(s.get(1),s.get(3)),u=new gt(s.popFirst(5));return o.isEqual(n)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class Xl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ta extends zA{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(nf("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=ta._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",ta._jsonSchema={type:Ie("string",ta._jsonSchemaVersion),bundleSource:Ie("string","DocumentSnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class fh extends ta{data(t={}){return super.data(t)}}class ea{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new Xl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new fh(this._firestore,this._userDataWriter,s.key,s,new Xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new fh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Xl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:aN(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ea._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function aN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tt(61501,{type:r})}}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:Ie("string",ea._jsonSchemaVersion),bundleSource:Ie("string","QuerySnapshot"),bundleName:Ie("string"),bundle:Ie("string")};class $p extends sN{constructor(t){super(),this.firestore=t}convertBytes(t){return new qn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ee(this.firestore,null,n)}}function nT(r){r=Jn(r,hr);const t=Jn(r.firestore,la),n=jp(t),s=new $p(t);return qA(r._query),KD(n,r._query).then(o=>new ea(t,s,r,o))}function Wp(r,t,n){r=Jn(r,Ee);const s=Jn(r.firestore,la),o=GA(r.converter,t,n);return Zp(s,[kA(tf(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,ti.none())])}function oN(r,t,n,...s){r=Jn(r,Ee);const o=Jn(r.firestore,la),u=tf(o);let f;return f=typeof(t=oe(t))=="string"||t instanceof Zh?tN(u,"updateDoc",r._key,t,n,s):JD(u,"updateDoc",r._key,t),Zp(o,[f.toMutation(r._key,ti.exists(!0))])}function KA(r,t){const n=Jn(r.firestore,la),s=Oo(r),o=GA(r.converter,t);return Zp(n,[kA(tf(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,ti.exists(!1))]).then(()=>s)}function nu(r,...t){r=oe(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||JE(t[s])||(n=t[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(JE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let u,f,m;if(r instanceof Ee)f=Jn(r.firestore,la),m=Ap(r._key.path),u={next:g=>{t[s]&&t[s](lN(f,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Jn(r,hr);f=Jn(g.firestore,la),m=g._query;const _=new $p(f);u={next:E=>{t[s]&&t[s](new ea(f,_,g,E))},error:t[s+1],complete:t[s+2]},qA(r._query)}return function(_,E,w,S){const x=new NA(S),P=new TA(E,x,w);return _.asyncQueue.enqueueAndForget(async()=>vA(await Wm(_),P)),()=>{x.Nu(),_.asyncQueue.enqueueAndForget(async()=>EA(await Wm(_),P))}}(jp(f),m,o,u)}function Zp(r,t){return function(s,o){const u=new Jr;return s.asyncQueue.enqueueAndForget(async()=>xD(await GD(s),o,u)),u.promise}(jp(r),t)}function lN(r,t,n){const s=n.docs.get(t._key),o=new $p(r);return new ta(r,o,t._key,s,new Xl(n.hasPendingWrites,n.fromCache),t.converter)}function QA(){return new zp("serverTimestamp")}function uN(...r){return new qp("arrayUnion",r)}(function(t,n=!0){(function(o){Ro=o})(ca),ia(new ns("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new la(new eC(s.getProvider("auth-internal")),new rC(f,s.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ot($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(_.options.projectId,E)}(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),bi(iE,rE,t),bi(iE,rE,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebasestorage.googleapis.com",XA="storageBucket",cN=120*1e3,hN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe extends Oi{constructor(t,n,s=0){super(bm(t),`Firebase Storage: ${n} (${bm(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pe.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return bm(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var me;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(me||(me={}));function bm(r){return"storage/"+r}function Jp(){const r="An unknown error occurred, please check the error payload for server response.";return new pe(me.UNKNOWN,r)}function fN(r){return new pe(me.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function dN(r){return new pe(me.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mN(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pe(me.UNAUTHENTICATED,r)}function pN(){return new pe(me.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gN(r){return new pe(me.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function _N(){return new pe(me.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yN(){return new pe(me.CANCELED,"User canceled the upload/download.")}function vN(r){return new pe(me.INVALID_URL,"Invalid URL '"+r+"'.")}function EN(r){return new pe(me.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function TN(){return new pe(me.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XA+"' property when initializing the app?")}function AN(){return new pe(me.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bN(){return new pe(me.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SN(r){return new pe(me.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jm(r){return new pe(me.INVALID_ARGUMENT,r)}function $A(){return new pe(me.APP_DELETED,"The Firebase app was deleted.")}function wN(r){return new pe(me.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(r,t){return new pe(me.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function zl(r){throw new pe(me.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=In.makeFromUrl(t,n)}catch{return new In(t,"")}if(s.path==="")return s;throw EN(t)}static makeFromUrl(t,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(dt){dt.path.charAt(dt.path.length-1)==="/"&&(dt.path_=dt.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function _(dt){dt.path_=decodeURIComponent(dt.path)}const E="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",x=new RegExp(`^https?://${w}/${E}/b/${o}/o${S}`,"i"),P={bucket:1,path:3},Y=n===YA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,H="([^?#]*)",it=new RegExp(`^https?://${Y}/${o}/${H}`,"i"),nt=[{regex:m,indices:g,postModify:u},{regex:x,indices:P,postModify:_},{regex:it,indices:{bucket:1,path:2},postModify:_}];for(let dt=0;dt<nt.length;dt++){const ht=nt[dt],pt=ht.regex.exec(t);if(pt){const N=pt[ht.indices.bucket];let b=pt[ht.indices.path];b||(b=""),s=new In(N,b),ht.postModify(s);break}}if(s==null)throw vN(t);return s}}class RN{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(r,t,n){let s=1,o=null,u=null,f=!1,m=0;function g(){return m===2}let _=!1;function E(...H){_||(_=!0,t.apply(null,H))}function w(H){o=setTimeout(()=>{o=null,r(x,g())},H)}function S(){u&&clearTimeout(u)}function x(H,...it){if(_){S();return}if(H){S(),E.call(null,H,...it);return}if(g()||f){S(),E.call(null,H,...it);return}s<64&&(s*=2);let nt;m===1?(m=2,nt=0):nt=(s+Math.random())*1e3,w(nt)}let P=!1;function Y(H){P||(P=!0,S(),!_&&(o!==null?(H||(m=2),clearTimeout(o),w(0)):H||(m=1)))}return w(0),u=setTimeout(()=>{f=!0,Y(!0)},n),Y}function CN(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(r){return r!==void 0}function NN(r){return typeof r=="object"&&!Array.isArray(r)}function tg(r){return typeof r=="string"||r instanceof String}function iT(r){return eg()&&r instanceof Blob}function eg(){return typeof Blob<"u"}function rT(r,t,n,s){if(s<t)throw Jm(`Invalid value for '${r}'. Expected ${t} or greater.`);if(s>n)throw Jm(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r,t,n){let s=t;return n==null&&(s=`https://${t}`),`${n}://${s}/v0${r}`}function WA(r){const t=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=t(s)+"="+t(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var na;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(na||(na={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(r,t){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=t.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(t,n,s,o,u,f,m,g,_,E,w,S=!0,x=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=w,this.retry=S,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,Y)=>{this.resolve_=P,this.reject_=Y,this.start_()})}start_(){const t=(s,o)=>{if(o){s(!1,new th(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const g=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===na.NO_ERROR,g=u.getStatus();if(!m||ON(g,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===na.ABORT;s(!1,new th(!1,null,E));return}const _=this.successCodes_.indexOf(g)!==-1;s(!0,new th(_,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());DN(g)?u(g):u()}catch(g){f(g)}else if(m!==null){const g=Jp();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?$A():yN();f(g)}else{const g=_N();f(g)}};this.canceled_?n(!1,new th(!1,null,!0)):this.backoffId_=IN(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&CN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class th{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function VN(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function xN(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function PN(r,t){t&&(r["X-Firebase-GMPID"]=t)}function UN(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function kN(r,t,n,s,o,u,f=!0,m=!1){const g=WA(r.urlParams),_=r.url+g,E=Object.assign({},r.headers);return PN(E,t),VN(E,n),xN(E,u),UN(E,s),new MN(_,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BN(...r){const t=LN();if(t!==void 0){const n=new t;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(eg())return new Blob(r);throw new pe(me.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jN(r,t,n){return r.webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(r){if(typeof atob>"u")throw SN("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sm{constructor(t,n){this.data=t,this.contentType=n||null}}function qN(r,t){switch(r){case Ai.RAW:return new Sm(ZA(t));case Ai.BASE64:case Ai.BASE64URL:return new Sm(JA(r,t));case Ai.DATA_URL:return new Sm(FN(t),GN(t))}throw Jp()}function ZA(r){const t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function HN(r){let t;try{t=decodeURIComponent(r)}catch{throw iu(Ai.DATA_URL,"Malformed data URL.")}return ZA(t)}function JA(r,t){switch(r){case Ai.BASE64:{const o=t.indexOf("-")!==-1,u=t.indexOf("_")!==-1;if(o||u)throw iu(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const o=t.indexOf("+")!==-1,u=t.indexOf("/")!==-1;if(o||u)throw iu(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zN(t)}catch(o){throw o.message.includes("polyfill")?o:iu(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class tb{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw iu(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=KN(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function FN(r){const t=new tb(r);return t.base64?JA(Ai.BASE64,t.rest):HN(t.rest)}function GN(r){return new tb(r).contentType}function KN(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n){let s=0,o="";iT(t)?(this.data_=t,s=t.size,o=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(t,n){if(iT(this.data_)){const s=this.data_,o=jN(s,t,n);return o===null?null:new Yr(o)}else{const s=new Uint8Array(this.data_.buffer,t,n-t);return new Yr(s,!0)}}static getBlob(...t){if(eg()){const n=t.map(s=>s instanceof Yr?s.data_:s);return new Yr(BN.apply(null,n))}else{const n=t.map(f=>tg(f)?qN(Ai.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new Yr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(r){let t;try{t=JSON.parse(r)}catch{return null}return NN(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function YN(r,t){const n=t.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function nb(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(r,t){return t}class on{constructor(t,n,s,o){this.server=t,this.local=n||t,this.writable=!!s,this.xform=o||XN}}let eh=null;function $N(r){return!tg(r)||r.length<2?r:nb(r)}function ib(){if(eh)return eh;const r=[];r.push(new on("bucket")),r.push(new on("generation")),r.push(new on("metageneration")),r.push(new on("name","fullPath",!0));function t(u,f){return $N(f)}const n=new on("name");n.xform=t,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new on("size");return o.xform=s,r.push(o),r.push(new on("timeCreated")),r.push(new on("updated")),r.push(new on("md5Hash",null,!0)),r.push(new on("cacheControl",null,!0)),r.push(new on("contentDisposition",null,!0)),r.push(new on("contentEncoding",null,!0)),r.push(new on("contentLanguage",null,!0)),r.push(new on("contentType",null,!0)),r.push(new on("metadata","customMetadata",!0)),eh=r,eh}function WN(r,t){function n(){const s=r.bucket,o=r.fullPath,u=new In(s,o);return t._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function ZN(r,t,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,t[f.server])}return WN(s,r),s}function rb(r,t,n){const s=eb(t);return s===null?null:ZN(r,s,n)}function JN(r,t,n,s){const o=eb(t);if(o===null||!tg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(_=>{const E=r.bucket,w=r.fullPath,S="/b/"+f(E)+"/o/"+f(w),x=ng(S,n,s),P=WA({alt:"media",token:_});return x+P})[0]}function tO(r,t){const n={},s=t.length;for(let o=0;o<s;o++){const u=t[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class sb{constructor(t,n,s,o){this.url=t,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(r){if(!r)throw Jp()}function eO(r,t){function n(s,o){const u=rb(r,o,t);return ab(u!==null),u}return n}function nO(r,t){function n(s,o){const u=rb(r,o,t);return ab(u!==null),JN(u,o,r.host,r._protocol)}return n}function ob(r){function t(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=pN():o=mN():n.getStatus()===402?o=dN(r.bucket):n.getStatus()===403?o=gN(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return t}function iO(r){const t=ob(r);function n(s,o){let u=t(s,o);return s.getStatus()===404&&(u=fN(r.path)),u.serverResponse=o.serverResponse,u}return n}function rO(r,t,n){const s=t.fullServerUrl(),o=ng(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new sb(o,u,nO(r,n),f);return m.errorHandler=iO(t),m}function sO(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function aO(r,t,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=t.size(),s.contentType||(s.contentType=sO(null,t)),s}function oO(r,t,n,s,o){const u=t.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let nt="";for(let dt=0;dt<2;dt++)nt=nt+Math.random().toString().slice(2);return nt}const g=m();f["Content-Type"]="multipart/related; boundary="+g;const _=aO(t,s,o),E=tO(_,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,S=`\r
--`+g+"--",x=Yr.getBlob(w,s,S);if(x===null)throw AN();const P={name:_.fullPath},Y=ng(u,r.host,r._protocol),H="POST",it=r.maxUploadRetryTime,at=new sb(Y,H,eO(r,n),it);return at.urlParams=P,at.headers=f,at.body=x.uploadData(),at.errorHandler=ob(t),at}class lO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=na.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=na.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=na.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,s,o,u){if(this.sent_)throw zl("cannot .send() more than once");if(cs(t)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class uO extends lO{initXhr(){this.xhr_.responseType="text"}}function lb(){return new uO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n){this._service=t,n instanceof In?this._location=n:this._location=In.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ua(t,n)}get root(){const t=new In(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return nb(this._location.path)}get storage(){return this._service}get parent(){const t=QN(this._location.path);if(t===null)return null;const n=new In(this._location.bucket,t);return new ua(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw wN(t)}}function cO(r,t,n){r._throwIfRoot("uploadBytes");const s=oO(r.storage,r._location,ib(),new Yr(t,!0),n);return r.storage.makeRequestWithTokens(s,lb).then(o=>({metadata:o,ref:r}))}function hO(r){r._throwIfRoot("getDownloadURL");const t=rO(r.storage,r._location,ib());return r.storage.makeRequestWithTokens(t,lb).then(n=>{if(n===null)throw bN();return n})}function fO(r,t){const n=YN(r._location.path,t),s=new In(r._location.bucket,n);return new ua(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(r){return/^[A-Za-z]+:\/\//.test(r)}function mO(r,t){return new ua(r,t)}function ub(r,t){if(r instanceof ig){const n=r;if(n._bucket==null)throw TN();const s=new ua(n,n._bucket);return t!=null?ub(s,t):s}else return t!==void 0?fO(r,t):r}function pO(r,t){if(t&&dO(t)){if(r instanceof ig)return mO(r,t);throw Jm("To use ref(service, url), the first argument must be a Storage instance.")}else return ub(r,t)}function sT(r,t){const n=t?.[XA];return n==null?null:In.makeFromBucketSpec(n,r)}function gO(r,t,n,s={}){r.host=`${t}:${n}`;const o=cs(t);o&&(np(`https://${r.host}/b`),ip("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:bT(u,r.app.options.projectId))}class ig{constructor(t,n,s,o,u,f=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=YA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cN,this._maxUploadRetryTime=hN,this._requests=new Set,o!=null?this._bucket=In.makeFromBucketSpec(o,this._host):this._bucket=sT(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=In.makeFromBucketSpec(this._url,t):this._bucket=sT(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){rT("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){rT("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ua(this,t)}_makeRequest(t,n,s,o,u=!0){if(this._deleted)return new RN($A());{const f=kN(t,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(t,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,o).getPromise()}}const aT="@firebase/storage",oT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="storage";function hb(r,t,n){return r=oe(r),cO(r,t,n)}function fb(r){return r=oe(r),hO(r)}function db(r,t){return r=oe(r),pO(r,t)}function mb(r=ap(),t){r=oe(r);const s=Ph(r,cb).getImmediate({identifier:t}),o=ET("storage");return o&&_O(s,...o),s}function _O(r,t,n,s={}){gO(r,t,n,s)}function yO(r,{instanceIdentifier:t}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new ig(n,s,o,t,ca)}function vO(){ia(new ns(cb,yO,"PUBLIC").setMultipleInstances(!0)),bi(aT,oT,""),bi(aT,oT,"esm2020")}vO();const EO={apiKey:"AIzaSyDzh5kW3O-5CoummtTkHIGbB66e_R7yFEs",authDomain:"chatter-1c8c6.firebaseapp.com",projectId:"chatter-1c8c6",storageBucket:"chatter-1c8c6.firebasestorage.app",messagingSenderId:"559340361952",appId:"1:559340361952:web:9f52288509de5989859885"},rg=RT(EO),Js=XI(rg),zn=xA(rg),TO=mb(rg),AO="_spinnerContainer_q1qrp_1",bO="_spinner_q1qrp_1",lT={spinnerContainer:AO,spinner:bO};function SO(){return F.jsx("div",{className:lT.spinnerContainer,children:F.jsx("div",{className:lT.spinner})})}const wO="_auth_form_1f6tc_1",RO={auth_form:wO},IO="_error_agquu_1",CO={error:IO};function pb({children:r}){return F.jsx("div",{className:CO.error,children:r})}function DO(r){if(!r?.code&&typeof r=="string")return r;if(!r?.code)return"An unknown error occurred.";switch(r.code){case"auth/user-not-found":return"No account found with this email.";case"auth/invalid-credential":return"Email or password is incorrect.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/password-does-not-meet-requirements":return"Password must contain at least 6 characters, a capital letter, and one number.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return r.message||"An unknown error occurred."}}function NO({onAuth:r}){const[t,n]=wt.useState(!1),[s,o]=wt.useState(""),[u,f]=wt.useState(""),[m,g]=wt.useState(""),[_,E]=wt.useState(""),w=async x=>{x&&await Wp(Oo(zn,"users",x.uid),{displayName:x.displayName||"Unknown",photoURL:x.photoURL||""},{merge:!0})},S=async x=>{x.preventDefault(),E("");try{if(t){const{user:P}=await MR(Js,s,u),Y=`https://api.dicebear.com/7.x/icons/svg?seed=${encodeURIComponent(m)}`;await JT(P,{displayName:m,photoURL:Y}),await w(Js.currentUser),r({...Js.currentUser})}else{const{user:P}=await VR(Js,s,u);await w(P),r(P)}}catch(P){E(P)}};return F.jsxs("form",{onSubmit:S,className:RO.auth_form,children:[F.jsx("h2",{children:t?"Create an Account":"Login"}),F.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:x=>o(x.target.value),required:!0}),F.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:x=>f(x.target.value),required:!0}),t&&F.jsx("input",{type:"text",placeholder:"Username",value:m,onChange:x=>g(x.target.value),required:!0}),_&&F.jsx(pb,{children:DO(_)}),F.jsx("button",{type:"submit",children:t?"Sign Up":"Log In"}),F.jsxs("p",{children:[t?"Already have an account?":"New here?"," ",F.jsx("button",{type:"button",onClick:()=>n(!t),children:t?"Log In":"Sign Up"})]})]})}const OO="_sidebar_18jxr_1",MO="_open_18jxr_17",VO="_sidebarToggle_18jxr_21",xO="_sidebarOpen_18jxr_44",PO="_sidebarClosed_18jxr_48",UO="_profile_18jxr_52",kO="_usernameRow_18jxr_57",LO="_settingsButton_18jxr_63",BO="_roomActions_18jxr_83",jO="_userRow_18jxr_87",zO="_avatarLarge_18jxr_93",qO="_userInfo_18jxr_100",HO="_displayName_18jxr_105",FO="_logout_btn_18jxr_109",GO="_roomList_18jxr_120",KO="_active_18jxr_135",QO="_avatar_18jxr_93",YO="_roomInfo_18jxr_149",XO="_name_18jxr_153",$O="_latest_18jxr_156",WO="_addRoomBtn_18jxr_165",ZO="_addRoomIcon_18jxr_186",JO="_addRoomText_18jxr_195",tM="_roomModal_18jxr_203",eM="_tabs_18jxr_203",nM="_activeTab_18jxr_222",iM="_title_18jxr_227",rM="_form_18jxr_234",sM="_input_18jxr_239",aM="_button_18jxr_251",Nt={sidebar:OO,open:MO,sidebarToggle:VO,sidebarOpen:xO,sidebarClosed:PO,profile:UO,usernameRow:kO,settingsButton:LO,roomActions:BO,userRow:jO,avatarLarge:zO,userInfo:qO,displayName:HO,logout_btn:FO,roomList:GO,active:KO,avatar:QO,roomInfo:YO,name:XO,latest:$O,addRoomBtn:WO,addRoomIcon:ZO,addRoomText:JO,roomModal:tM,tabs:eM,activeTab:nM,title:iM,form:rM,input:sM,button:aM},oM="_modalOverlay_hl9iu_1",lM="_modal_hl9iu_1",uT={modalOverlay:oM,modal:lM};function gb({open:r,onClose:t,children:n}){return r?F.jsx("div",{className:uT.modalOverlay,onClick:t,children:F.jsx("div",{className:uT.modal,onClick:s=>s.stopPropagation(),children:n})}):null}function uM({className:r="",...t}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-settings-icon lucide-settings ${r}`.trim(),...t,children:[F.jsx("path",{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34\r
        0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319\r
        1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34\r
        2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`}),F.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}/*!
 * Compressor.js v1.2.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-02-28T14:09:41.732Z
 */function cT(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,s)}return n}function nh(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(s){fM(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function cM(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function hT(r,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,_b(s.key),s)}}function hM(r,t,n){return t&&hT(r.prototype,t),n&&hT(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function fM(r,t,n){return t=_b(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Mh(){return Mh=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Mh.apply(this,arguments)}function dM(r,t){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function _b(r){var t=dM(r,"string");return typeof t=="symbol"?t:String(t)}var yb={exports:{}};(function(r){typeof window>"u"||function(t){var n=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,s=t.Blob&&function(){try{return!!new Blob}catch{return!1}}(),o=s&&t.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),u=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,m=(s||u)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(g){var _,E,w,S,x,P,Y,H,it;if(_=g.match(f),!_)throw new Error("invalid data URI");for(E=_[2]?_[1]:"text/plain"+(_[3]||";charset=US-ASCII"),w=!!_[4],S=g.slice(_[0].length),w?x=atob(S):x=decodeURIComponent(S),P=new ArrayBuffer(x.length),Y=new Uint8Array(P),H=0;H<x.length;H+=1)Y[H]=x.charCodeAt(H);return s?new Blob([o?Y:P],{type:E}):(it=new u,it.append(P),it.getBlob(E))};t.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(g,_,E){var w=this;setTimeout(function(){E&&n.toDataURL&&m?g(m(w.toDataURL(_,E))):g(w.mozGetAsFile("blob",_))})}:n.toDataURL&&m&&(n.msToBlob?n.toBlob=function(g,_,E){var w=this;setTimeout(function(){(_&&_!=="image/png"||E)&&n.toDataURL&&m?g(m(w.toDataURL(_,E))):g(w.msToBlob(_))})}:n.toBlob=function(g,_,E){var w=this;setTimeout(function(){g(m(w.toDataURL(_,E)))})})),r.exports?r.exports=m:t.dataURLtoBlob=m}(window)})(yb);var fT=yb.exports,mM=function(t){return typeof Blob>"u"?!1:t instanceof Blob||Object.prototype.toString.call(t)==="[object Blob]"},dT={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},pM=typeof window<"u"&&typeof window.document<"u",us=pM?window:{},Vh=function(t){return t>0&&t<1/0},gM=Array.prototype.slice;function sg(r){return Array.from?Array.from(r):gM.call(r)}var _M=/^image\/.+$/;function tp(r){return _M.test(r)}function yM(r){var t=tp(r)?r.substr(6):"";return t==="jpeg"&&(t="jpg"),".".concat(t)}var vb=String.fromCharCode;function vM(r,t,n){var s="",o;for(n+=t,o=t;o<n;o+=1)s+=vb(r.getUint8(o));return s}var EM=us.btoa;function mT(r,t){for(var n=[],s=8192,o=new Uint8Array(r);o.length>0;)n.push(vb.apply(null,sg(o.subarray(0,s)))),o=o.subarray(s);return"data:".concat(t,";base64,").concat(EM(n.join("")))}function TM(r){var t=new DataView(r),n;try{var s,o,u;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var f=t.byteLength,m=2;m+1<f;){if(t.getUint8(m)===255&&t.getUint8(m+1)===225){o=m;break}m+=1}if(o){var g=o+4,_=o+10;if(vM(t,g,4)==="Exif"){var E=t.getUint16(_);if(s=E===18761,(s||E===19789)&&t.getUint16(_+2,s)===42){var w=t.getUint32(_+4,s);w>=8&&(u=_+w)}}}if(u){var S=t.getUint16(u,s),x,P;for(P=0;P<S;P+=1)if(x=u+P*12+2,t.getUint16(x,s)===274){x+=8,n=t.getUint16(x,s),t.setUint16(x,1,s);break}}}catch{n=1}return n}function AM(r){var t=0,n=1,s=1;switch(r){case 2:n=-1;break;case 3:t=-180;break;case 4:s=-1;break;case 5:t=90,s=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:n,scaleY:s}}var bM=/\.\d*(?:0|9){12}\d*$/;function pT(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return bM.test(r)?Math.round(r*t)/t:r}function ql(r){var t=r.aspectRatio,n=r.height,s=r.width,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",u=Vh(s),f=Vh(n);if(u&&f){var m=n*t;(o==="contain"||o==="none")&&m>s||o==="cover"&&m<s?n=s/t:s=n*t}else u?n=s/t:f&&(s=n*t);return{width:s,height:n}}function SM(r){for(var t=sg(new Uint8Array(r)),n=t.length,s=[],o=0;o+3<n;){var u=t[o],f=t[o+1];if(u===255&&f===218)break;if(u===255&&f===216)o+=2;else{var m=t[o+2]*256+t[o+3],g=o+m+2,_=t.slice(o,g);s.push(_),o=g}}return s.reduce(function(E,w){return w[0]===255&&w[1]===225?E.concat(w):E},[])}function wM(r,t){var n=sg(new Uint8Array(r));if(n[2]!==255||n[3]!==224)return r;var s=n[4]*256+n[5],o=[255,216].concat(t,n.slice(4+s));return new Uint8Array(o)}var RM=us.ArrayBuffer,wm=us.FileReader,$s=us.URL||us.webkitURL,IM=/\.\w+$/,CM=us.Compressor,DM=function(){function r(t,n){cM(this,r),this.file=t,this.exif=[],this.image=new Image,this.options=nh(nh({},dT),n),this.aborted=!1,this.result=null,this.init()}return hM(r,[{key:"init",value:function(){var n=this,s=this.file,o=this.options;if(!mM(s)){this.fail(new Error("The first argument must be a File or Blob object."));return}var u=s.type;if(!tp(u)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!$s||!wm){this.fail(new Error("The current browser does not support image compression."));return}RM||(o.checkOrientation=!1,o.retainExif=!1);var f=u==="image/jpeg",m=f&&o.checkOrientation,g=f&&o.retainExif;if($s&&!m&&!g)this.load({url:$s.createObjectURL(s)});else{var _=new wm;this.reader=_,_.onload=function(E){var w=E.target,S=w.result,x={},P=1;m&&(P=TM(S),P>1&&Mh(x,AM(P))),g&&(n.exif=SM(S)),m||g?!$s||P>1?x.url=mT(S,u):x.url=$s.createObjectURL(s):x.url=S,n.load(x)},_.onabort=function(){n.fail(new Error("Aborted to read the image with FileReader."))},_.onerror=function(){n.fail(new Error("Failed to read the image with FileReader."))},_.onloadend=function(){n.reader=null},m||g?_.readAsArrayBuffer(s):_.readAsDataURL(s)}}},{key:"load",value:function(n){var s=this,o=this.file,u=this.image;u.onload=function(){s.draw(nh(nh({},n),{},{naturalWidth:u.naturalWidth,naturalHeight:u.naturalHeight}))},u.onabort=function(){s.fail(new Error("Aborted to load the image."))},u.onerror=function(){s.fail(new Error("Failed to load the image."))},us.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(us.navigator.userAgent)&&(u.crossOrigin="anonymous"),u.alt=o.name,u.src=n.url}},{key:"draw",value:function(n){var s=this,o=n.naturalWidth,u=n.naturalHeight,f=n.rotate,m=f===void 0?0:f,g=n.scaleX,_=g===void 0?1:g,E=n.scaleY,w=E===void 0?1:E,S=this.file,x=this.image,P=this.options,Y=document.createElement("canvas"),H=Y.getContext("2d"),it=Math.abs(m)%180===90,at=(P.resize==="contain"||P.resize==="cover")&&Vh(P.width)&&Vh(P.height),nt=Math.max(P.maxWidth,0)||1/0,dt=Math.max(P.maxHeight,0)||1/0,ht=Math.max(P.minWidth,0)||0,pt=Math.max(P.minHeight,0)||0,N=o/u,b=P.width,R=P.height;if(it){var M=[dt,nt];nt=M[0],dt=M[1];var V=[pt,ht];ht=V[0],pt=V[1];var U=[R,b];b=U[0],R=U[1]}at&&(N=b/R);var C=ql({aspectRatio:N,width:nt,height:dt},"contain");nt=C.width,dt=C.height;var Ht=ql({aspectRatio:N,width:ht,height:pt},"cover");if(ht=Ht.width,pt=Ht.height,at){var kt=ql({aspectRatio:N,width:b,height:R},P.resize);b=kt.width,R=kt.height}else{var K=ql({aspectRatio:N,width:b,height:R}),et=K.width;b=et===void 0?o:et;var ct=K.height;R=ct===void 0?u:ct}b=Math.floor(pT(Math.min(Math.max(b,ht),nt))),R=Math.floor(pT(Math.min(Math.max(R,pt),dt)));var Ut=-b/2,D=-R/2,W=b,rt=R,tt=[];if(at){var mt=0,Rt=0,yt=o,ce=u,Qt=ql({aspectRatio:N,width:o,height:u},{contain:"cover",cover:"contain"}[P.resize]);yt=Qt.width,ce=Qt.height,mt=(o-yt)/2,Rt=(u-ce)/2,tt.push(mt,Rt,yt,ce)}if(tt.push(Ut,D,W,rt),it){var mn=[R,b];b=mn[0],R=mn[1]}Y.width=b,Y.height=R,tp(P.mimeType)||(P.mimeType=S.type);var Hn="transparent";S.size>P.convertSize&&P.convertTypes.indexOf(P.mimeType)>=0&&(P.mimeType="image/jpeg");var Cn=P.mimeType==="image/jpeg";if(Cn&&(Hn="#fff"),H.fillStyle=Hn,H.fillRect(0,0,b,R),P.beforeDraw&&P.beforeDraw.call(this,H,Y),!this.aborted&&(H.save(),H.translate(b/2,R/2),H.rotate(m*Math.PI/180),H.scale(_,w),H.drawImage.apply(H,[x].concat(tt)),H.restore(),P.drew&&P.drew.call(this,H,Y),!this.aborted)){var ii=function(pn){if(!s.aborted){var dr=function(Fn){return s.done({naturalWidth:o,naturalHeight:u,result:Fn})};if(pn&&Cn&&P.retainExif&&s.exif&&s.exif.length>0){var ms=function(Fn){return dr(fT(mT(wM(Fn,s.exif),P.mimeType)))};if(pn.arrayBuffer)pn.arrayBuffer().then(ms).catch(function(){s.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var Ce=new wm;s.reader=Ce,Ce.onload=function(ps){var Fn=ps.target;ms(Fn.result)},Ce.onabort=function(){s.fail(new Error("Aborted to read the compressed image with FileReader."))},Ce.onerror=function(){s.fail(new Error("Failed to read the compressed image with FileReader."))},Ce.onloadend=function(){s.reader=null},Ce.readAsArrayBuffer(pn)}}else dr(pn)}};Y.toBlob?Y.toBlob(ii,P.mimeType,P.quality):ii(fT(Y.toDataURL(P.mimeType,P.quality)))}}},{key:"done",value:function(n){var s=n.naturalWidth,o=n.naturalHeight,u=n.result,f=this.file,m=this.image,g=this.options;if($s&&m.src.indexOf("blob:")===0&&$s.revokeObjectURL(m.src),u)if(g.strict&&!g.retainExif&&u.size>f.size&&g.mimeType===f.type&&!(g.width>s||g.height>o||g.minWidth>s||g.minHeight>o||g.maxWidth<s||g.maxHeight<o))u=f;else{var _=new Date;u.lastModified=_.getTime(),u.lastModifiedDate=_,u.name=f.name,u.name&&u.type!==f.type&&(u.name=u.name.replace(IM,yM(u.type)))}else u=f;this.result=u,g.success&&g.success.call(this,u)}},{key:"fail",value:function(n){var s=this.options;if(s.error)s.error.call(this,n);else throw n}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=CM,r}},{key:"setDefaults",value:function(n){Mh(dT,n)}}]),r}();function NM(r,t={}){return new Promise((n,s)=>{const f={...{quality:.7,maxWidth:500,maxHeight:500,resize:"contain",convertTypes:["image/jpeg","image/png","image/webp"]},...t,success(m){n(m)},error(m){s(m)}};new DM(r,f)})}const OM="_settings_1ptb2_1",MM="_header_1ptb2_4",VM="_closeButton_1ptb2_16",xM="_settingsForm_1ptb2_30",PM="_formGroup_1ptb2_36",UM="_fileInput_1ptb2_58",kM="_uploadButton_1ptb2_61",LM="_uploadContainer_1ptb2_75",BM="_previewContainer_1ptb2_80",jM="_profilePreview_1ptb2_93",zM="_formActions_1ptb2_100",qM="_cancelButton_1ptb2_121",HM="_saveButton_1ptb2_128",hn={settings:OM,header:MM,closeButton:VM,settingsForm:xM,formGroup:PM,fileInput:UM,uploadButton:kM,uploadContainer:LM,previewContainer:BM,profilePreview:jM,formActions:zM,cancelButton:qM,saveButton:HM},FM=mb(),GM=xA(),KM=({isOpen:r,onClose:t,user:n,onUpdateProfile:s})=>{const[o,u]=wt.useState(n.displayName||""),[f,m]=wt.useState(n.photoURL||""),[g,_]=wt.useState(!1),E=wt.useRef(null),w=wt.useRef(null);wt.useEffect(()=>{r&&(u(n.displayName||""),m(n.photoURL||""),E.current=null)},[r,n]);const S=async P=>{const Y=P.target.files?.[0];if(Y)try{const H=await NM(Y);E.current=H,m(URL.createObjectURL(H))}catch(H){console.error("Image compression failed:",H)}},x=async P=>{P.preventDefault(),_(!0);try{let Y=f;if(E.current){const H=db(FM,`profilePictures/${n.uid}`);await hb(H,E.current),Y=await fb(H)}await Wp(Oo(GM,"users",n.uid),{displayName:o,photoURL:Y},{merge:!0}),s({...n,displayName:o,photoURL:Y}),t()}catch(Y){console.error("Failed to save profile settings:",Y)}finally{_(!1)}};return F.jsx(gb,{open:r,onClose:t,children:F.jsxs("div",{className:hn.settings,children:[F.jsxs("div",{className:hn.header,children:[F.jsx("h2",{children:"Profile Settings"}),F.jsx("button",{className:hn.closeButton,onClick:t,children:""})]}),F.jsxs("form",{onSubmit:x,className:hn.settingsForm,children:[F.jsxs("div",{className:hn.formGroup,children:[F.jsx("label",{htmlFor:"username",children:"Username"}),F.jsx("input",{type:"text",id:"username",value:o,onChange:P=>u(P.target.value),placeholder:"Enter your username",required:!0})]}),F.jsxs("div",{className:hn.formGroup,children:[F.jsx("label",{htmlFor:"profilePicture",children:"Profile Picture"}),F.jsxs("div",{className:hn.uploadContainer,children:[F.jsx("input",{type:"file",id:"profilePicture",ref:w,accept:"image/*",onChange:S,className:hn.fileInput}),F.jsx("button",{type:"button",className:hn.uploadButton,onClick:()=>w.current?.click(),children:"Choose Image"}),f&&F.jsx("div",{className:hn.previewContainer,children:F.jsx("img",{src:f,alt:"Profile preview",className:hn.profilePreview})})]})]}),F.jsxs("div",{className:hn.formActions,children:[F.jsx("button",{type:"button",className:hn.cancelButton,onClick:t,disabled:g,children:"Cancel"}),F.jsx("button",{type:"submit",className:hn.saveButton,disabled:g,children:g?"Saving...":"Save"})]})]})]})})};function QM({user:r,onJoinRoom:t,selectedRoom:n,onLogout:s,isOpen:o,setIsOpen:u}){const[f,m]=wt.useState([]),[g,_]=wt.useState(!1),[E,w]=wt.useState("create"),[S,x]=wt.useState(""),[P,Y]=wt.useState(""),[H,it]=wt.useState(""),[at,nt]=wt.useState(!1),dt=wt.useRef([]),ht=async b=>{try{return await JT(Js.currentUser,b),!0}catch(R){throw console.error("Error updating profile:",R),R}};wt.useEffect(()=>{if(!r?.uid)return;const b=Yl(Qr(zn,"chatRooms"),Am("members","array-contains",r.uid));let R=[];const M=nu(b,V=>{let C=V.docs.map(Ht=>{const kt=Ht.data(),K=dt.current.find(et=>et.id===Ht.id);return{id:Ht.id,name:kt.name,password:kt.password||null,members:kt.members||[],latestMessage:K?.latestMessage??null,latestTimestamp:K?.latestTimestamp??null}});R.forEach(Ht=>Ht()),R=[],C.forEach(Ht=>{const kt=Yl(Qr(zn,`chatRooms/${Ht.id}/messages`),HA("timestamp","desc"),rN(1)),K=nu(kt,et=>{const ct=et.docs[0];m(Ut=>{const D=Ut.map(W=>{if(W.id===Ht.id){const rt=ct?.data();return{...W,latestMessage:rt?.text||"",latestMessageImage:rt?.messageImageUrl||null,latestTimestamp:rt?.timestamp?.toMillis?.()||0}}return W});return dt.current=D,[...D].sort((W,rt)=>(rt.latestTimestamp||0)-(W.latestTimestamp||0))})});R.push(K)}),m(Ht=>{const kt=C.map(K=>{const et=Ht.find(ct=>ct.id===K.id);return{...K,latestMessage:et?.latestMessage??K.latestMessage,latestTimestamp:et?.latestTimestamp??K.latestTimestamp}});return dt.current=kt,[...kt].sort((K,et)=>(et.latestTimestamp||0)-(K.latestTimestamp||0))})});return()=>{M(),R.forEach(V=>V())}},[r?.uid,s]);const pt=async b=>{if(b.preventDefault(),it(""),!S.trim()||!P.trim())return;const R=Yl(Qr(zn,"chatRooms"),Am("name","==",S.trim()));if(!(await nT(R)).empty){it("A room with this name already exists. Please choose another name.");return}await KA(Qr(zn,"chatRooms"),{name:S.trim(),password:P.trim(),createdBy:r.uid,members:[r.uid],createdAt:QA()}),x(""),Y(""),_(!1),w("create"),it("")},N=async b=>{if(b.preventDefault(),it(""),!S.trim()||!P.trim())return;const R=Yl(Qr(zn,"chatRooms"),Am("name","==",S.trim())),M=await nT(R);if(M.empty){it("Room not found");return}const V=M.docs[0],U=V.data();if((U.password||"")!==P.trim()){it("Incorrect password");return}await oN(Oo(zn,"chatRooms",V.id),{members:uN(r.uid)});const C={id:V.id,name:U.name,password:U.password||null};x(""),Y(""),_(!1),w("create"),it(""),t?.(C)};return F.jsxs(F.Fragment,{children:[F.jsx("button",{className:`${Nt.sidebarToggle} ${o?Nt.sidebarOpen:Nt.sidebarClosed}`,onClick:()=>u?.(!o),"aria-label":o?"Close rooms sidebar":"Open rooms sidebar",title:o?"Close":"Open",children:o?"":""}),F.jsxs("div",{className:`${Nt.sidebar} ${o?Nt.open:""}`,children:[F.jsx("div",{className:Nt.profile,children:F.jsxs("div",{className:Nt.userRow,children:[F.jsx("img",{src:r.photoURL,alt:r.displayName,className:Nt.avatarLarge}),F.jsxs("div",{className:Nt.userInfo,children:[F.jsx("div",{className:Nt.usernameRow,children:F.jsx("span",{className:Nt.displayName,children:r.displayName})}),F.jsx("button",{className:Nt.logout_btn,onClick:s,children:"Sign Out"})]}),F.jsx("div",{className:Nt.roomActions,children:F.jsx("button",{className:Nt.settingsButton,onClick:()=>nt(!0),"aria-label":"Settings",children:F.jsx(uM,{})})})]})}),F.jsxs("ul",{className:Nt.roomList,children:[F.jsxs("button",{className:Nt.addRoomBtn,onClick:()=>_(!0),title:"Create or join a room",children:[F.jsx("span",{className:Nt.addRoomIcon,children:"+"}),F.jsx("span",{className:Nt.addRoomText,children:"New Room"})]}),f.map(b=>F.jsxs("li",{className:n?.id===b.id?Nt.active:"",onClick:()=>t(b),children:[F.jsx("div",{className:Nt.avatar,children:""}),F.jsxs("div",{className:Nt.roomInfo,children:[F.jsx("div",{className:Nt.name,children:b.name}),F.jsx("div",{className:Nt.latest,children:b.latestMessageImage?F.jsx("em",{children:"Image"}):b.latestMessage||"No messages yet"})]})]},b.id))]})]}),F.jsx(gb,{open:g,onClose:()=>{_(!1),it("")},children:F.jsxs("div",{className:Nt.roomModal,children:[F.jsxs("div",{className:Nt.tabs,children:[F.jsx("button",{className:E==="create"?Nt.activeTab:"",onClick:()=>{w("create"),it("")},type:"button",children:"Create"}),F.jsx("button",{className:E==="join"?Nt.activeTab:"",onClick:()=>{w("join"),it("")},type:"button",children:"Join"})]}),E==="create"?F.jsxs(F.Fragment,{children:[F.jsx("h3",{className:Nt.title,children:"Create a Room"}),F.jsxs("form",{className:Nt.form,onSubmit:pt,children:[F.jsx("input",{className:Nt.input,value:S,onChange:b=>x(b.target.value),placeholder:"Room name",required:!0}),F.jsx("input",{className:Nt.input,value:P,onChange:b=>Y(b.target.value),placeholder:"Room password",type:"password",required:!0}),H&&F.jsx(pb,{children:H}),F.jsx("button",{className:Nt.button,type:"submit",children:"Create"})]})]}):F.jsxs(F.Fragment,{children:[F.jsx("h3",{className:Nt.title,children:"Join a Room"}),F.jsxs("form",{className:Nt.form,onSubmit:N,children:[F.jsx("input",{className:Nt.input,value:S,onChange:b=>x(b.target.value),placeholder:"Room name",required:!0}),F.jsx("input",{className:Nt.input,value:P,onChange:b=>Y(b.target.value),placeholder:"Room password",type:"password",required:!0}),H&&F.jsx("div",{className:Nt.error,children:H}),F.jsx("button",{className:Nt.button,type:"submit",children:"Join"})]})]})]})}),F.jsx(KM,{isOpen:at,onClose:()=>nt(!1),user:r,onUpdateProfile:ht})]})}const YM="_chat_container_1013w_14",XM="_messages_1013w_21",$M="_message_1013w_21",WM="_meta_1013w_42",ZM="_timestamp_1013w_48",JM="_avatar_1013w_76",t4="_image_1013w_82",e4="_username_1013w_93",n4="_own_1013w_96",Wn={chat_container:YM,messages:XM,message:$M,meta:WM,timestamp:ZM,avatar:JM,image:t4,username:e4,own:n4},i4="_chat_input_container_1vltc_1",r4="_chat_input_1vltc_1",s4="_message_input_1vltc_17",a4="_icon_button_1vltc_44",o4="_preview_1vltc_67",l4="_file_info_1vltc_85",u4="_file_name_1vltc_89",c4="_remove_button_1vltc_97",h4="_spin_1vltc_116",Ei={chat_input_container:i4,chat_input:r4,message_input:s4,icon_button:a4,preview:o4,file_info:l4,file_name:u4,remove_button:c4,spin:h4};function f4({className:r="",...t}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-image-icon lucide-image ${r}`.trim(),...t,children:[F.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),F.jsx("circle",{cx:"9",cy:"9",r:"2"}),F.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})}function d4({className:r="",...t}){return F.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-loader-circle-icon lucide-loader-circle ${r}`.trim(),...t,children:F.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}function m4({className:r="",...t}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-send-icon lucide-send ${r}`.trim(),...t,children:[F.jsx("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),F.jsx("path",{d:"m21.854 2.147-10.94 10.939"})]})}function p4({user:r,roomId:t}){const[n,s]=wt.useState(""),[o,u]=wt.useState(!1),[f,m]=wt.useState(null),[g,_]=wt.useState(null),[E,w]=wt.useState(""),S=wt.useRef(null),x=wt.useRef(null),P=wt.useRef(),Y=()=>{S.current?.click()},H=pt=>{const N=pt.target.files?.[0];if(!N)return;if(!N.type.startsWith("image/")){alert("Please select an image file.");return}if(N.size>5*1024*1024){alert("Image is too large (max 5MB).");return}m(N),w(N.name);const b=URL.createObjectURL(N);_(b)},it=()=>{g&&URL.revokeObjectURL(g),_(null),m(null),w("")},at=pt=>{const N=pt.currentTarget.textContent;s(N),N===""&&x.current&&(x.current.innerHTML=""),nt(!0),clearTimeout(P.current),P.current=setTimeout(()=>{nt(!1)},1500)},nt=pt=>{!t||!r?.uid||Wp(Oo(zn,`chatRooms/${t}/typing`,r.uid),{isTyping:pt},{merge:!0})},dt=()=>{nt(!1)},ht=async pt=>{pt.preventDefault();const N=!!n.trim(),b=!!f;if(!N&&!b||!t)return;s(""),x.current&&(x.current.textContent="");let R=null;try{if(b){u(!0);const M=`chatRooms/${t}/images/${r.uid}-${Date.now()}-${f.name}`,V=db(TO,M);await hb(V,f),R=await fb(V)}await KA(Qr(zn,`chatRooms/${t}/messages`),{text:N?n.trim():"",messageImageUrl:R||null,uid:r.uid,displayName:r.displayName,userAvatarUrl:r.photoURL,timestamp:QA()})}catch(M){console.error("Failed to send message:",M),alert("Failed to send message. Please try again.")}finally{u(!1),it()}};return F.jsxs("div",{className:Ei.chat_input_container,children:[g&&F.jsxs("div",{className:Ei.preview,children:[F.jsx("img",{src:g,alt:"preview"}),F.jsx("div",{className:Ei.file_info,children:F.jsx("span",{className:Ei.file_name,children:E})}),F.jsx("button",{type:"button",onClick:it,className:Ei.remove_button,"aria-label":"Remove selected image",children:""})]}),F.jsxs("form",{onSubmit:ht,className:Ei.chat_input,children:[F.jsx("div",{ref:x,contentEditable:!0,suppressContentEditableWarning:!0,className:Ei.message_input,"aria-label":"Type your message...",placeholder:"Type your message...",onInput:at,onBlur:dt,onKeyDown:pt=>{pt.key==="Enter"&&!pt.shiftKey&&(pt.preventDefault(),ht(pt))}}),F.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:H,style:{display:"none"}}),F.jsx("button",{type:"button",onClick:Y,"aria-label":"Attach image",className:Ei.icon_button,children:F.jsx(f4,{})}),F.jsx("button",{type:"submit",disabled:o,className:Ei.icon_button,children:o?F.jsx(d4,{className:Ei.spin}):F.jsx(m4,{})})]})]})}const g4="_typingIndicator_yzxbg_1",_4="_avatar_yzxbg_8",y4="_dots_yzxbg_18",v4="_dot_yzxbg_18",ao={typingIndicator:g4,avatar:_4,dots:y4,dot:v4},E4=({profileImage:r,isTyping:t,username:n})=>t?F.jsxs("div",{className:ao.typingIndicator,children:[F.jsx("div",{className:ao.avatar,children:F.jsx("img",{src:r,alt:`${n||"User"} avatar`})}),F.jsxs("div",{className:ao.dots,children:[F.jsx("span",{className:ao.dot}),F.jsx("span",{className:ao.dot}),F.jsx("span",{className:ao.dot})]})]}):null;function T4({user:r,roomId:t}){const[n,s]=wt.useState([]),[o,u]=wt.useState({}),[f,m]=wt.useState([]),g=wt.useRef(null),[_,E]=wt.useState(null),w=S=>{if(!S)return"";const x=S?.toMillis?S.toMillis():S;return x?new Date(x).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}):""};return wt.useEffect(()=>{if(!t)return;const S=Yl(Qr(zn,`chatRooms/${t}/messages`),HA("timestamp")),x=nu(S,P=>{const Y=P.docs.map(it=>({id:it.id,...it.data()}));s(Y),[...new Set(Y.map(it=>it.uid))].forEach(it=>{o[it]||nu(Oo(zn,"users",it),at=>{at.exists()&&u(nt=>({...nt,[it]:at.data()}))})})});return()=>x()},[t]),wt.useEffect(()=>{if(!t)return;const S=Qr(zn,`chatRooms/${t}/typing`),x=nu(S,P=>{const Y=[];P.forEach(H=>{const it=H.data();H.id!==r.uid&&it.isTyping&&Y.push({uid:H.id})}),m(Y)});return()=>x()},[t,r.uid]),wt.useEffect(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[n]),F.jsxs("div",{className:Wn.chat_container,children:[F.jsxs("div",{className:Wn.messages,children:[n.map((S,x)=>{const P=n[x-1],Y=6e4,H=nt=>nt?.toMillis?nt.toMillis():nt,it=!P||S.uid!==P.uid||H(S.timestamp)-H(P.timestamp)>Y,at=o[S.uid]||{};return F.jsxs("div",{className:`${Wn.message} ${S.uid===r.uid?Wn.own:""}`,children:[it&&F.jsx("div",{className:Wn.meta,children:S.uid===r.uid?F.jsxs(F.Fragment,{children:[F.jsx("span",{className:Wn.username,children:at.displayName||"Unknown"}),F.jsx("img",{className:Wn.avatar,src:at.photoURL||"",alt:at.displayName||"User"})]}):F.jsxs(F.Fragment,{children:[F.jsx("img",{className:Wn.avatar,src:at.photoURL||"",alt:at.displayName||"User"}),F.jsx("span",{className:Wn.username,children:at.displayName||"Unknown"})]})}),_===S.id&&F.jsx("div",{className:Wn.timestamp,children:w(S.timestamp)}),F.jsxs("div",{children:[S.imageUrl&&F.jsx("img",{className:Wn.image,src:S.imageUrl,alt:"sent",onClick:()=>E(nt=>nt===S.id?null:S.id)}),S.text&&F.jsx("p",{onClick:()=>E(nt=>nt===S.id?null:S.id),children:S.text})]})]},S.id)}),F.jsx("div",{ref:g}),f.map(S=>{const x=o[S.uid]||{};return F.jsx(E4,{profileImage:x.photoURL||"",isTyping:!0,username:x.displayName||"User"},S.uid)})]}),F.jsx(p4,{user:r,roomId:t})]})}function A4(){const[r,t]=wt.useState(null),[n,s]=wt.useState(null),[o,u]=wt.useState(!0),[f,m]=wt.useState(!0);return wt.useEffect(()=>{const g=kR(Js,_=>{t(_),u(!1)});return()=>g()},[]),o?F.jsx(SO,{}):r?F.jsx(F.Fragment,{children:F.jsxs("div",{className:`app-split ${f?"with-sidebar":"full"}`,children:[F.jsx(QM,{user:r,selectedRoom:n,onJoinRoom:s,onLogout:()=>LR(Js),isOpen:f,setIsOpen:m}),n?F.jsx(T4,{user:r,roomId:n.id}):F.jsx("div",{className:"chat-placeholder",children:"Select a room"})]})}):F.jsx(NO,{onAuth:t})}J1.createRoot(document.getElementById("root")).render(F.jsx(wt.StrictMode,{children:F.jsx(A4,{})}));
