(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Wd={exports:{}},Vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function b1(){if(ov)return Vl;ov=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Vl.Fragment=t,Vl.jsx=n,Vl.jsxs=n,Vl}var lv;function R1(){return lv||(lv=1,Wd.exports=b1()),Wd.exports}var G=R1(),Jd={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function I1(){if(uv)return wt;uv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,J={};function Q(N,W,rt){this.props=N,this.context=W,this.refs=J,this.updater=rt||B}Q.prototype.isReactComponent={},Q.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},Q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function nt(){}nt.prototype=Q.prototype;function st(N,W,rt){this.props=N,this.context=W,this.refs=J,this.updater=rt||B}var at=st.prototype=new nt;at.constructor=st,F(at,Q.prototype),at.isPureReactComponent=!0;var pt=Array.isArray,dt={H:null,A:null,T:null,S:null,V:null},bt=Object.prototype.hasOwnProperty;function V(N,W,rt,tt,mt,It){return rt=It.ref,{$$typeof:r,type:N,key:W,ref:rt!==void 0?rt:null,props:It}}function S(N,W){return V(N.type,W,void 0,void 0,void 0,N.props)}function I(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(rt){return W[rt]})}var M=/\/+/g;function P(N,W){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):W.toString(36)}function C(){}function Yt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function qt(N,W,rt,tt,mt){var It=typeof N;(It==="undefined"||It==="boolean")&&(N=null);var Tt=!1;if(N===null)Tt=!0;else switch(It){case"bigint":case"string":case"number":Tt=!0;break;case"object":switch(N.$$typeof){case r:case t:Tt=!0;break;case E:return Tt=N._init,qt(Tt(N._payload),W,rt,tt,mt)}}if(Tt)return mt=mt(N),Tt=tt===""?"."+P(N,0):tt,pt(mt)?(rt="",Tt!=null&&(rt=Tt.replace(M,"$&/")+"/"),qt(mt,W,rt,"",function(Zn){return Zn})):mt!=null&&(I(mt)&&(mt=S(mt,rt+(mt.key==null||N&&N.key===mt.key?"":(""+mt.key).replace(M,"$&/")+"/")+Tt)),W.push(mt)),1;Tt=0;var Ve=tt===""?".":tt+":";if(pt(N))for(var te=0;te<N.length;te++)tt=N[te],It=Ve+P(tt,te),Tt+=qt(tt,W,rt,It,mt);else if(te=b(N),typeof te=="function")for(N=te.call(N),te=0;!(tt=N.next()).done;)tt=tt.value,It=Ve+P(tt,te++),Tt+=qt(tt,W,rt,It,mt);else if(It==="object"){if(typeof N.then=="function")return qt(Yt(N),W,rt,tt,mt);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Tt}function H(N,W,rt){if(N==null)return N;var tt=[],mt=0;return qt(N,tt,"","",function(It){return W.call(rt,It,mt++)}),tt}function et(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(rt){(N._status===0||N._status===-1)&&(N._status=1,N._result=rt)},function(rt){(N._status===0||N._status===-1)&&(N._status=2,N._result=rt)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ct=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Bt(){}return wt.Children={map:H,forEach:function(N,W,rt){H(N,function(){W.apply(this,arguments)},rt)},count:function(N){var W=0;return H(N,function(){W++}),W},toArray:function(N){return H(N,function(W){return W})||[]},only:function(N){if(!I(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},wt.Component=Q,wt.Fragment=n,wt.Profiler=o,wt.PureComponent=st,wt.StrictMode=s,wt.Suspense=g,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=dt,wt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return dt.H.useMemoCache(N)}},wt.cache=function(N){return function(){return N.apply(null,arguments)}},wt.cloneElement=function(N,W,rt){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var tt=F({},N.props),mt=N.key,It=void 0;if(W!=null)for(Tt in W.ref!==void 0&&(It=void 0),W.key!==void 0&&(mt=""+W.key),W)!bt.call(W,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&W.ref===void 0||(tt[Tt]=W[Tt]);var Tt=arguments.length-2;if(Tt===1)tt.children=rt;else if(1<Tt){for(var Ve=Array(Tt),te=0;te<Tt;te++)Ve[te]=arguments[te+2];tt.children=Ve}return V(N.type,mt,void 0,void 0,It,tt)},wt.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},wt.createElement=function(N,W,rt){var tt,mt={},It=null;if(W!=null)for(tt in W.key!==void 0&&(It=""+W.key),W)bt.call(W,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(mt[tt]=W[tt]);var Tt=arguments.length-2;if(Tt===1)mt.children=rt;else if(1<Tt){for(var Ve=Array(Tt),te=0;te<Tt;te++)Ve[te]=arguments[te+2];mt.children=Ve}if(N&&N.defaultProps)for(tt in Tt=N.defaultProps,Tt)mt[tt]===void 0&&(mt[tt]=Tt[tt]);return V(N,It,void 0,void 0,null,mt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(N){return{$$typeof:m,render:N}},wt.isValidElement=I,wt.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:et}},wt.memo=function(N,W){return{$$typeof:_,type:N,compare:W===void 0?null:W}},wt.startTransition=function(N){var W=dt.T,rt={};dt.T=rt;try{var tt=N(),mt=dt.S;mt!==null&&mt(rt,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(Bt,ct)}catch(It){ct(It)}finally{dt.T=W}},wt.unstable_useCacheRefresh=function(){return dt.H.useCacheRefresh()},wt.use=function(N){return dt.H.use(N)},wt.useActionState=function(N,W,rt){return dt.H.useActionState(N,W,rt)},wt.useCallback=function(N,W){return dt.H.useCallback(N,W)},wt.useContext=function(N){return dt.H.useContext(N)},wt.useDebugValue=function(){},wt.useDeferredValue=function(N,W){return dt.H.useDeferredValue(N,W)},wt.useEffect=function(N,W,rt){var tt=dt.H;if(typeof rt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(N,W)},wt.useId=function(){return dt.H.useId()},wt.useImperativeHandle=function(N,W,rt){return dt.H.useImperativeHandle(N,W,rt)},wt.useInsertionEffect=function(N,W){return dt.H.useInsertionEffect(N,W)},wt.useLayoutEffect=function(N,W){return dt.H.useLayoutEffect(N,W)},wt.useMemo=function(N,W){return dt.H.useMemo(N,W)},wt.useOptimistic=function(N,W){return dt.H.useOptimistic(N,W)},wt.useReducer=function(N,W,rt){return dt.H.useReducer(N,W,rt)},wt.useRef=function(N){return dt.H.useRef(N)},wt.useState=function(N){return dt.H.useState(N)},wt.useSyncExternalStore=function(N,W,rt){return dt.H.useSyncExternalStore(N,W,rt)},wt.useTransition=function(){return dt.H.useTransition()},wt.version="19.1.1",wt}var cv;function Ym(){return cv||(cv=1,Jd.exports=I1()),Jd.exports}var Ot=Ym(),tm={exports:{}},Pl={},em={exports:{}},nm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hv;function C1(){return hv||(hv=1,function(r){function t(H,et){var ct=H.length;H.push(et);t:for(;0<ct;){var Bt=ct-1>>>1,N=H[Bt];if(0<o(N,et))H[Bt]=et,H[ct]=N,ct=Bt;else break t}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var et=H[0],ct=H.pop();if(ct!==et){H[0]=ct;t:for(var Bt=0,N=H.length,W=N>>>1;Bt<W;){var rt=2*(Bt+1)-1,tt=H[rt],mt=rt+1,It=H[mt];if(0>o(tt,ct))mt<N&&0>o(It,tt)?(H[Bt]=It,H[mt]=ct,Bt=mt):(H[Bt]=tt,H[rt]=ct,Bt=rt);else if(mt<N&&0>o(It,ct))H[Bt]=It,H[mt]=ct,Bt=mt;else break t}}return et}function o(H,et){var ct=H.sortIndex-et.sortIndex;return ct!==0?ct:H.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();r.unstable_now=function(){return f.now()-m}}var g=[],_=[],E=1,w=null,b=3,B=!1,F=!1,J=!1,Q=!1,nt=typeof setTimeout=="function"?setTimeout:null,st=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function pt(H){for(var et=n(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=H)s(_),et.sortIndex=et.expirationTime,t(g,et);else break;et=n(_)}}function dt(H){if(J=!1,pt(H),!F)if(n(g)!==null)F=!0,bt||(bt=!0,P());else{var et=n(_);et!==null&&qt(dt,et.startTime-H)}}var bt=!1,V=-1,S=5,I=-1;function O(){return Q?!0:!(r.unstable_now()-I<S)}function M(){if(Q=!1,bt){var H=r.unstable_now();I=H;var et=!0;try{t:{F=!1,J&&(J=!1,st(V),V=-1),B=!0;var ct=b;try{e:{for(pt(H),w=n(g);w!==null&&!(w.expirationTime>H&&O());){var Bt=w.callback;if(typeof Bt=="function"){w.callback=null,b=w.priorityLevel;var N=Bt(w.expirationTime<=H);if(H=r.unstable_now(),typeof N=="function"){w.callback=N,pt(H),et=!0;break e}w===n(g)&&s(g),pt(H)}else s(g);w=n(g)}if(w!==null)et=!0;else{var W=n(_);W!==null&&qt(dt,W.startTime-H),et=!1}}break t}finally{w=null,b=ct,B=!1}et=void 0}}finally{et?P():bt=!1}}}var P;if(typeof at=="function")P=function(){at(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Yt=C.port2;C.port1.onmessage=M,P=function(){Yt.postMessage(null)}}else P=function(){nt(M,0)};function qt(H,et){V=nt(function(){H(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(H){switch(b){case 1:case 2:case 3:var et=3;break;default:et=b}var ct=b;b=et;try{return H()}finally{b=ct}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(H,et){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ct=b;b=H;try{return et()}finally{b=ct}},r.unstable_scheduleCallback=function(H,et,ct){var Bt=r.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Bt+ct:Bt):ct=Bt,H){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ct+N,H={id:E++,callback:et,priorityLevel:H,startTime:ct,expirationTime:N,sortIndex:-1},ct>Bt?(H.sortIndex=ct,t(_,H),n(g)===null&&H===n(_)&&(J?(st(V),V=-1):J=!0,qt(dt,ct-Bt))):(H.sortIndex=N,t(g,H),F||B||(F=!0,bt||(bt=!0,P()))),H},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(H){var et=b;return function(){var ct=b;b=et;try{return H.apply(this,arguments)}finally{b=ct}}}}(nm)),nm}var fv;function N1(){return fv||(fv=1,em.exports=C1()),em.exports}var im={exports:{}},$e={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv;function D1(){if(dv)return $e;dv=1;var r=Ym();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:_,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return $e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,$e.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,E)},$e.flushSync=function(g){var _=f.T,E=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=_,s.p=E,s.d.f()}},$e.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(g,_))},$e.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},$e.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,w=m(E,_.crossOrigin),b=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?s.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:b,fetchPriority:B}):E==="script"&&s.d.X(g,{crossOrigin:w,integrity:b,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},$e.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(g)},$e.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,w=m(E,_.crossOrigin);s.d.L(g,E,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},$e.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);s.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(g)},$e.requestFormReset=function(g){s.d.r(g)},$e.unstable_batchedUpdates=function(g,_){return g(_)},$e.useFormState=function(g,_,E){return f.H.useFormState(g,_,E)},$e.useFormStatus=function(){return f.H.useHostTransitionStatus()},$e.version="19.1.1",$e}var mv;function O1(){if(mv)return im.exports;mv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),im.exports=D1(),im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function M1(){if(pv)return Pl;pv=1;var r=N1(),t=Ym(),n=O1();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(s(188))}function g(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),e;if(d===l)return m(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=d;break}if(T===l){v=!0,l=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=h;break}if(T===l){v=!0,l=d,a=h;break}T=T.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function _(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=_(e),i!==null)return i;e=e.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),st=Symbol.for("react.consumer"),at=Symbol.for("react.context"),pt=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var C=Symbol.for("react.client.reference");function Yt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===C?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case Q:return"Profiler";case J:return"StrictMode";case dt:return"Suspense";case bt:return"SuspenseList";case I:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case B:return"Portal";case at:return(e.displayName||"Context")+".Provider";case st:return(e._context.displayName||"Context")+".Consumer";case pt:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case V:return i=e.displayName||null,i!==null?i:Yt(e.type)||"Memo";case S:i=e._payload,e=e._init;try{return Yt(e(i))}catch{}}return null}var qt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Bt=[],N=-1;function W(e){return{current:e}}function rt(e){0>N||(e.current=Bt[N],Bt[N]=null,N--)}function tt(e,i){N++,Bt[N]=e.current,e.current=i}var mt=W(null),It=W(null),Tt=W(null),Ve=W(null);function te(e,i){switch(tt(Tt,i),tt(It,e),tt(mt,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?xy(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=xy(i),e=ky(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}rt(mt),tt(mt,e)}function Zn(){rt(mt),rt(It),rt(Tt)}function lr(e){e.memoizedState!==null&&tt(Ve,e);var i=mt.current,a=ky(i,e.type);i!==a&&(tt(It,e),tt(mt,a))}function Ri(e){It.current===e&&(rt(mt),rt(It)),Ve.current===e&&(rt(Ve),Cl._currentValue=ct)}var os=Object.prototype.hasOwnProperty,ls=r.unstable_scheduleCallback,us=r.unstable_cancelCallback,bo=r.unstable_shouldYield,vu=r.unstable_requestPaint,bn=r.unstable_now,Zh=r.unstable_getCurrentPriorityLevel,Ro=r.unstable_ImmediatePriority,la=r.unstable_UserBlockingPriority,cs=r.unstable_NormalPriority,Wh=r.unstable_LowPriority,ua=r.unstable_IdlePriority,Io=r.log,Eu=r.unstable_setDisableYieldValue,ce=null,Gt=null;function dn(e){if(typeof Io=="function"&&Eu(e),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ce,e)}catch{}}var Ye=Math.clz32?Math.clz32:hs,Tu=Math.log,Jh=Math.LN2;function hs(e){return e>>>=0,e===0?32:31-(Tu(e)/Jh|0)|0}var fs=256,ds=4194304;function Bn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ca(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=Bn(l):(v&=T,v!==0?h=Bn(v):a||(a=T&~e,a!==0&&(h=Bn(a))))):(T=l&~d,T!==0?h=Bn(T):v!==0?h=Bn(v):a||(a=l&~e,a!==0&&(h=Bn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function ms(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Co(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function No(){var e=fs;return fs<<=1,(fs&4194048)===0&&(fs=256),e}function Do(){var e=ds;return ds<<=1,(ds&62914560)===0&&(ds=4194304),e}function Ii(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Ci(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oo(e,i,a,l,h,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,R=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var K=31-Ye(a),$=1<<K;T[K]=0,R[K]=-1;var z=L[K];if(z!==null)for(L[K]=null,K=0;K<z.length;K++){var q=z[K];q!==null&&(q.lane&=-536870913)}a&=~$}l!==0&&Wn(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~i))}function Wn(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Ye(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Mo(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Ye(a),h=1<<l;h&i|e[l]&i&&(e[l]|=i),a&=~h}}function ur(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ha(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cr(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:ev(e.type))}function Au(e,i){var a=et.p;try{return et.p=e,i()}finally{et.p=a}}var re=Math.random().toString(36).slice(2),Ie="__reactFiber$"+re,Ee="__reactProps$"+re,Rn="__reactContainer$"+re,Vo="__reactEvents$"+re,tf="__reactListeners$"+re,hr="__reactHandles$"+re,Su="__reactResources$"+re,ps="__reactMarker$"+re;function fr(e){delete e[Ie],delete e[Ee],delete e[Vo],delete e[tf],delete e[hr]}function Ni(e){var i=e[Ie];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Rn]||a[Ie]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=zy(e);e!==null;){if(a=e[Ie])return a;e=zy(e)}return i}e=a,a=e.parentNode}return null}function Jn(e){if(e=e[Ie]||e[Rn]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function ti(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function en(e){var i=e[Su];return i||(i=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pe(e){e[ps]=!0}var Po=new Set,fa={};function zn(e,i){Di(e,i),Di(e+"Capture",i)}function Di(e,i){for(fa[e]=i,e=0;e<i.length;e++)Po.add(i[e])}var wu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},gs={};function Ru(e){return os.call(gs,e)?!0:os.call(bu,e)?!1:wu.test(e)?gs[e]=!0:(bu[e]=!0,!1)}function dr(e,i,a){if(Ru(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function ei(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function ze(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}var _s,Iu;function Oi(e){if(_s===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);_s=i&&i[1]||"",Iu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_s+e+Iu}var da=!1;function ma(e,i){if(!e||da)return"";da=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(q){var z=q}Reflect.construct(e,[],$)}else{try{$.call()}catch(q){z=q}e.call($.prototype)}}else{try{throw Error()}catch(q){z=q}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var R=v.split(`
`),L=T.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===L.length)for(l=R.length-1,h=L.length-1;1<=l&&0<=h&&R[l]!==L[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==L[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==L[h]){var K=`
`+R[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=h);break}}}finally{da=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Oi(a):""}function xo(e){switch(e.tag){case 26:case 27:case 5:return Oi(e.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return ma(e.type,!1);case 11:return ma(e.type.render,!1);case 1:return ma(e.type,!0);case 31:return Oi("Activity");default:return""}}function pa(e){try{var i="";do i+=xo(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ko(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ef(e){var i=ko(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ga(e){e._valueTracker||(e._valueTracker=ef(e))}function Uo(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=ko(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nf=/[\n"\\]/g;function Te(e){return e.replace(nf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function mn(e,i,a,l,h,d,v,T){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),i!=null?v==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+nn(i)):e.value!==""+nn(i)&&(e.value=""+nn(i)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),i!=null?mr(e,v,nn(i)):a!=null?mr(e,v,nn(a)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+nn(T):e.removeAttribute("name")}function vs(e,i,a,l,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function mr(e,i,a){i==="number"&&ys(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Mi(e,i,a,l){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Xt(e,i,a){if(i!=null&&(i=""+nn(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+nn(a):""}function Es(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(qt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=nn(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function In(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Ts=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Ts.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Lo(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Cu(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Cu(e,d,i[d])}function Bo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _a(e){return sf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vi=null;function Cn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,xi=null;function zo(e){var i=Jn(e);if(i&&(e=i.stateNode)){var a=e[Ee]||null;t:switch(e=i.stateNode,i.type){case"input":if(mn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Te(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var h=l[Ee]||null;if(!h)throw Error(s(90));mn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Uo(l)}break t;case"textarea":Xt(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Mi(e,!!a.multiple,i,!1)}}}var ni=!1;function Nu(e,i,a){if(ni)return e(i,a);ni=!0;try{var l=e(i);return l}finally{if(ni=!1,(Pi!==null||xi!==null)&&(Ac(),Pi&&(i=Pi,e=xi,xi=Pi=null,zo(i),e)))for(i=0;i<e.length;i++)zo(e[i])}}function As(e,i){var a=e.stateNode;if(a===null)return null;var l=a[Ee]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(qn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Nn=!1}var ii=null,pr=null,ki=null;function qo(){if(ki)return ki;var e,i=pr,a=i.length,l,h="value"in ii?ii.value:ii.textContent,d=h.length;for(e=0;e<a&&i[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return ki=h.slice(e,1<l?1-l:void 0)}function ri(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function si(){return!0}function jo(){return!1}function Pe(e){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?si:jo,this.isPropagationStopped=jo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),i}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=Pe(Ht),ws=E({},Ht,{view:0,detail:0}),Du=Pe(ws),va,Ea,ai,bs=E({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&e.type==="mousemove"?(va=e.screenX-ai.screenX,Ea=e.screenY-ai.screenY):Ea=va=0,ai=e),va)},movementY:function(e){return"movementY"in e?e.movementY:Ea}}),Dn=Pe(bs),Ou=E({},bs,{dataTransfer:0}),af=Pe(Ou),Rs=E({},ws,{relatedTarget:0}),Ta=Pe(Rs),Ho=E({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Pe(Ho),Mu=E({},Ht,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sa=Pe(Mu),of=E({},Ht,{data:0}),Fo=Pe(of),Is={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Go(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Pu[e])?!!i[e]:!1}function Cs(){return Go}var xu=E({},ws,{key:function(e){if(e.key){var i=Is[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wa=Pe(xu),ku=E({},bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=Pe(ku),Ui=E({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),Uu=Pe(Ui),Lu=E({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bu=Pe(Lu),zu=E({},bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ba=Pe(zu),rn=E({},Ht,{newState:0,oldState:0}),qu=Pe(rn),ju=[9,13,27,32],oi=qn&&"CompositionEvent"in window,c=null;qn&&"documentMode"in document&&(c=document.documentMode);var p=qn&&"TextEvent"in window&&!c,y=qn&&(!oi||c&&8<c&&11>=c),A=" ",k=!1;function j(e,i){switch(e){case"keyup":return ju.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function it(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xt=!1;function Ce(e,i){switch(e){case"compositionend":return it(i);case"keypress":return i.which!==32?null:(k=!0,A);case"textInput":return e=i.data,e===A&&k?null:e;default:return null}}function kt(e,i){if(xt)return e==="compositionend"||!oi&&j(e,i)?(e=qo(),ki=pr=ii=null,xt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var xe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!xe[e.type]:i==="textarea"}function Li(e,i,a,l){Pi?xi?xi.push(l):xi=[l]:Pi=l,i=Cc(i,"onChange"),0<i.length&&(a=new ya("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var qe=null,li=null;function Ko(e){Dy(e,0)}function Hu(e){var i=ti(e);if(Uo(i))return e}function Zp(e,i){if(e==="change")return i}var Wp=!1;if(qn){var lf;if(qn){var uf="oninput"in document;if(!uf){var Jp=document.createElement("div");Jp.setAttribute("oninput","return;"),uf=typeof Jp.oninput=="function"}lf=uf}else lf=!1;Wp=lf&&(!document.documentMode||9<document.documentMode)}function tg(){qe&&(qe.detachEvent("onpropertychange",eg),li=qe=null)}function eg(e){if(e.propertyName==="value"&&Hu(li)){var i=[];Li(i,li,e,Cn(e)),Nu(Ko,i)}}function eS(e,i,a){e==="focusin"?(tg(),qe=i,li=a,qe.attachEvent("onpropertychange",eg)):e==="focusout"&&tg()}function nS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(li)}function iS(e,i){if(e==="click")return Hu(i)}function rS(e,i){if(e==="input"||e==="change")return Hu(i)}function sS(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var pn=typeof Object.is=="function"?Object.is:sS;function Yo(e,i){if(pn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!os.call(i,h)||!pn(e[h],i[h]))return!1}return!0}function ng(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ig(e,i){var a=ng(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=ng(a)}}function rg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?rg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function sg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=ys(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=ys(e.document)}return i}function cf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var aS=qn&&"documentMode"in document&&11>=document.documentMode,Ra=null,hf=null,Xo=null,ff=!1;function ag(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||Ra==null||Ra!==ys(l)||(l=Ra,"selectionStart"in l&&cf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Xo&&Yo(Xo,l)||(Xo=l,l=Cc(hf,"onSelect"),0<l.length&&(i=new ya("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Ra)))}function Ns(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Ia={animationend:Ns("Animation","AnimationEnd"),animationiteration:Ns("Animation","AnimationIteration"),animationstart:Ns("Animation","AnimationStart"),transitionrun:Ns("Transition","TransitionRun"),transitionstart:Ns("Transition","TransitionStart"),transitioncancel:Ns("Transition","TransitionCancel"),transitionend:Ns("Transition","TransitionEnd")},df={},og={};qn&&(og=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Ds(e){if(df[e])return df[e];if(!Ia[e])return e;var i=Ia[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in og)return df[e]=i[a];return e}var lg=Ds("animationend"),ug=Ds("animationiteration"),cg=Ds("animationstart"),oS=Ds("transitionrun"),lS=Ds("transitionstart"),uS=Ds("transitioncancel"),hg=Ds("transitionend"),fg=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function jn(e,i){fg.set(e,i),zn(i,[e])}var dg=new WeakMap;function On(e,i){if(typeof e=="object"&&e!==null){var a=dg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:pa(i)},dg.set(e,i),i)}return{value:e,source:i,stack:pa(i)}}var Mn=[],Ca=0,pf=0;function Fu(){for(var e=Ca,i=pf=Ca=0;i<e;){var a=Mn[i];Mn[i++]=null;var l=Mn[i];Mn[i++]=null;var h=Mn[i];Mn[i++]=null;var d=Mn[i];if(Mn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&mg(a,h,d)}}function Gu(e,i,a,l){Mn[Ca++]=e,Mn[Ca++]=i,Mn[Ca++]=a,Mn[Ca++]=l,pf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function gf(e,i,a,l){return Gu(e,i,a,l),Qu(e)}function Na(e,i){return Gu(e,null,null,i),Qu(e)}function mg(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Ye(a),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Qu(e){if(50<El)throw El=0,Ad=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Da={};function cS(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,i,a,l){return new cS(e,i,a,l)}function _f(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bi(e,i){var a=e.alternate;return a===null?(a=gn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function pg(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ku(e,i,a,l,h,d){var v=0;if(l=e,typeof e=="function")_f(e)&&(v=1);else if(typeof e=="string")v=f1(e,a,mt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case I:return e=gn(31,a,i,h),e.elementType=I,e.lanes=d,e;case F:return Os(a.children,h,d,i);case J:v=8,h|=24;break;case Q:return e=gn(12,a,i,h|2),e.elementType=Q,e.lanes=d,e;case dt:return e=gn(13,a,i,h),e.elementType=dt,e.lanes=d,e;case bt:return e=gn(19,a,i,h),e.elementType=bt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nt:case at:v=10;break t;case st:v=9;break t;case pt:v=11;break t;case V:v=14;break t;case S:v=16,l=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=gn(v,a,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function Os(e,i,a,l){return e=gn(7,e,l,i),e.lanes=a,e}function yf(e,i,a){return e=gn(6,e,null,i),e.lanes=a,e}function vf(e,i,a){return i=gn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Oa=[],Ma=0,Yu=null,Xu=0,Vn=[],Pn=0,Ms=null,zi=1,qi="";function Vs(e,i){Oa[Ma++]=Xu,Oa[Ma++]=Yu,Yu=e,Xu=i}function gg(e,i,a){Vn[Pn++]=zi,Vn[Pn++]=qi,Vn[Pn++]=Ms,Ms=e;var l=zi;e=qi;var h=32-Ye(l)-1;l&=~(1<<h),a+=1;var d=32-Ye(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,zi=1<<32-Ye(i)+h|a<<h|l,qi=d+e}else zi=1<<d|a<<h|l,qi=e}function Ef(e){e.return!==null&&(Vs(e,1),gg(e,1,0))}function Tf(e){for(;e===Yu;)Yu=Oa[--Ma],Oa[Ma]=null,Xu=Oa[--Ma],Oa[Ma]=null;for(;e===Ms;)Ms=Vn[--Pn],Vn[Pn]=null,qi=Vn[--Pn],Vn[Pn]=null,zi=Vn[--Pn],Vn[Pn]=null}var sn=null,he=null,jt=!1,Ps=null,ui=!1,Af=Error(s(519));function xs(e){var i=Error(s(418,""));throw Wo(On(i,e)),Af}function _g(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ie]=e,i[Ee]=l,a){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(a=0;a<Al.length;a++)Dt(Al[a],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":Dt("invalid",i),vs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ga(i);break;case"select":Dt("invalid",i);break;case"textarea":Dt("invalid",i),Es(i,l.value,l.defaultValue,l.children),ga(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Py(i.textContent,a)?(l.popover!=null&&(Dt("beforetoggle",i),Dt("toggle",i)),l.onScroll!=null&&Dt("scroll",i),l.onScrollEnd!=null&&Dt("scrollend",i),l.onClick!=null&&(i.onclick=Nc),i=!0):i=!1,i||xs(e)}function yg(e){for(sn=e.return;sn;)switch(sn.tag){case 5:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:sn=sn.return}}function $o(e){if(e!==sn)return!1;if(!jt)return yg(e),jt=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ld(e.type,e.memoizedProps)),a=!a),a&&he&&xs(e),yg(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){he=Fn(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}he=null}}else i===27?(i=he,Or(e.type)?(e=jd,jd=null,he=e):he=i):he=sn?Fn(e.stateNode.nextSibling):null;return!0}function Zo(){he=sn=null,jt=!1}function vg(){var e=Ps;return e!==null&&(un===null?un=e:un.push.apply(un,e),Ps=null),e}function Wo(e){Ps===null?Ps=[e]:Ps.push(e)}var Sf=W(null),ks=null,ji=null;function gr(e,i,a){tt(Sf,i._currentValue),i._currentValue=a}function Hi(e){e._currentValue=Sf.current,rt(Sf)}function wf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function bf(e,i,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=h;for(var R=0;R<i.length;R++)if(T.context===i[R]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),wf(d.return,a,e),l||(v=null);break t}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),wf(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Jo(e,i,a,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=h.type;pn(h.pendingProps.value,v.value)||(e!==null?e.push(T):e=[T])}}else if(h===Ve.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Cl):e=[Cl])}h=h.return}e!==null&&bf(i,e,a,l),i.flags|=262144}function $u(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){ks=e,ji=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xe(e){return Eg(ks,e)}function Zu(e,i){return ks===null&&Us(e),Eg(e,i)}function Eg(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ji===null){if(e===null)throw Error(s(308));ji=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else ji=ji.next=i;return a}var hS=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},fS=r.unstable_scheduleCallback,dS=r.unstable_NormalPriority,De={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new hS,data:new Map,refCount:0}}function tl(e){e.refCount--,e.refCount===0&&fS(dS,function(){e.controller.abort()})}var el=null,If=0,Va=0,Pa=null;function mS(e,i){if(el===null){var a=el=[];If=0,Va=Nd(),Pa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return If++,i.then(Tg,Tg),i}function Tg(){if(--If===0&&el!==null){Pa!==null&&(Pa.status="fulfilled");var e=el;el=null,Va=0,Pa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function pS(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ag=H.S;H.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mS(e,i),Ag!==null&&Ag(e,i)};var Ls=W(null);function Cf(){var e=Ls.current;return e!==null?e:ee.pooledCache}function Wu(e,i){i===null?tt(Ls,Ls.current):tt(Ls,i.pool)}function Sg(){var e=Cf();return e===null?null:{parent:De._currentValue,pool:e}}var nl=Error(s(460)),wg=Error(s(474)),Ju=Error(s(542)),Nf={then:function(){}};function bg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tc(){}function Rg(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(tc,tc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Cg(e),e;default:if(typeof i.status=="string")i.then(tc,tc);else{if(e=ee,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Cg(e),e}throw il=i,nl}}var il=null;function Ig(){if(il===null)throw Error(s(459));var e=il;return il=null,e}function Cg(e){if(e===nl||e===Ju)throw Error(s(483))}var _r=!1;function Df(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Qt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Qu(e),mg(e,null,a),i}return Gu(e,l,i,a),Qu(e)}function rl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Mo(e,a)}}function Mf(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var Vf=!1;function sl(){if(Vf){var e=Pa;if(e!==null)throw e}}function al(e,i,a,l){Vf=!1;var h=e.updateQueue;_r=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,L=R.next;R.next=null,v===null?d=L:v.next=L,v=R;var K=e.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==v&&(T===null?K.firstBaseUpdate=L:T.next=L,K.lastBaseUpdate=R))}if(d!==null){var $=h.baseState;v=0,K=L=R=null,T=d;do{var z=T.lane&-536870913,q=z!==T.lane;if(q?(Ut&z)===z:(l&z)===z){z!==0&&z===Va&&(Vf=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Et=e,gt=T;z=i;var Wt=a;switch(gt.tag){case 1:if(Et=gt.payload,typeof Et=="function"){$=Et.call(Wt,$,z);break t}$=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=gt.payload,z=typeof Et=="function"?Et.call(Wt,$,z):Et,z==null)break t;$=E({},$,z);break t;case 2:_r=!0}}z=T.callback,z!==null&&(e.flags|=64,q&&(e.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(L=K=q,R=$):K=K.next=q,v|=z;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);K===null&&(R=$),h.baseState=R,h.firstBaseUpdate=L,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),Ir|=v,e.lanes=v,e.memoizedState=$}}function Ng(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Dg(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Ng(a[e],i)}var xa=W(null),ec=W(0);function Og(e,i){e=$i,tt(ec,e),tt(xa,i),$i=e|i.baseLanes}function Pf(){tt(ec,$i),tt(xa,xa.current)}function xf(){$i=ec.current,rt(xa),rt(ec)}var Er=0,Rt=null,$t=null,Ae=null,nc=!1,ka=!1,Bs=!1,ic=0,ol=0,Ua=null,gS=0;function ge(){throw Error(s(321))}function kf(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!pn(e[a],i[a]))return!1;return!0}function Uf(e,i,a,l,h,d){return Er=d,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,H.H=e===null||e.memoizedState===null?m_:p_,Bs=!1,d=a(l,h),Bs=!1,ka&&(d=Vg(i,a,l,h)),Mg(e),d}function Mg(e){H.H=uc;var i=$t!==null&&$t.next!==null;if(Er=0,Ae=$t=Rt=null,nc=!1,ol=0,Ua=null,i)throw Error(s(300));e===null||ke||(e=e.dependencies,e!==null&&$u(e)&&(ke=!0))}function Vg(e,i,a,l){Rt=e;var h=0;do{if(ka&&(Ua=null),ol=0,ka=!1,25<=h)throw Error(s(301));if(h+=1,Ae=$t=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}H.H=SS,d=i(a,l)}while(ka);return d}function _S(){var e=H.H,i=e.useState()[0];return i=typeof i.then=="function"?ll(i):i,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(Rt.flags|=1024),i}function Lf(){var e=ic!==0;return ic=0,e}function Bf(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function zf(e){if(nc){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}nc=!1}Er=0,Ae=$t=Rt=null,ka=!1,ol=ic=0,Ua=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?Rt.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function Se(){if($t===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var i=Ae===null?Rt.memoizedState:Ae.next;if(i!==null)Ae=i,$t=e;else{if(e===null)throw Rt.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ae===null?Rt.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(e){var i=ol;return ol+=1,Ua===null&&(Ua=[]),e=Rg(Ua,e,i),i=Rt,(Ae===null?i.memoizedState:Ae.next)===null&&(i=i.alternate,H.H=i===null||i.memoizedState===null?m_:p_),e}function rc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ll(e);if(e.$$typeof===at)return Xe(e)}throw Error(s(438,String(e)))}function jf(e){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=qf(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=O;return i.index++,a}function Fi(e,i){return typeof i=="function"?i(e):i}function sc(e){var i=Se();return Hf(i,$t,e)}function Hf(e,i,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var T=v=null,R=null,L=i,K=!1;do{var $=L.lane&-536870913;if($!==L.lane?(Ut&$)===$:(Er&$)===$){var z=L.revertLane;if(z===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===Va&&(K=!0);else if((Er&z)===z){L=L.next,z===Va&&(K=!0);continue}else $={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(T=R=$,v=d):R=R.next=$,Rt.lanes|=z,Ir|=z;$=L.action,Bs&&a(d,$),d=L.hasEagerState?L.eagerState:a(d,$)}else z={lane:$,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},R===null?(T=R=z,v=d):R=R.next=z,Rt.lanes|=$,Ir|=$;L=L.next}while(L!==null&&L!==i);if(R===null?v=d:R.next=T,!pn(d,e.memoizedState)&&(ke=!0,K&&(a=Pa,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=R,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Ff(e){var i=Se(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=e(d,v.action),v=v.next;while(v!==h);pn(d,i.memoizedState)||(ke=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Pg(e,i,a){var l=Rt,h=Se(),d=jt;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!pn(($t||h).memoizedState,a);v&&(h.memoizedState=a,ke=!0),h=h.queue;var T=Ug.bind(null,l,h,e);if(ul(2048,8,T,[e]),h.getSnapshot!==i||v||Ae!==null&&Ae.memoizedState.tag&1){if(l.flags|=2048,La(9,ac(),kg.bind(null,l,h,a,i),null),ee===null)throw Error(s(349));d||(Er&124)!==0||xg(l,i,a)}return a}function xg(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=qf(),Rt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function kg(e,i,a,l){i.value=a,i.getSnapshot=l,Lg(i)&&Bg(e)}function Ug(e,i,a){return a(function(){Lg(i)&&Bg(e)})}function Lg(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!pn(e,a)}catch{return!0}}function Bg(e){var i=Na(e,2);i!==null&&Tn(i,e,2)}function Gf(e){var i=on();if(typeof e=="function"){var a=e;if(e=a(),Bs){dn(!0);try{a()}finally{dn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},i}function zg(e,i,a,l){return e.baseState=a,Hf(e,$t,typeof l=="function"?l:Fi)}function yS(e,i,a,l,h){if(lc(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};H.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,qg(i,d)):(d.next=a.next,i.pending=a.next=d)}}function qg(e,i){var a=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=H.T,v={};H.T=v;try{var T=a(h,l),R=H.S;R!==null&&R(v,T),jg(e,i,T)}catch(L){Qf(e,i,L)}finally{H.T=d}}else try{d=a(h,l),jg(e,i,d)}catch(L){Qf(e,i,L)}}function jg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Hg(e,i,l)},function(l){return Qf(e,i,l)}):Hg(e,i,a)}function Hg(e,i,a){i.status="fulfilled",i.value=a,Fg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,qg(e,a)))}function Qf(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Fg(i),i=i.next;while(i!==l)}e.action=null}function Fg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Gg(e,i){return i}function Qg(e,i){if(jt){var a=ee.formState;if(a!==null){t:{var l=Rt;if(jt){if(he){e:{for(var h=he,d=ui;h.nodeType!==8;){if(!d){h=null;break e}if(h=Fn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){he=Fn(h.nextSibling),l=h.data==="F!";break t}}xs(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gg,lastRenderedState:i},a.queue=l,a=h_.bind(null,Rt,l),l.dispatch=a,l=Gf(!1),d=Zf.bind(null,Rt,!1,l.queue),l=on(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,a=yS.bind(null,Rt,h,d,a),h.dispatch=a,l.memoizedState=e,[i,a,!1]}function Kg(e){var i=Se();return Yg(i,$t,e)}function Yg(e,i,a){if(i=Hf(e,i,Gg)[0],e=sc(Fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ll(i)}catch(v){throw v===nl?Ju:v}else l=i;i=Se();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,La(9,ac(),vS.bind(null,h,a),null)),[l,d,e]}function vS(e,i){e.action=i}function Xg(e){var i=Se(),a=$t;if(a!==null)return Yg(i,a,e);Se(),i=i.memoizedState,a=Se();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function La(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=qf(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function ac(){return{destroy:void 0,resource:void 0}}function $g(){return Se().memoizedState}function oc(e,i,a,l){var h=on();l=l===void 0?null:l,Rt.flags|=e,h.memoizedState=La(1|i,ac(),a,l)}function ul(e,i,a,l){var h=Se();l=l===void 0?null:l;var d=h.memoizedState.inst;$t!==null&&l!==null&&kf(l,$t.memoizedState.deps)?h.memoizedState=La(i,d,a,l):(Rt.flags|=e,h.memoizedState=La(1|i,d,a,l))}function Zg(e,i){oc(8390656,8,e,i)}function Wg(e,i){ul(2048,8,e,i)}function Jg(e,i){return ul(4,2,e,i)}function t_(e,i){return ul(4,4,e,i)}function e_(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function n_(e,i,a){a=a!=null?a.concat([e]):null,ul(4,4,e_.bind(null,i,e),a)}function Kf(){}function i_(e,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&kf(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function r_(e,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&kf(i,l[1]))return l[0];if(l=e(),Bs){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[l,i],l}function Yf(e,i,a){return a===void 0||(Er&1073741824)!==0?e.memoizedState=i:(e.memoizedState=a,e=oy(),Rt.lanes|=e,Ir|=e,a)}function s_(e,i,a,l){return pn(a,i)?a:xa.current!==null?(e=Yf(e,a,l),pn(e,i)||(ke=!0),e):(Er&42)===0?(ke=!0,e.memoizedState=a):(e=oy(),Rt.lanes|=e,Ir|=e,i)}function a_(e,i,a,l,h){var d=et.p;et.p=d!==0&&8>d?d:8;var v=H.T,T={};H.T=T,Zf(e,!1,i,a);try{var R=h(),L=H.S;if(L!==null&&L(T,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var K=pS(R,l);cl(e,i,K,En(e))}else cl(e,i,l,En(e))}catch($){cl(e,i,{then:function(){},status:"rejected",reason:$},En())}finally{et.p=d,H.T=v}}function ES(){}function Xf(e,i,a,l){if(e.tag!==5)throw Error(s(476));var h=o_(e).queue;a_(e,h,i,ct,a===null?ES:function(){return l_(e),a(l)})}function o_(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function l_(e){var i=o_(e).next.queue;cl(e,i,{},En())}function $f(){return Xe(Cl)}function u_(){return Se().memoizedState}function c_(){return Se().memoizedState}function TS(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=En();e=yr(a);var l=vr(i,e,a);l!==null&&(Tn(l,i,a),rl(l,i,a)),i={cache:Rf()},e.payload=i;return}i=i.return}}function AS(e,i,a){var l=En();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},lc(e)?f_(i,a):(a=gf(e,i,a,l),a!==null&&(Tn(a,e,l),d_(a,i,l)))}function h_(e,i,a){var l=En();cl(e,i,a,l)}function cl(e,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(lc(e))f_(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,pn(T,v))return Gu(e,i,h,0),ee===null&&Fu(),!1}catch{}finally{}if(a=gf(e,i,h,l),a!==null)return Tn(a,e,l),d_(a,i,l),!0}return!1}function Zf(e,i,a,l){if(l={lane:2,revertLane:Nd(),action:l,hasEagerState:!1,eagerState:null,next:null},lc(e)){if(i)throw Error(s(479))}else i=gf(e,a,l,2),i!==null&&Tn(i,e,2)}function lc(e){var i=e.alternate;return e===Rt||i!==null&&i===Rt}function f_(e,i){ka=nc=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function d_(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Mo(e,a)}}var uc={readContext:Xe,use:rc,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},m_={readContext:Xe,use:rc,useCallback:function(e,i){return on().memoizedState=[e,i===void 0?null:i],e},useContext:Xe,useEffect:Zg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,oc(4194308,4,e_.bind(null,i,e),a)},useLayoutEffect:function(e,i){return oc(4194308,4,e,i)},useInsertionEffect:function(e,i){oc(4,2,e,i)},useMemo:function(e,i){var a=on();i=i===void 0?null:i;var l=e();if(Bs){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=on();if(a!==void 0){var h=a(i);if(Bs){dn(!0);try{a(i)}finally{dn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=AS.bind(null,Rt,e),[l.memoizedState,e]},useRef:function(e){var i=on();return e={current:e},i.memoizedState=e},useState:function(e){e=Gf(e);var i=e.queue,a=h_.bind(null,Rt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Kf,useDeferredValue:function(e,i){var a=on();return Yf(a,e,i)},useTransition:function(){var e=Gf(!1);return e=a_.bind(null,Rt,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Rt,h=on();if(jt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),ee===null)throw Error(s(349));(Ut&124)!==0||xg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Zg(Ug.bind(null,l,d,e),[e]),l.flags|=2048,La(9,ac(),kg.bind(null,l,d,a,i),null),a},useId:function(){var e=on(),i=ee.identifierPrefix;if(jt){var a=qi,l=zi;a=(l&~(1<<32-Ye(l)-1)).toString(32)+a,i=""+i+"R"+a,a=ic++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=gS++,i=""+i+"r"+a.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:$f,useFormState:Qg,useActionState:Qg,useOptimistic:function(e){var i=on();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Zf.bind(null,Rt,!0,a),a.dispatch=i,[e,i]},useMemoCache:jf,useCacheRefresh:function(){return on().memoizedState=TS.bind(null,Rt)}},p_={readContext:Xe,use:rc,useCallback:i_,useContext:Xe,useEffect:Wg,useImperativeHandle:n_,useInsertionEffect:Jg,useLayoutEffect:t_,useMemo:r_,useReducer:sc,useRef:$g,useState:function(){return sc(Fi)},useDebugValue:Kf,useDeferredValue:function(e,i){var a=Se();return s_(a,$t.memoizedState,e,i)},useTransition:function(){var e=sc(Fi)[0],i=Se().memoizedState;return[typeof e=="boolean"?e:ll(e),i]},useSyncExternalStore:Pg,useId:u_,useHostTransitionStatus:$f,useFormState:Kg,useActionState:Kg,useOptimistic:function(e,i){var a=Se();return zg(a,$t,e,i)},useMemoCache:jf,useCacheRefresh:c_},SS={readContext:Xe,use:rc,useCallback:i_,useContext:Xe,useEffect:Wg,useImperativeHandle:n_,useInsertionEffect:Jg,useLayoutEffect:t_,useMemo:r_,useReducer:Ff,useRef:$g,useState:function(){return Ff(Fi)},useDebugValue:Kf,useDeferredValue:function(e,i){var a=Se();return $t===null?Yf(a,e,i):s_(a,$t.memoizedState,e,i)},useTransition:function(){var e=Ff(Fi)[0],i=Se().memoizedState;return[typeof e=="boolean"?e:ll(e),i]},useSyncExternalStore:Pg,useId:u_,useHostTransitionStatus:$f,useFormState:Xg,useActionState:Xg,useOptimistic:function(e,i){var a=Se();return $t!==null?zg(a,$t,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:c_},Ba=null,hl=0;function cc(e){var i=hl;return hl+=1,Ba===null&&(Ba=[]),Rg(Ba,e,i)}function fl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function hc(e,i){throw i.$$typeof===w?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function g_(e){var i=e._init;return i(e._payload)}function __(e){function i(x,D){if(e){var U=x.deletions;U===null?(x.deletions=[D],x.flags|=16):U.push(D)}}function a(x,D){if(!e)return null;for(;D!==null;)i(x,D),D=D.sibling;return null}function l(x){for(var D=new Map;x!==null;)x.key!==null?D.set(x.key,x):D.set(x.index,x),x=x.sibling;return D}function h(x,D){return x=Bi(x,D),x.index=0,x.sibling=null,x}function d(x,D,U){return x.index=U,e?(U=x.alternate,U!==null?(U=U.index,U<D?(x.flags|=67108866,D):U):(x.flags|=67108866,D)):(x.flags|=1048576,D)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function T(x,D,U,Y){return D===null||D.tag!==6?(D=yf(U,x.mode,Y),D.return=x,D):(D=h(D,U),D.return=x,D)}function R(x,D,U,Y){var ut=U.type;return ut===F?K(x,D,U.props.children,Y,U.key):D!==null&&(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&g_(ut)===D.type)?(D=h(D,U.props),fl(D,U),D.return=x,D):(D=Ku(U.type,U.key,U.props,null,x.mode,Y),fl(D,U),D.return=x,D)}function L(x,D,U,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=vf(U,x.mode,Y),D.return=x,D):(D=h(D,U.children||[]),D.return=x,D)}function K(x,D,U,Y,ut){return D===null||D.tag!==7?(D=Os(U,x.mode,Y,ut),D.return=x,D):(D=h(D,U),D.return=x,D)}function $(x,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=yf(""+D,x.mode,U),D.return=x,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return U=Ku(D.type,D.key,D.props,null,x.mode,U),fl(U,D),U.return=x,U;case B:return D=vf(D,x.mode,U),D.return=x,D;case S:var Y=D._init;return D=Y(D._payload),$(x,D,U)}if(qt(D)||P(D))return D=Os(D,x.mode,U,null),D.return=x,D;if(typeof D.then=="function")return $(x,cc(D),U);if(D.$$typeof===at)return $(x,Zu(x,D),U);hc(x,D)}return null}function z(x,D,U,Y){var ut=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ut!==null?null:T(x,D,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===ut?R(x,D,U,Y):null;case B:return U.key===ut?L(x,D,U,Y):null;case S:return ut=U._init,U=ut(U._payload),z(x,D,U,Y)}if(qt(U)||P(U))return ut!==null?null:K(x,D,U,Y,null);if(typeof U.then=="function")return z(x,D,cc(U),Y);if(U.$$typeof===at)return z(x,D,Zu(x,U),Y);hc(x,U)}return null}function q(x,D,U,Y,ut){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return x=x.get(U)||null,T(D,x,""+Y,ut);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case b:return x=x.get(Y.key===null?U:Y.key)||null,R(D,x,Y,ut);case B:return x=x.get(Y.key===null?U:Y.key)||null,L(D,x,Y,ut);case S:var Ct=Y._init;return Y=Ct(Y._payload),q(x,D,U,Y,ut)}if(qt(Y)||P(Y))return x=x.get(U)||null,K(D,x,Y,ut,null);if(typeof Y.then=="function")return q(x,D,U,cc(Y),ut);if(Y.$$typeof===at)return q(x,D,U,Zu(D,Y),ut);hc(D,Y)}return null}function Et(x,D,U,Y){for(var ut=null,Ct=null,ht=D,_t=D=0,Le=null;ht!==null&&_t<U.length;_t++){ht.index>_t?(Le=ht,ht=null):Le=ht.sibling;var zt=z(x,ht,U[_t],Y);if(zt===null){ht===null&&(ht=Le);break}e&&ht&&zt.alternate===null&&i(x,ht),D=d(zt,D,_t),Ct===null?ut=zt:Ct.sibling=zt,Ct=zt,ht=Le}if(_t===U.length)return a(x,ht),jt&&Vs(x,_t),ut;if(ht===null){for(;_t<U.length;_t++)ht=$(x,U[_t],Y),ht!==null&&(D=d(ht,D,_t),Ct===null?ut=ht:Ct.sibling=ht,Ct=ht);return jt&&Vs(x,_t),ut}for(ht=l(ht);_t<U.length;_t++)Le=q(ht,x,_t,U[_t],Y),Le!==null&&(e&&Le.alternate!==null&&ht.delete(Le.key===null?_t:Le.key),D=d(Le,D,_t),Ct===null?ut=Le:Ct.sibling=Le,Ct=Le);return e&&ht.forEach(function(kr){return i(x,kr)}),jt&&Vs(x,_t),ut}function gt(x,D,U,Y){if(U==null)throw Error(s(151));for(var ut=null,Ct=null,ht=D,_t=D=0,Le=null,zt=U.next();ht!==null&&!zt.done;_t++,zt=U.next()){ht.index>_t?(Le=ht,ht=null):Le=ht.sibling;var kr=z(x,ht,zt.value,Y);if(kr===null){ht===null&&(ht=Le);break}e&&ht&&kr.alternate===null&&i(x,ht),D=d(kr,D,_t),Ct===null?ut=kr:Ct.sibling=kr,Ct=kr,ht=Le}if(zt.done)return a(x,ht),jt&&Vs(x,_t),ut;if(ht===null){for(;!zt.done;_t++,zt=U.next())zt=$(x,zt.value,Y),zt!==null&&(D=d(zt,D,_t),Ct===null?ut=zt:Ct.sibling=zt,Ct=zt);return jt&&Vs(x,_t),ut}for(ht=l(ht);!zt.done;_t++,zt=U.next())zt=q(ht,x,_t,zt.value,Y),zt!==null&&(e&&zt.alternate!==null&&ht.delete(zt.key===null?_t:zt.key),D=d(zt,D,_t),Ct===null?ut=zt:Ct.sibling=zt,Ct=zt);return e&&ht.forEach(function(w1){return i(x,w1)}),jt&&Vs(x,_t),ut}function Wt(x,D,U,Y){if(typeof U=="object"&&U!==null&&U.type===F&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:t:{for(var ut=U.key;D!==null;){if(D.key===ut){if(ut=U.type,ut===F){if(D.tag===7){a(x,D.sibling),Y=h(D,U.props.children),Y.return=x,x=Y;break t}}else if(D.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&g_(ut)===D.type){a(x,D.sibling),Y=h(D,U.props),fl(Y,U),Y.return=x,x=Y;break t}a(x,D);break}else i(x,D);D=D.sibling}U.type===F?(Y=Os(U.props.children,x.mode,Y,U.key),Y.return=x,x=Y):(Y=Ku(U.type,U.key,U.props,null,x.mode,Y),fl(Y,U),Y.return=x,x=Y)}return v(x);case B:t:{for(ut=U.key;D!==null;){if(D.key===ut)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){a(x,D.sibling),Y=h(D,U.children||[]),Y.return=x,x=Y;break t}else{a(x,D);break}else i(x,D);D=D.sibling}Y=vf(U,x.mode,Y),Y.return=x,x=Y}return v(x);case S:return ut=U._init,U=ut(U._payload),Wt(x,D,U,Y)}if(qt(U))return Et(x,D,U,Y);if(P(U)){if(ut=P(U),typeof ut!="function")throw Error(s(150));return U=ut.call(U),gt(x,D,U,Y)}if(typeof U.then=="function")return Wt(x,D,cc(U),Y);if(U.$$typeof===at)return Wt(x,D,Zu(x,U),Y);hc(x,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(a(x,D.sibling),Y=h(D,U),Y.return=x,x=Y):(a(x,D),Y=yf(U,x.mode,Y),Y.return=x,x=Y),v(x)):a(x,D)}return function(x,D,U,Y){try{hl=0;var ut=Wt(x,D,U,Y);return Ba=null,ut}catch(ht){if(ht===nl||ht===Ju)throw ht;var Ct=gn(29,ht,null,x.mode);return Ct.lanes=Y,Ct.return=x,Ct}finally{}}}var za=__(!0),y_=__(!1),xn=W(null),ci=null;function Tr(e){var i=e.alternate;tt(Oe,Oe.current&1),tt(xn,e),ci===null&&(i===null||xa.current!==null||i.memoizedState!==null)&&(ci=e)}function v_(e){if(e.tag===22){if(tt(Oe,Oe.current),tt(xn,e),ci===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ci=e)}}else Ar()}function Ar(){tt(Oe,Oe.current),tt(xn,xn.current)}function Gi(e){rt(xn),ci===e&&(ci=null),rt(Oe)}var Oe=W(0);function fc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||qd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Wf(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Jf={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=En(),h=yr(l);h.payload=i,a!=null&&(h.callback=a),i=vr(e,h,l),i!==null&&(Tn(i,e,l),rl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=En(),h=yr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=vr(e,h,l),i!==null&&(Tn(i,e,l),rl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=En(),l=yr(a);l.tag=2,i!=null&&(l.callback=i),i=vr(e,l,a),i!==null&&(Tn(i,e,a),rl(i,e,a))}};function E_(e,i,a,l,h,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Yo(a,l)||!Yo(h,d):!0}function T_(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Jf.enqueueReplaceState(i,i.state,null)}function zs(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=E({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var dc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function A_(e){dc(e)}function S_(e){console.error(e)}function w_(e){dc(e)}function mc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function b_(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function td(e,i,a){return a=yr(a),a.tag=3,a.payload={element:null},a.callback=function(){mc(e,i)},a}function R_(e){return e=yr(e),e.tag=3,e}function I_(e,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){b_(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){b_(i,a,l),typeof h!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function wS(e,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Jo(i,a,h,!0),a=xn.current,a!==null){switch(a.tag){case 13:return ci===null?wd():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Nf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Rd(e,l,h)),!1;case 22:return a.flags|=65536,l===Nf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Rd(e,l,h)),!1}throw Error(s(435,a.tag))}return Rd(e,l,h),wd(),!1}if(jt)return i=xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Af&&(e=Error(s(422),{cause:l}),Wo(On(e,a)))):(l!==Af&&(i=Error(s(423),{cause:l}),Wo(On(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=On(l,a),h=td(e.stateNode,l,h),Mf(e,h),fe!==4&&(fe=2)),!1;var d=Error(s(520),{cause:l});if(d=On(d,a),vl===null?vl=[d]:vl.push(d),fe!==4&&(fe=2),i===null)return!0;l=On(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=td(a.stateNode,l,e),Mf(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cr===null||!Cr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=R_(h),I_(h,e,a,l),Mf(a,h),!1}a=a.return}while(a!==null);return!1}var C_=Error(s(461)),ke=!1;function je(e,i,a,l){i.child=e===null?y_(i,null,a,l):za(i,e.child,a,l)}function N_(e,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Us(i),l=Uf(e,i,a,v,d,h),T=Lf(),e!==null&&!ke?(Bf(e,i,h),Qi(e,i,h)):(jt&&T&&Ef(i),i.flags|=1,je(e,i,l,h),i.child)}function D_(e,i,a,l,h){if(e===null){var d=a.type;return typeof d=="function"&&!_f(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,O_(e,i,d,l,h)):(e=Ku(a.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!ld(e,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Yo,a(v,l)&&e.ref===i.ref)return Qi(e,i,h)}return i.flags|=1,e=Bi(d,l),e.ref=i.ref,e.return=i,i.child=e}function O_(e,i,a,l,h){if(e!==null){var d=e.memoizedProps;if(Yo(d,l)&&e.ref===i.ref)if(ke=!1,i.pendingProps=l=d,ld(e,h))(e.flags&131072)!==0&&(ke=!0);else return i.lanes=e.lanes,Qi(e,i,h)}return ed(e,i,a,l,h)}function M_(e,i,a){var l=i.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return V_(e,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wu(i,d!==null?d.cachePool:null),d!==null?Og(i,d):Pf(),v_(i);else return i.lanes=i.childLanes=536870912,V_(e,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Wu(i,d.cachePool),Og(i,d),Ar(),i.memoizedState=null):(e!==null&&Wu(i,null),Pf(),Ar());return je(e,i,h,a),i.child}function V_(e,i,a,l){var h=Cf();return h=h===null?null:{parent:De._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&Wu(i,null),Pf(),v_(i),e!==null&&Jo(e,i,l,!0),null}function pc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function ed(e,i,a,l,h){return Us(i),a=Uf(e,i,a,l,void 0,h),l=Lf(),e!==null&&!ke?(Bf(e,i,h),Qi(e,i,h)):(jt&&l&&Ef(i),i.flags|=1,je(e,i,a,h),i.child)}function P_(e,i,a,l,h,d){return Us(i),i.updateQueue=null,a=Vg(i,l,a,h),Mg(e),l=Lf(),e!==null&&!ke?(Bf(e,i,d),Qi(e,i,d)):(jt&&l&&Ef(i),i.flags|=1,je(e,i,a,d),i.child)}function x_(e,i,a,l,h){if(Us(i),i.stateNode===null){var d=Da,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xe(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Jf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Df(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xe(v):Da,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Wf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Jf.enqueueReplaceState(d,d.state,null),al(i,l,d,h),sl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,R=zs(a,T);d.props=R;var L=d.context,K=a.contextType;v=Da,typeof K=="object"&&K!==null&&(v=Xe(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||L!==v)&&T_(i,d,l,v),_r=!1;var z=i.memoizedState;d.state=z,al(i,l,d,h),sl(),L=i.memoizedState,T||z!==L||_r?(typeof $=="function"&&(Wf(i,a,$,l),L=i.memoizedState),(R=_r||E_(i,a,R,l,z,L,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=L),d.props=l,d.state=L,d.context=v,l=R):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Of(e,i),v=i.memoizedProps,K=zs(a,v),d.props=K,$=i.pendingProps,z=d.context,L=a.contextType,R=Da,typeof L=="object"&&L!==null&&(R=Xe(L)),T=a.getDerivedStateFromProps,(L=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||z!==R)&&T_(i,d,l,R),_r=!1,z=i.memoizedState,d.state=z,al(i,l,d,h),sl();var q=i.memoizedState;v!==$||z!==q||_r||e!==null&&e.dependencies!==null&&$u(e.dependencies)?(typeof T=="function"&&(Wf(i,a,T,l),q=i.memoizedState),(K=_r||E_(i,a,K,l,z,q,R)||e!==null&&e.dependencies!==null&&$u(e.dependencies))?(L||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,q,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,q,R)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=q),d.props=l,d.state=q,d.context=R,l=K):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,pc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=za(i,e.child,null,h),i.child=za(i,null,a,h)):je(e,i,a,h),i.memoizedState=d.state,e=i.child):e=Qi(e,i,h),e}function k_(e,i,a,l){return Zo(),i.flags|=256,je(e,i,a,l),i.child}var nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function id(e){return{baseLanes:e,cachePool:Sg()}}function rd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=kn),e}function U_(e,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(Oe.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,e===null){if(jt){if(h?Tr(i):Ar(),jt){var T=he,R;if(R=T){t:{for(R=T,T=ui;R.nodeType!==8;){if(!T){T=null;break t}if(R=Fn(R.nextSibling),R===null){T=null;break t}}T=R}T!==null?(i.memoizedState={dehydrated:T,treeContext:Ms!==null?{id:zi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},R=gn(18,null,null,0),R.stateNode=T,R.return=i,i.child=R,sn=i,he=null,R=!0):R=!1}R||xs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return qd(T)?i.lanes=32:i.lanes=536870912,null;Gi(i)}return T=l.children,l=l.fallback,h?(Ar(),h=i.mode,T=gc({mode:"hidden",children:T},h),l=Os(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=id(a),h.childLanes=rd(e,v,a),i.memoizedState=nd,l):(Tr(i),sd(i,T))}if(R=e.memoizedState,R!==null&&(T=R.dehydrated,T!==null)){if(d)i.flags&256?(Tr(i),i.flags&=-257,i=ad(e,i,a)):i.memoizedState!==null?(Ar(),i.child=e.child,i.flags|=128,i=null):(Ar(),h=l.fallback,T=i.mode,l=gc({mode:"visible",children:l.children},T),h=Os(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,za(i,e.child,null,a),l=i.child,l.memoizedState=id(a),l.childLanes=rd(e,v,a),i.memoizedState=nd,i=h);else if(Tr(i),qd(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var L=v.dgst;v=L,l=Error(s(419)),l.stack="",l.digest=v,Wo({value:l,source:null,stack:null}),i=ad(e,i,a)}else if(ke||Jo(e,i,a,!1),v=(a&e.childLanes)!==0,ke||v){if(v=ee,v!==null&&(l=a&-a,l=(l&42)!==0?1:ur(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Na(e,l),Tn(v,e,l),C_;T.data==="$?"||wd(),i=ad(e,i,a)}else T.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,he=Fn(T.nextSibling),sn=i,jt=!0,Ps=null,ui=!1,e!==null&&(Vn[Pn++]=zi,Vn[Pn++]=qi,Vn[Pn++]=Ms,zi=e.id,qi=e.overflow,Ms=i),i=sd(i,l.children),i.flags|=4096);return i}return h?(Ar(),h=l.fallback,T=i.mode,R=e.child,L=R.sibling,l=Bi(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,L!==null?h=Bi(L,h):(h=Os(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=e.child.memoizedState,T===null?T=id(a):(R=T.cachePool,R!==null?(L=De._currentValue,R=R.parent!==L?{parent:L,pool:L}:R):R=Sg(),T={baseLanes:T.baseLanes|a,cachePool:R}),h.memoizedState=T,h.childLanes=rd(e,v,a),i.memoizedState=nd,l):(Tr(i),a=e.child,e=a.sibling,a=Bi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(v=i.deletions,v===null?(i.deletions=[e],i.flags|=16):v.push(e)),i.child=a,i.memoizedState=null,a)}function sd(e,i){return i=gc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function gc(e,i){return e=gn(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ad(e,i,a){return za(i,e.child,null,a),e=sd(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function L_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),wf(e.return,i,a)}function od(e,i,a,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function B_(e,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(je(e,i,l.children,a),l=Oe.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L_(e,a,i);else if(e.tag===19)L_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(tt(Oe,l),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&fc(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),od(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&fc(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}od(i,!0,a,null,d);break;case"together":od(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Qi(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Ir|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Jo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Bi(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Bi(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function ld(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&$u(e)))}function bS(e,i,a){switch(i.tag){case 3:te(i,i.stateNode.containerInfo),gr(i,De,e.memoizedState.cache),Zo();break;case 27:case 5:lr(i);break;case 4:te(i,i.stateNode.containerInfo);break;case 10:gr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Tr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?U_(e,i,a):(Tr(i),e=Qi(e,i,a),e!==null?e.sibling:null);Tr(i);break;case 19:var h=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Jo(e,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return B_(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),tt(Oe,Oe.current),l)break;return null;case 22:case 23:return i.lanes=0,M_(e,i,a);case 24:gr(i,De,e.memoizedState.cache)}return Qi(e,i,a)}function z_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ke=!0;else{if(!ld(e,a)&&(i.flags&128)===0)return ke=!1,bS(e,i,a);ke=(e.flags&131072)!==0}else ke=!1,jt&&(i.flags&1048576)!==0&&gg(i,Xu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")_f(l)?(e=zs(l,e),i.tag=1,i=x_(null,i,l,e,a)):(i.tag=0,i=ed(null,i,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===pt){i.tag=11,i=N_(null,i,l,e,a);break t}else if(h===V){i.tag=14,i=D_(null,i,l,e,a);break t}}throw i=Yt(l)||l,Error(s(306,i,""))}}return i;case 0:return ed(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=zs(l,i.pendingProps),x_(e,i,l,h,a);case 3:t:{if(te(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Of(e,i),al(i,l,null,a);var v=i.memoizedState;if(l=v.cache,gr(i,De,l),l!==d.cache&&bf(i,[De],a,!0),sl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=k_(e,i,l,a);break t}else if(l!==h){h=On(Error(s(424)),i),Wo(h),i=k_(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=Fn(e.firstChild),sn=i,jt=!0,Ps=null,ui=!0,a=y_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zo(),l===h){i=Qi(e,i,a);break t}je(e,i,l,a)}i=i.child}return i;case 26:return pc(e,i),e===null?(a=Fy(i.type,null,i.pendingProps,null))?i.memoizedState=a:jt||(a=i.type,e=i.pendingProps,l=Dc(Tt.current).createElement(a),l[Ie]=i,l[Ee]=e,Fe(l,a,e),pe(l),i.stateNode=l):i.memoizedState=Fy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return lr(i),e===null&&jt&&(l=i.stateNode=qy(i.type,i.pendingProps,Tt.current),sn=i,ui=!0,h=he,Or(i.type)?(jd=h,he=Fn(l.firstChild)):he=h),je(e,i,i.pendingProps.children,a),pc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&jt&&((h=l=he)&&(l=JS(l,i.type,i.pendingProps,ui),l!==null?(i.stateNode=l,sn=i,he=Fn(l.firstChild),ui=!1,h=!0):h=!1),h||xs(i)),lr(i),h=i.type,d=i.pendingProps,v=e!==null?e.memoizedProps:null,l=d.children,Ld(h,d)?l=null:v!==null&&Ld(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=Uf(e,i,_S,null,null,a),Cl._currentValue=h),pc(e,i),je(e,i,l,a),i.child;case 6:return e===null&&jt&&((e=a=he)&&(a=t1(a,i.pendingProps,ui),a!==null?(i.stateNode=a,sn=i,he=null,e=!0):e=!1),e||xs(i)),null;case 13:return U_(e,i,a);case 4:return te(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=za(i,null,l,a):je(e,i,l,a),i.child;case 11:return N_(e,i,i.type,i.pendingProps,a);case 7:return je(e,i,i.pendingProps,a),i.child;case 8:return je(e,i,i.pendingProps.children,a),i.child;case 12:return je(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,gr(i,i.type,l.value),je(e,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Us(i),h=Xe(h),l=l(h),i.flags|=1,je(e,i,l,a),i.child;case 14:return D_(e,i,i.type,i.pendingProps,a);case 15:return O_(e,i,i.type,i.pendingProps,a);case 19:return B_(e,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},e===null?(a=gc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Bi(e.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return M_(e,i,a);case 24:return Us(i),l=Xe(De),e===null?(h=Cf(),h===null&&(h=ee,d=Rf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Df(i),gr(i,De,h)):((e.lanes&a)!==0&&(Of(e,i),al(i,null,null,a),sl()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),gr(i,De,l)):(l=d.cache,gr(i,De,l),l!==h.cache&&bf(i,[De],a,!0))),je(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Ki(e){e.flags|=4}function q_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Xy(i)){if(i=xn.current,i!==null&&((Ut&4194048)===Ut?ci!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||i!==ci))throw il=Nf,wg;e.flags|=8192}}function _c(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Do():536870912,e.lanes|=i,Fa|=i)}function dl(e,i){if(!jt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function oe(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function RS(e,i,a){var l=i.pendingProps;switch(Tf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Hi(De),Zn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&($o(i)?Ki(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,vg())),oe(i),null;case 26:return a=i.memoizedState,e===null?(Ki(i),a!==null?(oe(i),q_(i,a)):(oe(i),i.flags&=-16777217)):a?a!==e.memoizedState?(Ki(i),oe(i),q_(i,a)):(oe(i),i.flags&=-16777217):(e.memoizedProps!==l&&Ki(i),oe(i),i.flags&=-16777217),null;case 27:Ri(i),a=Tt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return oe(i),null}e=mt.current,$o(i)?_g(i):(e=qy(h,l,a),i.stateNode=e,Ki(i))}return oe(i),null;case 5:if(Ri(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Ki(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return oe(i),null}if(e=mt.current,$o(i))_g(i);else{switch(h=Dc(Tt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Ie]=i,e[Ee]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Fe(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Ki(i)}}return oe(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Ki(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=Tt.current,$o(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,h=sn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Ie]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Py(e.nodeValue,a)),e||xs(i)}else e=Dc(e).createTextNode(l),e[Ie]=i,i.stateNode=e}return oe(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=$o(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ie]=i}else Zo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),h=!1}else h=vg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Gi(i),i):(Gi(i),null)}if(Gi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),_c(i,i.updateQueue),oe(i),null;case 4:return Zn(),e===null&&Vd(i.stateNode.containerInfo),oe(i),null;case 10:return Hi(i.type),oe(i),null;case 19:if(rt(Oe),h=i.memoizedState,h===null)return oe(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)dl(h,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=fc(e),d!==null){for(i.flags|=128,dl(h,!1),e=d.updateQueue,i.updateQueue=e,_c(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)pg(a,e),a=a.sibling;return tt(Oe,Oe.current&1|2),i.child}e=e.sibling}h.tail!==null&&bn()>Ec&&(i.flags|=128,l=!0,dl(h,!1),i.lanes=4194304)}else{if(!l)if(e=fc(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,_c(i,e),dl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!jt)return oe(i),null}else 2*bn()-h.renderingStartTime>Ec&&a!==536870912&&(i.flags|=128,l=!0,dl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=bn(),i.sibling=null,e=Oe.current,tt(Oe,l?e&1|2:e&1),i):(oe(i),null);case 22:case 23:return Gi(i),xf(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&_c(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&rt(Ls),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Hi(De),oe(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function IS(e,i){switch(Tf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Hi(De),Zn(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ri(i),null;case 13:if(Gi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Zo()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return rt(Oe),null;case 4:return Zn(),null;case 10:return Hi(i.type),null;case 22:case 23:return Gi(i),xf(),e!==null&&rt(Ls),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Hi(De),null;case 25:return null;default:return null}}function j_(e,i){switch(Tf(i),i.tag){case 3:Hi(De),Zn();break;case 26:case 27:case 5:Ri(i);break;case 4:Zn();break;case 13:Gi(i);break;case 19:rt(Oe);break;case 10:Hi(i.type);break;case 22:case 23:Gi(i),xf(),e!==null&&rt(Ls);break;case 24:Hi(De)}}function ml(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){Jt(i,i.return,T)}}function Sr(e,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=i;var R=a,L=T;try{L()}catch(K){Jt(h,R,K)}}}l=l.next}while(l!==d)}}catch(K){Jt(i,i.return,K)}}function H_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Dg(i,a)}catch(l){Jt(e,e.return,l)}}}function F_(e,i,a){a.props=zs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Jt(e,i,l)}}function pl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Jt(e,i,h)}}function hi(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Jt(e,i,h)}else a.current=null}function G_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Jt(e,e.return,h)}}function ud(e,i,a){try{var l=e.stateNode;YS(l,e.type,a,i),l[Ee]=i}catch(h){Jt(e,e.return,h)}}function Q_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Or(e.type)||e.tag===4}function cd(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Q_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Or(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Nc));else if(l!==4&&(l===27&&Or(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(hd(e,i,a),e=e.sibling;e!==null;)hd(e,i,a),e=e.sibling}function yc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Or(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(yc(e,i,a),e=e.sibling;e!==null;)yc(e,i,a),e=e.sibling}function K_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Fe(i,l,a),i[Ie]=e,i[Ee]=a}catch(d){Jt(e,e.return,d)}}var Yi=!1,_e=!1,fd=!1,Y_=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function CS(e,i){if(e=e.containerInfo,kd=kc,e=sg(e),cf(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,R=-1,L=0,K=0,$=e,z=null;e:for(;;){for(var q;$!==a||h!==0&&$.nodeType!==3||(T=v+h),$!==d||l!==0&&$.nodeType!==3||(R=v+l),$.nodeType===3&&(v+=$.nodeValue.length),(q=$.firstChild)!==null;)z=$,$=q;for(;;){if($===e)break e;if(z===a&&++L===h&&(T=v),z===d&&++K===l&&(R=v),(q=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=q}a=T===-1||R===-1?null:{start:T,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ud={focusedElem:e,selectionRange:a},kc=!1,Ue=i;Ue!==null;)if(i=Ue,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,Ue=e;else for(;Ue!==null;){switch(i=Ue,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var Et=zs(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(Et,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(gt){Jt(a,a.return,gt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)zd(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":zd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ue=e;break}Ue=i.return}}function X_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:wr(e,a),l&4&&ml(5,a);break;case 1:if(wr(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(v){Jt(a,a.return,v)}else{var h=zs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Jt(a,a.return,v)}}l&64&&H_(a),l&512&&pl(a,a.return);break;case 3:if(wr(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Dg(e,i)}catch(v){Jt(a,a.return,v)}}break;case 27:i===null&&l&4&&K_(a);case 26:case 5:wr(e,a),i===null&&l&4&&G_(a),l&512&&pl(a,a.return);break;case 12:wr(e,a);break;case 13:wr(e,a),l&4&&W_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=US.bind(null,a),e1(e,a))));break;case 22:if(l=a.memoizedState!==null||Yi,!l){i=i!==null&&i.memoizedState!==null||_e,h=Yi;var d=_e;Yi=l,(_e=i)&&!d?br(e,a,(a.subtreeFlags&8772)!==0):wr(e,a),Yi=h,_e=d}break;case 30:break;default:wr(e,a)}}function $_(e){var i=e.alternate;i!==null&&(e.alternate=null,$_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&fr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var se=null,ln=!1;function Xi(e,i,a){for(a=a.child;a!==null;)Z_(e,i,a),a=a.sibling}function Z_(e,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ce,a)}catch{}switch(a.tag){case 26:_e||hi(a,i),Xi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_e||hi(a,i);var l=se,h=ln;Or(a.type)&&(se=a.stateNode,ln=!1),Xi(e,i,a),wl(a.stateNode),se=l,ln=h;break;case 5:_e||hi(a,i);case 6:if(l=se,h=ln,se=null,Xi(e,i,a),se=l,ln=h,se!==null)if(ln)try{(se.nodeType===9?se.body:se.nodeName==="HTML"?se.ownerDocument.body:se).removeChild(a.stateNode)}catch(d){Jt(a,i,d)}else try{se.removeChild(a.stateNode)}catch(d){Jt(a,i,d)}break;case 18:se!==null&&(ln?(e=se,By(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ml(e)):By(se,a.stateNode));break;case 4:l=se,h=ln,se=a.stateNode.containerInfo,ln=!0,Xi(e,i,a),se=l,ln=h;break;case 0:case 11:case 14:case 15:_e||Sr(2,a,i),_e||Sr(4,a,i),Xi(e,i,a);break;case 1:_e||(hi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&F_(a,i,l)),Xi(e,i,a);break;case 21:Xi(e,i,a);break;case 22:_e=(l=_e)||a.memoizedState!==null,Xi(e,i,a),_e=l;break;default:Xi(e,i,a)}}function W_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ml(e)}catch(a){Jt(i,i.return,a)}}function NS(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Y_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Y_),i;default:throw Error(s(435,e.tag))}}function dd(e,i){var a=NS(e);i.forEach(function(l){var h=LS.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function _n(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=e,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(Or(T.type)){se=T.stateNode,ln=!1;break t}break;case 5:se=T.stateNode,ln=!1;break t;case 3:case 4:se=T.stateNode.containerInfo,ln=!0;break t}T=T.return}if(se===null)throw Error(s(160));Z_(d,v,h),se=null,ln=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)J_(i,e),i=i.sibling}var Hn=null;function J_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_n(i,e),yn(e),l&4&&(Sr(3,e,e.return),ml(3,e),Sr(5,e,e.return));break;case 1:_n(i,e),yn(e),l&512&&(_e||a===null||hi(a,a.return)),l&64&&Yi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Hn;if(_n(i,e),yn(e),l&512&&(_e||a===null||hi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ps]||d[Ie]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Fe(d,l,a),d[Ie]=e,pe(d),l=d;break t;case"link":var v=Ky("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=h.createElement(l),Fe(d,l,a),h.head.appendChild(d);break;case"meta":if(v=Ky("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=h.createElement(l),Fe(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Ie]=e,pe(d),l=d}e.stateNode=l}else Yy(h,e.type,e.stateNode);else e.stateNode=Qy(h,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Yy(h,e.type,e.stateNode):Qy(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ud(e,e.memoizedProps,a.memoizedProps)}break;case 27:_n(i,e),yn(e),l&512&&(_e||a===null||hi(a,a.return)),a!==null&&l&4&&ud(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_n(i,e),yn(e),l&512&&(_e||a===null||hi(a,a.return)),e.flags&32){h=e.stateNode;try{In(h,"")}catch(q){Jt(e,e.return,q)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,ud(e,h,a!==null?a.memoizedProps:h)),l&1024&&(fd=!0);break;case 6:if(_n(i,e),yn(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(q){Jt(e,e.return,q)}}break;case 3:if(Vc=null,h=Hn,Hn=Oc(i.containerInfo),_n(i,e),Hn=h,yn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ml(i.containerInfo)}catch(q){Jt(e,e.return,q)}fd&&(fd=!1,ty(e));break;case 4:l=Hn,Hn=Oc(e.stateNode.containerInfo),_n(i,e),yn(e),Hn=l;break;case 12:_n(i,e),yn(e);break;case 13:_n(i,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vd=bn()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dd(e,l)));break;case 22:h=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,L=Yi,K=_e;if(Yi=L||h,_e=K||R,_n(i,e),_e=K,Yi=L,yn(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||R||Yi||_e||qs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(d=R.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=R.stateNode;var $=R.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){Jt(R,R.return,q)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(q){Jt(R,R.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dd(e,a))));break;case 19:_n(i,e),yn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dd(e,l)));break;case 30:break;case 21:break;default:_n(i,e),yn(e)}}function yn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(Q_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=cd(e);yc(e,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(In(v,""),a.flags&=-33);var T=cd(e);yc(e,T,v);break;case 3:case 4:var R=a.stateNode.containerInfo,L=cd(e);hd(e,L,R);break;default:throw Error(s(161))}}catch(K){Jt(e,e.return,K)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ty(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;ty(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function wr(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)X_(e,i.alternate,i),i=i.sibling}function qs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Sr(4,i,i.return),qs(i);break;case 1:hi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&F_(i,i.return,a),qs(i);break;case 27:wl(i.stateNode);case 26:case 5:hi(i,i.return),qs(i);break;case 22:i.memoizedState===null&&qs(i);break;case 30:qs(i);break;default:qs(i)}e=e.sibling}}function br(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:br(h,d,a),ml(4,d);break;case 1:if(br(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Jt(l,l.return,L)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Ng(R[h],T)}catch(L){Jt(l,l.return,L)}}a&&v&64&&H_(d),pl(d,d.return);break;case 27:K_(d);case 26:case 5:br(h,d,a),a&&l===null&&v&4&&G_(d),pl(d,d.return);break;case 12:br(h,d,a);break;case 13:br(h,d,a),a&&v&4&&W_(h,d);break;case 22:d.memoizedState===null&&br(h,d,a),pl(d,d.return);break;case 30:break;default:br(h,d,a)}i=i.sibling}}function md(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&tl(a))}function pd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&tl(e))}function fi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ey(e,i,a,l),i=i.sibling}function ey(e,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:fi(e,i,a,l),h&2048&&ml(9,i);break;case 1:fi(e,i,a,l);break;case 3:fi(e,i,a,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&tl(e)));break;case 12:if(h&2048){fi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Jt(i,i.return,R)}}else fi(e,i,a,l);break;case 13:fi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?fi(e,i,a,l):gl(e,i):d._visibility&2?fi(e,i,a,l):(d._visibility|=2,qa(e,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&md(v,i);break;case 24:fi(e,i,a,l),h&2048&&pd(i.alternate,i);break;default:fi(e,i,a,l)}}function qa(e,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,v=i,T=a,R=l,L=v.flags;switch(v.tag){case 0:case 11:case 15:qa(d,v,T,R,h),ml(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?qa(d,v,T,R,h):gl(d,v):(K._visibility|=2,qa(d,v,T,R,h)),h&&L&2048&&md(v.alternate,v);break;case 24:qa(d,v,T,R,h),h&&L&2048&&pd(v.alternate,v);break;default:qa(d,v,T,R,h)}i=i.sibling}}function gl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,h=l.flags;switch(l.tag){case 22:gl(a,l),h&2048&&md(l.alternate,l);break;case 24:gl(a,l),h&2048&&pd(l.alternate,l);break;default:gl(a,l)}i=i.sibling}}var _l=8192;function ja(e){if(e.subtreeFlags&_l)for(e=e.child;e!==null;)ny(e),e=e.sibling}function ny(e){switch(e.tag){case 26:ja(e),e.flags&_l&&e.memoizedState!==null&&m1(Hn,e.memoizedState,e.memoizedProps);break;case 5:ja(e);break;case 3:case 4:var i=Hn;Hn=Oc(e.stateNode.containerInfo),ja(e),Hn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=_l,_l=16777216,ja(e),_l=i):ja(e));break;default:ja(e)}}function iy(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function yl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ue=l,sy(l,e)}iy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ry(e),e=e.sibling}function ry(e){switch(e.tag){case 0:case 11:case 15:yl(e),e.flags&2048&&Sr(9,e,e.return);break;case 3:yl(e);break;case 12:yl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,vc(e)):yl(e);break;default:yl(e)}}function vc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ue=l,sy(l,e)}iy(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Sr(8,i,i.return),vc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,vc(i));break;default:vc(i)}e=e.sibling}}function sy(e,i){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:Sr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ue=l;else t:for(a=e;Ue!==null;){l=Ue;var h=l.sibling,d=l.return;if($_(l),l===a){Ue=null;break t}if(h!==null){h.return=d,Ue=h;break t}Ue=d}}}var DS={getCacheForType:function(e){var i=Xe(De),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},OS=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ee=null,Nt=null,Ut=0,Kt=0,vn=null,Rr=!1,Ha=!1,gd=!1,$i=0,fe=0,Ir=0,js=0,_d=0,kn=0,Fa=0,vl=null,un=null,yd=!1,vd=0,Ec=1/0,Tc=null,Cr=null,He=0,Nr=null,Ga=null,Qa=0,Ed=0,Td=null,ay=null,El=0,Ad=null;function En(){if((Qt&2)!==0&&Ut!==0)return Ut&-Ut;if(H.T!==null){var e=Va;return e!==0?e:Nd()}return cr()}function oy(){kn===0&&(kn=(Ut&536870912)===0||jt?No():536870912);var e=xn.current;return e!==null&&(e.flags|=32),kn}function Tn(e,i,a){(e===ee&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)&&(Ka(e,0),Dr(e,Ut,kn,!1)),Ci(e,a),((Qt&2)===0||e!==ee)&&(e===ee&&((Qt&2)===0&&(js|=a),fe===4&&Dr(e,Ut,kn,!1)),di(e))}function ly(e,i,a){if((Qt&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&e.expiredLanes)===0||ms(e,i),h=l?PS(e,i):bd(e,i,!0),d=l;do{if(h===0){Ha&&!l&&Dr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!MS(a)){h=bd(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=e;h=vl;var R=T.current.memoizedState.isDehydrated;if(R&&(Ka(T,v).flags|=256),v=bd(T,v,!1),v!==2){if(gd&&!R){T.errorRecoveryDisabledLanes|=d,js|=d,h=4;break t}d=un,un=h,d!==null&&(un===null?un=d:un.push.apply(un,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ka(e,0),Dr(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Dr(l,i,kn,!Rr);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=vd+300-bn(),10<h)){if(Dr(l,i,kn,!Rr),ca(l,0,!0)!==0)break t;l.timeoutHandle=Uy(uy.bind(null,l,a,un,Tc,yd,i,kn,js,Fa,Rr,d,2,-0,0),h);break t}uy(l,a,un,Tc,yd,i,kn,js,Fa,Rr,d,0,-0,0)}}break}while(!0);di(e)}function uy(e,i,a,l,h,d,v,T,R,L,K,$,z,q){if(e.timeoutHandle=-1,$=i.subtreeFlags,($&8192||($&16785408)===16785408)&&(Il={stylesheets:null,count:0,unsuspend:d1},ny(i),$=p1(),$!==null)){e.cancelPendingCommit=$(gy.bind(null,e,i,d,a,l,h,v,T,R,K,1,z,q)),Dr(e,d,v,!L);return}gy(e,i,d,a,l,h,v,T,R)}function MS(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!pn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dr(e,i,a,l){i&=~_d,i&=~js,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Ye(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Wn(e,a,i)}function Ac(){return(Qt&6)===0?(Tl(0),!1):!0}function Sd(){if(Nt!==null){if(Kt===0)var e=Nt.return;else e=Nt,ji=ks=null,zf(e),Ba=null,hl=0,e=Nt;for(;e!==null;)j_(e.alternate,e),e=e.return;Nt=null}}function Ka(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,$S(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Sd(),ee=e,Nt=a=Bi(e.current,null),Ut=i,Kt=0,vn=null,Rr=!1,Ha=ms(e,i),gd=!1,Fa=kn=_d=js=Ir=fe=0,un=vl=null,yd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Ye(l),d=1<<h;i|=e[h],l&=~d}return $i=i,Fu(),a}function cy(e,i){Rt=null,H.H=uc,i===nl||i===Ju?(i=Ig(),Kt=3):i===wg?(i=Ig(),Kt=4):Kt=i===C_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vn=i,Nt===null&&(fe=1,mc(e,On(i,e.current)))}function hy(){var e=H.H;return H.H=uc,e===null?uc:e}function fy(){var e=H.A;return H.A=DS,e}function wd(){fe=4,Rr||(Ut&4194048)!==Ut&&xn.current!==null||(Ha=!0),(Ir&134217727)===0&&(js&134217727)===0||ee===null||Dr(ee,Ut,kn,!1)}function bd(e,i,a){var l=Qt;Qt|=2;var h=hy(),d=fy();(ee!==e||Ut!==i)&&(Tc=null,Ka(e,i)),i=!1;var v=fe;t:do try{if(Kt!==0&&Nt!==null){var T=Nt,R=vn;switch(Kt){case 8:Sd(),v=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(i=!0);var L=Kt;if(Kt=0,vn=null,Ya(e,T,R,L),a&&Ha){v=0;break t}break;default:L=Kt,Kt=0,vn=null,Ya(e,T,R,L)}}VS(),v=fe;break}catch(K){cy(e,K)}while(!0);return i&&e.shellSuspendCounter++,ji=ks=null,Qt=l,H.H=h,H.A=d,Nt===null&&(ee=null,Ut=0,Fu()),v}function VS(){for(;Nt!==null;)dy(Nt)}function PS(e,i){var a=Qt;Qt|=2;var l=hy(),h=fy();ee!==e||Ut!==i?(Tc=null,Ec=bn()+500,Ka(e,i)):Ha=ms(e,i);t:do try{if(Kt!==0&&Nt!==null){i=Nt;var d=vn;e:switch(Kt){case 1:Kt=0,vn=null,Ya(e,i,d,1);break;case 2:case 9:if(bg(d)){Kt=0,vn=null,my(i);break}i=function(){Kt!==2&&Kt!==9||ee!==e||(Kt=7),di(e)},d.then(i,i);break t;case 3:Kt=7;break t;case 4:Kt=5;break t;case 7:bg(d)?(Kt=0,vn=null,my(i)):(Kt=0,vn=null,Ya(e,i,d,7));break;case 5:var v=null;switch(Nt.tag){case 26:v=Nt.memoizedState;case 5:case 27:var T=Nt;if(!v||Xy(v)){Kt=0,vn=null;var R=T.sibling;if(R!==null)Nt=R;else{var L=T.return;L!==null?(Nt=L,Sc(L)):Nt=null}break e}}Kt=0,vn=null,Ya(e,i,d,5);break;case 6:Kt=0,vn=null,Ya(e,i,d,6);break;case 8:Sd(),fe=6;break t;default:throw Error(s(462))}}xS();break}catch(K){cy(e,K)}while(!0);return ji=ks=null,H.H=l,H.A=h,Qt=a,Nt!==null?0:(ee=null,Ut=0,Fu(),fe)}function xS(){for(;Nt!==null&&!bo();)dy(Nt)}function dy(e){var i=z_(e.alternate,e,$i);e.memoizedProps=e.pendingProps,i===null?Sc(e):Nt=i}function my(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=P_(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=P_(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:zf(i);default:j_(a,i),i=Nt=pg(i,$i),i=z_(a,i,$i)}e.memoizedProps=e.pendingProps,i===null?Sc(e):Nt=i}function Ya(e,i,a,l){ji=ks=null,zf(i),Ba=null,hl=0;var h=i.return;try{if(wS(e,h,i,a,Ut)){fe=1,mc(e,On(a,e.current)),Nt=null;return}}catch(d){if(h!==null)throw Nt=h,d;fe=1,mc(e,On(a,e.current)),Nt=null;return}i.flags&32768?(jt||l===1?e=!0:Ha||(Ut&536870912)!==0?e=!1:(Rr=e=!0,(l===2||l===9||l===3||l===6)&&(l=xn.current,l!==null&&l.tag===13&&(l.flags|=16384))),py(i,e)):Sc(i)}function Sc(e){var i=e;do{if((i.flags&32768)!==0){py(i,Rr);return}e=i.return;var a=RS(i.alternate,i,$i);if(a!==null){Nt=a;return}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=e}while(i!==null);fe===0&&(fe=5)}function py(e,i){do{var a=IS(e.alternate,e);if(a!==null){a.flags&=32767,Nt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Nt=e;return}Nt=e=a}while(e!==null);fe=6,Nt=null}function gy(e,i,a,l,h,d,v,T,R){e.cancelPendingCommit=null;do wc();while(He!==0);if((Qt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=pf,Oo(e,a,d,v,T,R),e===ee&&(Nt=ee=null,Ut=0),Ga=i,Nr=e,Qa=a,Ed=d,Td=h,ay=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,BS(cs,function(){return Ty(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=et.p,et.p=2,v=Qt,Qt|=4;try{CS(e,i,a)}finally{Qt=v,et.p=h,H.T=l}}He=1,_y(),yy(),vy()}}function _y(){if(He===1){He=0;var e=Nr,i=Ga,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var l=et.p;et.p=2;var h=Qt;Qt|=4;try{J_(i,e);var d=Ud,v=sg(e.containerInfo),T=d.focusedElem,R=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&rg(T.ownerDocument.documentElement,T)){if(R!==null&&cf(T)){var L=R.start,K=R.end;if(K===void 0&&(K=L),"selectionStart"in T)T.selectionStart=L,T.selectionEnd=Math.min(K,T.value.length);else{var $=T.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var q=z.getSelection(),Et=T.textContent.length,gt=Math.min(R.start,Et),Wt=R.end===void 0?gt:Math.min(R.end,Et);!q.extend&&gt>Wt&&(v=Wt,Wt=gt,gt=v);var x=ig(T,gt),D=ig(T,Wt);if(x&&D&&(q.rangeCount!==1||q.anchorNode!==x.node||q.anchorOffset!==x.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var U=$.createRange();U.setStart(x.node,x.offset),q.removeAllRanges(),gt>Wt?(q.addRange(U),q.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),q.addRange(U))}}}}for($=[],q=T;q=q.parentNode;)q.nodeType===1&&$.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}kc=!!kd,Ud=kd=null}finally{Qt=h,et.p=l,H.T=a}}e.current=i,He=2}}function yy(){if(He===2){He=0;var e=Nr,i=Ga,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var l=et.p;et.p=2;var h=Qt;Qt|=4;try{X_(e,i.alternate,i)}finally{Qt=h,et.p=l,H.T=a}}He=3}}function vy(){if(He===4||He===3){He=0,vu();var e=Nr,i=Ga,a=Qa,l=ay;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?He=5:(He=0,Ga=Nr=null,Ey(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Cr=null),ha(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ce,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=H.T,h=et.p,et.p=2,H.T=null;try{for(var d=e.onRecoverableError,v=0;v<l.length;v++){var T=l[v];d(T.value,{componentStack:T.stack})}}finally{H.T=i,et.p=h}}(Qa&3)!==0&&wc(),di(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Ad?El++:(El=0,Ad=e):El=0,Tl(0)}}function Ey(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,tl(i)))}function wc(e){return _y(),yy(),vy(),Ty()}function Ty(){if(He!==5)return!1;var e=Nr,i=Ed;Ed=0;var a=ha(Qa),l=H.T,h=et.p;try{et.p=32>a?32:a,H.T=null,a=Td,Td=null;var d=Nr,v=Qa;if(He=0,Ga=Nr=null,Qa=0,(Qt&6)!==0)throw Error(s(331));var T=Qt;if(Qt|=4,ry(d.current),ey(d,d.current,v,a),Qt=T,Tl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ce,d)}catch{}return!0}finally{et.p=h,H.T=l,Ey(e,i)}}function Ay(e,i,a){i=On(a,i),i=td(e.stateNode,i,2),e=vr(e,i,2),e!==null&&(Ci(e,2),di(e))}function Jt(e,i,a){if(e.tag===3)Ay(e,e,a);else for(;i!==null;){if(i.tag===3){Ay(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Cr===null||!Cr.has(l))){e=On(a,e),a=R_(2),l=vr(i,a,2),l!==null&&(I_(a,l,i,e),Ci(l,2),di(l));break}}i=i.return}}function Rd(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new OS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(gd=!0,h.add(a),e=kS.bind(null,e,i,a),i.then(e,e))}function kS(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ee===e&&(Ut&a)===a&&(fe===4||fe===3&&(Ut&62914560)===Ut&&300>bn()-vd?(Qt&2)===0&&Ka(e,0):_d|=a,Fa===Ut&&(Fa=0)),di(e)}function Sy(e,i){i===0&&(i=Do()),e=Na(e,i),e!==null&&(Ci(e,i),di(e))}function US(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Sy(e,a)}function LS(e,i){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Sy(e,a)}function BS(e,i){return ls(e,i)}var bc=null,Xa=null,Id=!1,Rc=!1,Cd=!1,Hs=0;function di(e){e!==Xa&&e.next===null&&(Xa===null?bc=Xa=e:Xa=Xa.next=e),Rc=!0,Id||(Id=!0,qS())}function Tl(e,i){if(!Cd&&Rc){Cd=!0;do for(var a=!1,l=bc;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Ye(42|e)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Iy(l,d))}else d=Ut,d=ca(l,l===ee?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ms(l,d)||(a=!0,Iy(l,d));l=l.next}while(a);Cd=!1}}function zS(){wy()}function wy(){Rc=Id=!1;var e=0;Hs!==0&&(XS()&&(e=Hs),Hs=0);for(var i=bn(),a=null,l=bc;l!==null;){var h=l.next,d=by(l,i);d===0?(l.next=null,a===null?bc=h:a.next=h,h===null&&(Xa=a)):(a=l,(e!==0||(d&3)!==0)&&(Rc=!0)),l=h}Tl(e)}function by(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-Ye(d),T=1<<v,R=h[v];R===-1?((T&a)===0||(T&l)!==0)&&(h[v]=Co(T,i)):R<=i&&(e.expiredLanes|=T),d&=~T}if(i=ee,a=Ut,a=ca(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(Kt===2||Kt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&us(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ms(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&us(l),ha(a)){case 2:case 8:a=la;break;case 32:a=cs;break;case 268435456:a=ua;break;default:a=cs}return l=Ry.bind(null,e),a=ls(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&us(l),e.callbackPriority=2,e.callbackNode=null,2}function Ry(e,i){if(He!==0&&He!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(wc()&&e.callbackNode!==a)return null;var l=Ut;return l=ca(e,e===ee?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(ly(e,l,i),by(e,bn()),e.callbackNode!=null&&e.callbackNode===a?Ry.bind(null,e):null)}function Iy(e,i){if(wc())return null;ly(e,i,!0)}function qS(){ZS(function(){(Qt&6)!==0?ls(Ro,zS):wy()})}function Nd(){return Hs===0&&(Hs=No()),Hs}function Cy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_a(""+e)}function Ny(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function jS(e,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Cy((h[Ee]||null).action),v=l.submitter;v&&(i=(i=v[Ee]||null)?Cy(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new ya("action","action",null,l,h);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Hs!==0){var R=v?Ny(h,v):new FormData(h);Xf(a,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(T.preventDefault(),R=v?Ny(h,v):new FormData(h),Xf(a,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var Dd=0;Dd<mf.length;Dd++){var Od=mf[Dd],HS=Od.toLowerCase(),FS=Od[0].toUpperCase()+Od.slice(1);jn(HS,"on"+FS)}jn(lg,"onAnimationEnd"),jn(ug,"onAnimationIteration"),jn(cg,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(oS,"onTransitionRun"),jn(lS,"onTransitionStart"),jn(uS,"onTransitionCancel"),jn(hg,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function Dy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],R=T.instance,L=T.currentTarget;if(T=T.listener,R!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=L;try{d(h)}catch(K){dc(K)}h.currentTarget=null,d=R}else for(v=0;v<l.length;v++){if(T=l[v],R=T.instance,L=T.currentTarget,T=T.listener,R!==d&&h.isPropagationStopped())break t;d=T,h.currentTarget=L;try{d(h)}catch(K){dc(K)}h.currentTarget=null,d=R}}}}function Dt(e,i){var a=i[Vo];a===void 0&&(a=i[Vo]=new Set);var l=e+"__bubble";a.has(l)||(Oy(i,e,2,!1),a.add(l))}function Md(e,i,a){var l=0;i&&(l|=4),Oy(a,e,l,i)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function Vd(e){if(!e[Ic]){e[Ic]=!0,Po.forEach(function(a){a!=="selectionchange"&&(GS.has(a)||Md(a,!1,e),Md(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Ic]||(i[Ic]=!0,Md("selectionchange",!1,i))}}function Oy(e,i,a,l){switch(ev(i)){case 2:var h=y1;break;case 8:h=v1;break;default:h=Kd}a=h.bind(null,i,a,e),h=void 0,!Nn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function Pd(e,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var R=v.tag;if((R===3||R===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=Ni(T),v===null)return;if(R=v.tag,R===5||R===6||R===26||R===27){l=d=v;continue t}T=T.parentNode}}l=l.return}Nu(function(){var L=d,K=Cn(a),$=[];t:{var z=fg.get(e);if(z!==void 0){var q=ya,Et=e;switch(e){case"keypress":if(ri(a)===0)break t;case"keydown":case"keyup":q=wa;break;case"focusin":Et="focus",q=Ta;break;case"focusout":Et="blur",q=Ta;break;case"beforeblur":case"afterblur":q=Ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Uu;break;case lg:case ug:case cg:q=Aa;break;case hg:q=Bu;break;case"scroll":case"scrollend":q=Du;break;case"wheel":q=ba;break;case"copy":case"cut":case"paste":q=Sa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Qo;break;case"toggle":case"beforetoggle":q=qu}var gt=(i&4)!==0,Wt=!gt&&(e==="scroll"||e==="scrollend"),x=gt?z!==null?z+"Capture":null:z;gt=[];for(var D=L,U;D!==null;){var Y=D;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||x===null||(Y=As(D,x),Y!=null&&gt.push(Sl(D,Y,U))),Wt)break;D=D.return}0<gt.length&&(z=new q(z,Et,null,a,K),$.push({event:z,listeners:gt}))}}if((i&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",z&&a!==Vi&&(Et=a.relatedTarget||a.fromElement)&&(Ni(Et)||Et[Rn]))break t;if((q||z)&&(z=K.window===K?K:(z=K.ownerDocument)?z.defaultView||z.parentWindow:window,q?(Et=a.relatedTarget||a.toElement,q=L,Et=Et?Ni(Et):null,Et!==null&&(Wt=u(Et),gt=Et.tag,Et!==Wt||gt!==5&&gt!==27&&gt!==6)&&(Et=null)):(q=null,Et=L),q!==Et)){if(gt=Dn,Y="onMouseLeave",x="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Qo,Y="onPointerLeave",x="onPointerEnter",D="pointer"),Wt=q==null?z:ti(q),U=Et==null?z:ti(Et),z=new gt(Y,D+"leave",q,a,K),z.target=Wt,z.relatedTarget=U,Y=null,Ni(K)===L&&(gt=new gt(x,D+"enter",Et,a,K),gt.target=U,gt.relatedTarget=Wt,Y=gt),Wt=Y,q&&Et)e:{for(gt=q,x=Et,D=0,U=gt;U;U=$a(U))D++;for(U=0,Y=x;Y;Y=$a(Y))U++;for(;0<D-U;)gt=$a(gt),D--;for(;0<U-D;)x=$a(x),U--;for(;D--;){if(gt===x||x!==null&&gt===x.alternate)break e;gt=$a(gt),x=$a(x)}gt=null}else gt=null;q!==null&&My($,z,q,gt,!1),Et!==null&&Wt!==null&&My($,Wt,Et,gt,!0)}}t:{if(z=L?ti(L):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var ut=Zp;else if(Ne(z))if(Wp)ut=rS;else{ut=nS;var Ct=eS}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Bo(L.elementType)&&(ut=Zp):ut=iS;if(ut&&(ut=ut(e,L))){Li($,ut,a,K);break t}Ct&&Ct(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&mr(z,"number",z.value)}switch(Ct=L?ti(L):window,e){case"focusin":(Ne(Ct)||Ct.contentEditable==="true")&&(Ra=Ct,hf=L,Xo=null);break;case"focusout":Xo=hf=Ra=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,ag($,a,K);break;case"selectionchange":if(aS)break;case"keydown":case"keyup":ag($,a,K)}var ht;if(oi)t:{switch(e){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else xt?j(e,a)&&(_t="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_t="onCompositionStart");_t&&(y&&a.locale!=="ko"&&(xt||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&xt&&(ht=qo()):(ii=K,pr="value"in ii?ii.value:ii.textContent,xt=!0)),Ct=Cc(L,_t),0<Ct.length&&(_t=new Fo(_t,e,null,a,K),$.push({event:_t,listeners:Ct}),ht?_t.data=ht:(ht=it(a),ht!==null&&(_t.data=ht)))),(ht=p?Ce(e,a):kt(e,a))&&(_t=Cc(L,"onBeforeInput"),0<_t.length&&(Ct=new Fo("onBeforeInput","beforeinput",null,a,K),$.push({event:Ct,listeners:_t}),Ct.data=ht)),jS($,e,L,a,K)}Dy($,i)})}function Sl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Cc(e,i){for(var a=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=As(e,a),h!=null&&l.unshift(Sl(e,h,d)),h=As(e,i),h!=null&&l.push(Sl(e,h,d))),e.tag===3)return l;e=e.return}return[]}function $a(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function My(e,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,R=T.alternate,L=T.stateNode;if(T=T.tag,R!==null&&R===l)break;T!==5&&T!==26&&T!==27||L===null||(R=L,h?(L=As(a,d),L!=null&&v.unshift(Sl(a,L,R))):h||(L=As(a,d),L!=null&&v.push(Sl(a,L,R)))),a=a.return}v.length!==0&&e.push({event:i,listeners:v})}var QS=/\r\n?/g,KS=/\u0000|\uFFFD/g;function Vy(e){return(typeof e=="string"?e:""+e).replace(QS,`
`).replace(KS,"")}function Py(e,i){return i=Vy(i),Vy(e)===i}function Nc(){}function Zt(e,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||In(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&In(e,""+l);break;case"className":ei(e,"class",l);break;case"tabIndex":ei(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(e,a,l);break;case"style":Lo(e,l,d);break;case"data":if(i!=="object"){ei(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=_a(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Zt(e,i,"name",h.name,h,null),Zt(e,i,"formEncType",h.formEncType,h,null),Zt(e,i,"formMethod",h.formMethod,h,null),Zt(e,i,"formTarget",h.formTarget,h,null)):(Zt(e,i,"encType",h.encType,h,null),Zt(e,i,"method",h.method,h,null),Zt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=_a(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Nc);break;case"onScroll":l!=null&&Dt("scroll",e);break;case"onScrollEnd":l!=null&&Dt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=_a(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Dt("beforetoggle",e),Dt("toggle",e),dr(e,"popover",l);break;case"xlinkActuate":ze(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ze(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ze(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ze(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ze(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ze(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ze(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ze(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ze(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":dr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rf.get(a)||a,dr(e,a,l))}}function xd(e,i,a,l,h,d){switch(a){case"style":Lo(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?In(e,l):(typeof l=="number"||typeof l=="bigint")&&In(e,""+l);break;case"onScroll":l!=null&&Dt("scroll",e);break;case"onScrollEnd":l!=null&&Dt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=e[Ee]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):dr(e,a,l)}}}function Fe(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dt("error",e),Dt("load",e);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Zt(e,i,d,v,a,null)}}h&&Zt(e,i,"srcSet",a.srcSet,a,null),l&&Zt(e,i,"src",a.src,a,null);return;case"input":Dt("invalid",e);var T=d=v=h=null,R=null,L=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":v=K;break;case"checked":R=K;break;case"defaultChecked":L=K;break;case"value":d=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:Zt(e,i,l,K,a,null)}}vs(e,d,T,R,L,v,h,!1),ga(e);return;case"select":Dt("invalid",e),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Zt(e,i,h,T,a,null)}i=d,a=v,e.multiple=!!l,i!=null?Mi(e,!!l,i,!1):a!=null&&Mi(e,!!l,a,!0);return;case"textarea":Dt("invalid",e),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Zt(e,i,v,T,a,null)}Es(e,l,h,d),ga(e);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(e,i,R,l,a,null)}return;case"dialog":Dt("beforetoggle",e),Dt("toggle",e),Dt("cancel",e),Dt("close",e);break;case"iframe":case"object":Dt("load",e);break;case"video":case"audio":for(l=0;l<Al.length;l++)Dt(Al[l],e);break;case"image":Dt("error",e),Dt("load",e);break;case"details":Dt("toggle",e);break;case"embed":case"source":case"link":Dt("error",e),Dt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Zt(e,i,L,l,a,null)}return;default:if(Bo(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&xd(e,i,K,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Zt(e,i,T,l,a,null))}function YS(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,R=null,L=null,K=null;for(q in a){var $=a[q];if(a.hasOwnProperty(q)&&$!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=$;default:l.hasOwnProperty(q)||Zt(e,i,q,null,l,$)}}for(var z in l){var q=l[z];if($=a[z],l.hasOwnProperty(z)&&(q!=null||$!=null))switch(z){case"type":d=q;break;case"name":h=q;break;case"checked":L=q;break;case"defaultChecked":K=q;break;case"value":v=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:q!==$&&Zt(e,i,z,q,l,$)}}mn(e,v,T,R,L,K,d,h);return;case"select":q=v=T=z=null;for(d in a)if(R=a[d],a.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":q=R;default:l.hasOwnProperty(d)||Zt(e,i,d,null,l,R)}for(h in l)if(d=l[h],R=a[h],l.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":z=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==R&&Zt(e,i,h,d,l,R)}i=T,a=v,l=q,z!=null?Mi(e,!!a,z,!1):!!l!=!!a&&(i!=null?Mi(e,!!a,i,!0):Mi(e,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Zt(e,i,T,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Zt(e,i,v,h,l,d)}Xt(e,z,q);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Zt(e,i,Et,null,l,z)}for(R in l)if(z=l[R],q=a[R],l.hasOwnProperty(R)&&z!==q&&(z!=null||q!=null))switch(R){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Zt(e,i,R,z,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in a)z=a[gt],a.hasOwnProperty(gt)&&z!=null&&!l.hasOwnProperty(gt)&&Zt(e,i,gt,null,l,z);for(L in l)if(z=l[L],q=a[L],l.hasOwnProperty(L)&&z!==q&&(z!=null||q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Zt(e,i,L,z,l,q)}return;default:if(Bo(i)){for(var Wt in a)z=a[Wt],a.hasOwnProperty(Wt)&&z!==void 0&&!l.hasOwnProperty(Wt)&&xd(e,i,Wt,void 0,l,z);for(K in l)z=l[K],q=a[K],!l.hasOwnProperty(K)||z===q||z===void 0&&q===void 0||xd(e,i,K,z,l,q);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!l.hasOwnProperty(x)&&Zt(e,i,x,null,l,z);for($ in l)z=l[$],q=a[$],!l.hasOwnProperty($)||z===q||z==null&&q==null||Zt(e,i,$,z,l,q)}var kd=null,Ud=null;function Dc(e){return e.nodeType===9?e:e.ownerDocument}function xy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ky(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Ld(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bd=null;function XS(){var e=window.event;return e&&e.type==="popstate"?e===Bd?!1:(Bd=e,!0):(Bd=null,!1)}var Uy=typeof setTimeout=="function"?setTimeout:void 0,$S=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(e){return Ly.resolve(null).then(e).catch(WS)}:Uy;function WS(e){setTimeout(function(){throw e})}function Or(e){return e==="head"}function By(e,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&wl(v.documentElement),a&2&&wl(v.body),a&4)for(a=v.head,wl(a),v=a.firstChild;v;){var T=v.nextSibling,R=v.nodeName;v[ps]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){e.removeChild(d),Ml(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ml(i)}function zd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zd(a),fr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function JS(e,i,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ps])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Fn(e.nextSibling),e===null)break}return null}function t1(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Fn(e.nextSibling),e===null))return null;return e}function qd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function e1(e,i){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Fn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var jd=null;function zy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function qy(e,i,a){switch(i=Dc(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function wl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);fr(e)}var Un=new Map,jy=new Set;function Oc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Zi=et.d;et.d={f:n1,r:i1,D:r1,C:s1,L:a1,m:o1,X:u1,S:l1,M:c1};function n1(){var e=Zi.f(),i=Ac();return e||i}function i1(e){var i=Jn(e);i!==null&&i.tag===5&&i.type==="form"?l_(i):Zi.r(e)}var Za=typeof document>"u"?null:document;function Hy(e,i,a){var l=Za;if(l&&typeof i=="string"&&i){var h=Te(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),jy.has(h)||(jy.add(h),e={rel:e,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Fe(i,"link",e),pe(i),l.head.appendChild(i)))}}function r1(e){Zi.D(e),Hy("dns-prefetch",e,null)}function s1(e,i){Zi.C(e,i),Hy("preconnect",e,i)}function a1(e,i,a){Zi.L(e,i,a);var l=Za;if(l&&e&&i){var h='link[rel="preload"][as="'+Te(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Te(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Te(a.imageSizes)+'"]')):h+='[href="'+Te(e)+'"]';var d=h;switch(i){case"style":d=Wa(e);break;case"script":d=Ja(e)}Un.has(d)||(e=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Un.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(bl(d))||i==="script"&&l.querySelector(Rl(d))||(i=l.createElement("link"),Fe(i,"link",e),pe(i),l.head.appendChild(i)))}}function o1(e,i){Zi.m(e,i);var a=Za;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Te(l)+'"][href="'+Te(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ja(e)}if(!Un.has(d)&&(e=E({rel:"modulepreload",href:e},i),Un.set(d,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Rl(d)))return}l=a.createElement("link"),Fe(l,"link",e),pe(l),a.head.appendChild(l)}}}function l1(e,i,a){Zi.S(e,i,a);var l=Za;if(l&&e){var h=en(l).hoistableStyles,d=Wa(e);i=i||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(bl(d)))T.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Un.get(d))&&Hd(e,a);var R=v=l.createElement("link");pe(R),Fe(R,"link",e),R._p=new Promise(function(L,K){R.onload=L,R.onerror=K}),R.addEventListener("load",function(){T.loading|=1}),R.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Mc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function u1(e,i){Zi.X(e,i);var a=Za;if(a&&e){var l=en(a).hoistableScripts,h=Ja(e),d=l.get(h);d||(d=a.querySelector(Rl(h)),d||(e=E({src:e,async:!0},i),(i=Un.get(h))&&Fd(e,i),d=a.createElement("script"),pe(d),Fe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function c1(e,i){Zi.M(e,i);var a=Za;if(a&&e){var l=en(a).hoistableScripts,h=Ja(e),d=l.get(h);d||(d=a.querySelector(Rl(h)),d||(e=E({src:e,async:!0,type:"module"},i),(i=Un.get(h))&&Fd(e,i),d=a.createElement("script"),pe(d),Fe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Fy(e,i,a,l){var h=(h=Tt.current)?Oc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Wa(a.href),a=en(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Wa(a.href);var d=en(h).hoistableStyles,v=d.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=h.querySelector(bl(e)))&&!d._p&&(v.instance=d,v.state.loading=5),Un.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Un.set(e,a),d||h1(h,e,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ja(a),a=en(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Wa(e){return'href="'+Te(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function Gy(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function h1(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Fe(i,"link",a),pe(i),e.head.appendChild(i))}function Ja(e){return'[src="'+Te(e)+'"]'}function Rl(e){return"script[async]"+e}function Qy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+Te(a.href)+'"]');if(l)return i.instance=l,pe(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),pe(l),Fe(l,"style",h),Mc(l,a.precedence,e),i.instance=l;case"stylesheet":h=Wa(a.href);var d=e.querySelector(bl(h));if(d)return i.state.loading|=4,i.instance=d,pe(d),d;l=Gy(a),(h=Un.get(h))&&Hd(l,h),d=(e.ownerDocument||e).createElement("link"),pe(d);var v=d;return v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Fe(d,"link",l),i.state.loading|=4,Mc(d,a.precedence,e),i.instance=d;case"script":return d=Ja(a.src),(h=e.querySelector(Rl(d)))?(i.instance=h,pe(h),h):(l=a,(h=Un.get(d))&&(l=E({},a),Fd(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),pe(h),Fe(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Mc(l,a.precedence,e));return i.instance}function Mc(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Hd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Fd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Vc=null;function Ky(e,i,a){if(Vc===null){var l=new Map,h=Vc=new Map;h.set(a,l)}else h=Vc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var d=a[h];if(!(d[ps]||d[Ie]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=e+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function Yy(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function f1(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Xy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Il=null;function d1(){}function m1(e,i,a){if(Il===null)throw Error(s(475));var l=Il;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Wa(a.href),d=e.querySelector(bl(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Pc.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,pe(d);return}d=e.ownerDocument||e,a=Gy(a),(h=Un.get(h))&&Hd(a,h),d=d.createElement("link"),pe(d);var v=d;v._p=new Promise(function(T,R){v.onload=T,v.onerror=R}),Fe(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Pc.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function p1(){if(Il===null)throw Error(s(475));var e=Il;return e.stylesheets&&e.count===0&&Gd(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Pc(){if(this.count--,this.count===0){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var xc=null;function Gd(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,xc=new Map,i.forEach(g1,e),xc=null,Pc.call(e))}function g1(e,i){if(!(i.state.loading&4)){var a=xc.get(e);if(a)var l=a.get(null);else{a=new Map,xc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=Pc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var Cl={$$typeof:at,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function _1(e,i,a,l,h,d,v,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function $y(e,i,a,l,h,d,v,T,R,L,K,$){return e=new _1(e,i,a,v,T,R,L,$),i=1,d===!0&&(i|=24),d=gn(3,null,null,i),e.current=d,d.stateNode=e,i=Rf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Df(d),e}function Zy(e){return e?(e=Da,e):Da}function Wy(e,i,a,l,h,d){h=Zy(h),l.context===null?l.context=h:l.pendingContext=h,l=yr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=vr(e,l,i),a!==null&&(Tn(a,e,i),rl(a,e,i))}function Jy(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Qd(e,i){Jy(e,i),(e=e.alternate)&&Jy(e,i)}function tv(e){if(e.tag===13){var i=Na(e,67108864);i!==null&&Tn(i,e,67108864),Qd(e,67108864)}}var kc=!0;function y1(e,i,a,l){var h=H.T;H.T=null;var d=et.p;try{et.p=2,Kd(e,i,a,l)}finally{et.p=d,H.T=h}}function v1(e,i,a,l){var h=H.T;H.T=null;var d=et.p;try{et.p=8,Kd(e,i,a,l)}finally{et.p=d,H.T=h}}function Kd(e,i,a,l){if(kc){var h=Yd(l);if(h===null)Pd(e,i,l,Uc,a),nv(e,l);else if(T1(h,e,i,a,l))l.stopPropagation();else if(nv(e,l),i&4&&-1<E1.indexOf(e)){for(;h!==null;){var d=Jn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Bn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var R=1<<31-Ye(v);T.entanglements[1]|=R,v&=~R}di(d),(Qt&6)===0&&(Ec=bn()+500,Tl(0))}}break;case 13:T=Na(d,2),T!==null&&Tn(T,d,2),Ac(),Qd(d,2)}if(d=Yd(l),d===null&&Pd(e,i,l,Uc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Pd(e,i,l,null,a)}}function Yd(e){return e=Cn(e),Xd(e)}var Uc=null;function Xd(e){if(Uc=null,e=Ni(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=f(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Uc=e,null}function ev(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zh()){case Ro:return 2;case la:return 8;case cs:case Wh:return 32;case ua:return 268435456;default:return 32}default:return 32}}var $d=!1,Mr=null,Vr=null,Pr=null,Nl=new Map,Dl=new Map,xr=[],E1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nv(e,i){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Nl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(i.pointerId)}}function Ol(e,i,a,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Jn(i),i!==null&&tv(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function T1(e,i,a,l,h){switch(i){case"focusin":return Mr=Ol(Mr,e,i,a,l,h),!0;case"dragenter":return Vr=Ol(Vr,e,i,a,l,h),!0;case"mouseover":return Pr=Ol(Pr,e,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Nl.set(d,Ol(Nl.get(d)||null,e,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Dl.set(d,Ol(Dl.get(d)||null,e,i,a,l,h)),!0}return!1}function iv(e){var i=Ni(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){e.blockedOn=i,Au(e.priority,function(){if(a.tag===13){var l=En();l=ur(l);var h=Na(a,l);h!==null&&Tn(h,a,l),Qd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Yd(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Vi=l,a.target.dispatchEvent(l),Vi=null}else return i=Jn(a),i!==null&&tv(i),e.blockedOn=a,!1;i.shift()}return!0}function rv(e,i,a){Lc(e)&&a.delete(i)}function A1(){$d=!1,Mr!==null&&Lc(Mr)&&(Mr=null),Vr!==null&&Lc(Vr)&&(Vr=null),Pr!==null&&Lc(Pr)&&(Pr=null),Nl.forEach(rv),Dl.forEach(rv)}function Bc(e,i){e.blockedOn===i&&(e.blockedOn=null,$d||($d=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,A1)))}var zc=null;function sv(e){zc!==e&&(zc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zc===e&&(zc=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(Xd(l||a)===null)continue;break}var d=Jn(a);d!==null&&(e.splice(i,3),i-=3,Xf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ml(e){function i(R){return Bc(R,e)}Mr!==null&&Bc(Mr,e),Vr!==null&&Bc(Vr,e),Pr!==null&&Bc(Pr,e),Nl.forEach(i),Dl.forEach(i);for(var a=0;a<xr.length;a++){var l=xr[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)iv(a),a.blockedOn===null&&xr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Ee]||null;if(typeof d=="function")v||sv(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Ee]||null)T=v.formAction;else if(Xd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),sv(a)}}}function Zd(e){this._internalRoot=e}qc.prototype.render=Zd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=En();Wy(a,l,e,i,null,null)},qc.prototype.unmount=Zd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Wy(e.current,2,null,e,null,null),Ac(),i[Rn]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var i=cr();e={blockedOn:null,target:e,priority:i};for(var a=0;a<xr.length&&i!==0&&i<xr[a].priority;a++);xr.splice(a,0,e),a===0&&iv(e)}};var av=t.version;if(av!=="19.1.1")throw Error(s(527,av,"19.1.1"));et.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(i),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var S1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{ce=jc.inject(S1),Gt=jc}catch{}}return Pl.createRoot=function(e,i){if(!o(e))throw Error(s(299));var a=!1,l="",h=A_,d=S_,v=w_,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=$y(e,1,!1,null,null,a,l,h,d,v,T,null),e[Rn]=i.current,Vd(e),new Zd(i)},Pl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(s(299));var l=!1,h="",d=A_,v=S_,T=w_,R=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),i=$y(e,1,!0,i,a??null,l,h,d,v,T,R,L),i.context=Zy(null),a=i.current,l=En(),l=ur(l),h=yr(l),h.callback=null,vr(a,h,l),a=l,i.current.lanes=a,Ci(i,a),di(i),e[Rn]=i.current,Vd(e),new qc(i)},Pl.version="19.1.1",Pl}var gv;function V1(){if(gv)return tm.exports;gv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),tm.exports=M1(),tm.exports}var P1=V1();const x1=()=>{};var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},k1=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)t[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];t[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],m=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];t[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return t.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,m=f?r[o+1]:0,g=o+2<r.length,_=g?r[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let b=(m&15)<<2|_>>6,B=_&63;g||(B=64,f||(b=64)),s.push(n[E],n[w],n[b],n[B])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(tT(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):k1(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const _=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||_==null||w==null)throw new U1;const b=u<<2|m>>4;if(s.push(b),_!==64){const B=m<<4&240|_>>2;if(s.push(B),w!==64){const F=_<<6&192|w;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class U1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L1=function(r){const t=tT(r);return eT.encodeByteArray(t,!0)},oh=function(r){return L1(r).replace(/\./g,"")},nT=function(r){try{return eT.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=()=>B1().__FIREBASE_DEFAULTS__,q1=()=>{if(typeof process>"u"||typeof _v>"u")return;const r=_v.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},j1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&nT(r[1]);return t&&JSON.parse(t)},Ih=()=>{try{return x1()||z1()||q1()||j1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},iT=r=>Ih()?.emulatorHosts?.[r],rT=r=>{const t=iT(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},sT=()=>Ih()?.config,aT=r=>Ih()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xm(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[oh(JSON.stringify(n)),oh(JSON.stringify(f)),""].join(".")}const Hl={};function F1(){const r={prod:[],emulator:[]};for(const t of Object.keys(Hl))Hl[t]?r.emulator.push(t):r.prod.push(t);return r}function G1(r){let t=document.getElementById(r),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),n=!0),{created:n,element:t}}let yv=!1;function $m(r,t){if(typeof window>"u"||typeof document>"u"||!is(window.location.host)||Hl[r]===t||Hl[r]||yv)return;Hl[r]=t;function n(b){return`__firebase__banner__${b}`}const s="__firebase__banner",u=F1().prod.length>0;function f(){const b=document.getElementById(s);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,B){b.setAttribute("width","24"),b.setAttribute("id",B),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function _(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{yv=!0,f()},b}function E(b,B){b.setAttribute("id",B),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function w(){const b=G1(s),B=n("text"),F=document.getElementById(B)||document.createElement("span"),J=n("learnmore"),Q=document.getElementById(J)||document.createElement("a"),nt=n("preprendIcon"),st=document.getElementById(nt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const at=b.element;m(at),E(Q,J);const pt=_();g(st,nt),at.append(st,F,Q,pt),document.body.appendChild(at)}u?(F.innerText="Preview backend disconnected.",st.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(st.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function K1(){const r=Ih()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function $1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z1(){const r=tn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function W1(){return!K1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class bi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=ew,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],f=u?nw(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new bi(o,m,s)}}function nw(r,t){return r.replace(iw,(n,s)=>{const o=t[s];return o!=null?String(o):`<${s}?>`})}const iw=/\{\$([^}]+)}/g;function rw(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Xr(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=t[o];if(vv(u)&&vv(f)){if(!Xr(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function vv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function kl(r){const t={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Ul(r){const t=r.indexOf("?");if(!t)return"";const n=r.indexOf("#",t);return r.substring(t,n>0?n:void 0)}function sw(r,t){const n=new aw(r,t);return n.subscribe.bind(n)}class aw{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let o;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ow(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:s},o.next===void 0&&(o.next=rm),o.error===void 0&&(o.error=rm),o.complete===void 0&&(o.complete=rm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ow(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(r){return r&&r._delegate?r._delegate:r}class $r{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new H1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(cw(t))try{this.getOrInitializeService({instanceIdentifier:Fs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(t=Fs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fs){return this.instances.has(t)}getOptions(t=Fs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(t),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&t(u,s),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:uw(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Fs){return this.component?this.component.multipleInstances?t:Fs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uw(r){return r===Fs?void 0:r}function cw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new lw(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Mt||(Mt={}));const fw={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},dw=Mt.INFO,mw={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},pw=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),o=mw[t];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Zm{constructor(t){this.name=t,this._logLevel=dw,this._logHandler=pw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const gw=(r,t)=>t.some(n=>r instanceof n);let Ev,Tv;function _w(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yw(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lT=new WeakMap,vm=new WeakMap,uT=new WeakMap,sm=new WeakMap,Wm=new WeakMap;function vw(r){const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(Fr(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&lT.set(n,r)}).catch(()=>{}),Wm.set(t,r),t}function Ew(r){if(vm.has(r))return;const t=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});vm.set(r,t)}let Em={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return vm.get(r);if(t==="objectStoreNames")return r.objectStoreNames||uT.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function Tw(r){Em=r(Em)}function Aw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(am(this),t,...n);return uT.set(s,t.sort?t.sort():[t]),Fr(s)}:yw().includes(r)?function(...t){return r.apply(am(this),t),Fr(lT.get(this))}:function(...t){return Fr(r.apply(am(this),t))}}function Sw(r){return typeof r=="function"?Aw(r):(r instanceof IDBTransaction&&Ew(r),gw(r,_w())?new Proxy(r,Em):r)}function Fr(r){if(r instanceof IDBRequest)return vw(r);if(sm.has(r))return sm.get(r);const t=Sw(r);return t!==r&&(sm.set(r,t),Wm.set(t,r)),t}const am=r=>Wm.get(r);function ww(r,t,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,t),m=Fr(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Fr(f.result),g.oldVersion,g.newVersion,Fr(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const bw=["get","getKey","getAll","getAllKeys","count"],Rw=["put","add","delete","clear"],om=new Map;function Av(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(om.get(t))return om.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,o=Rw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||bw.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let _=g.store;return s&&(_=_.index(m.shift())),(await Promise.all([_[n](...m),o&&g.done]))[0]};return om.set(t,u),u}Tw(r=>({...r,get:(t,n,s)=>Av(t,n)||r.get(t,n,s),has:(t,n)=>!!Av(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Cw(r){return r.getComponent()?.type==="VERSION"}const Tm="@firebase/app",Sv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Zm("@firebase/app"),Nw="@firebase/app-compat",Dw="@firebase/analytics-compat",Ow="@firebase/analytics",Mw="@firebase/app-check-compat",Vw="@firebase/app-check",Pw="@firebase/auth",xw="@firebase/auth-compat",kw="@firebase/database",Uw="@firebase/data-connect",Lw="@firebase/database-compat",Bw="@firebase/functions",zw="@firebase/functions-compat",qw="@firebase/installations",jw="@firebase/installations-compat",Hw="@firebase/messaging",Fw="@firebase/messaging-compat",Gw="@firebase/performance",Qw="@firebase/performance-compat",Kw="@firebase/remote-config",Yw="@firebase/remote-config-compat",Xw="@firebase/storage",$w="@firebase/storage-compat",Zw="@firebase/firestore",Ww="@firebase/ai",Jw="@firebase/firestore-compat",tb="firebase",eb="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="[DEFAULT]",nb={[Tm]:"fire-core",[Nw]:"fire-core-compat",[Ow]:"fire-analytics",[Dw]:"fire-analytics-compat",[Vw]:"fire-app-check",[Mw]:"fire-app-check-compat",[Pw]:"fire-auth",[xw]:"fire-auth-compat",[kw]:"fire-rtdb",[Uw]:"fire-data-connect",[Lw]:"fire-rtdb-compat",[Bw]:"fire-fn",[zw]:"fire-fn-compat",[qw]:"fire-iid",[jw]:"fire-iid-compat",[Hw]:"fire-fcm",[Fw]:"fire-fcm-compat",[Gw]:"fire-perf",[Qw]:"fire-perf-compat",[Kw]:"fire-rc",[Yw]:"fire-rc-compat",[Xw]:"fire-gcs",[$w]:"fire-gcs-compat",[Zw]:"fire-fst",[Jw]:"fire-fst-compat",[Ww]:"fire-vertex","fire-js":"fire-js",[tb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,ib=new Map,Sm=new Map;function wv(r,t){try{r.container.addComponent(t)}catch(n){nr.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function Zs(r){const t=r.name;if(Sm.has(t))return nr.debug(`There were multiple attempts to register component ${t}.`),!1;Sm.set(t,r);for(const n of lh.values())wv(n,r);for(const n of ib.values())wv(n,r);return!0}function Ch(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function An(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new au("app","Firebase",rb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=eb;function cT(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s={name:Am,automaticDataCollectionEnabled:!0,...t},o=s.name;if(typeof o!="string"||!o)throw Gr.create("bad-app-name",{appName:String(o)});if(n||(n=sT()),!n)throw Gr.create("no-options");const u=lh.get(o);if(u){if(Xr(n,u.options)&&Xr(s,u.config))return u;throw Gr.create("duplicate-app",{appName:o})}const f=new hw(o);for(const g of Sm.values())f.addComponent(g);const m=new sb(n,s,f);return lh.set(o,m),m}function Jm(r=Am){const t=lh.get(r);if(!t&&r===Am&&sT())return cT();if(!t)throw Gr.create("no-app",{appName:r});return t}function _i(r,t,n){let s=nb[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${t}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),nr.warn(f.join(" "));return}Zs(new $r(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firebase-heartbeat-database",ob=1,Zl="firebase-heartbeat-store";let lm=null;function hT(){return lm||(lm=ww(ab,ob,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Gr.create("idb-open",{originalErrorMessage:r.message})})),lm}async function lb(r){try{const n=(await hT()).transaction(Zl),s=await n.objectStore(Zl).get(fT(r));return await n.done,s}catch(t){if(t instanceof bi)nr.warn(t.message);else{const n=Gr.create("idb-get",{originalErrorMessage:t?.message});nr.warn(n.message)}}}async function bv(r,t){try{const s=(await hT()).transaction(Zl,"readwrite");await s.objectStore(Zl).put(t,fT(r)),await s.done}catch(n){if(n instanceof bi)nr.warn(n.message);else{const s=Gr.create("idb-set",{originalErrorMessage:n?.message});nr.warn(s.message)}}}function fT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=1024,cb=30;class hb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new db(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Rv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>cb){const o=mb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){nr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Rv(),{heartbeatsToSend:n,unsentEntries:s}=fb(this._heartbeatsCache.heartbeats),o=oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return nr.warn(t),""}}}function Rv(){return new Date().toISOString().substring(0,10)}function fb(r,t=ub){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Iv(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Iv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class db{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Iv(r){return oh(JSON.stringify({version:2,heartbeats:r})).length}function mb(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(r){Zs(new $r("platform-logger",t=>new Iw(t),"PRIVATE")),Zs(new $r("heartbeat",t=>new hb(t),"PRIVATE")),_i(Tm,Sv,r),_i(Tm,Sv,"esm2020"),_i("fire-js","")}pb("");function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gb=dT,mT=new au("auth","Firebase",dT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Zm("@firebase/auth");function _b(r,...t){uh.logLevel<=Mt.WARN&&uh.warn(`Auth (${ra}): ${r}`,...t)}function Zc(r,...t){uh.logLevel<=Mt.ERROR&&uh.error(`Auth (${ra}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(r,...t){throw tp(r,...t)}function yi(r,...t){return tp(r,...t)}function pT(r,t,n){const s={...gb(),[t]:n};return new au("auth","Firebase",s).create(t,{appName:r.name})}function er(r){return pT(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tp(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return mT.create(r,...t)}function yt(r,t,...n){if(!r)throw tp(t,...n)}function Ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Zc(t),new Error(t)}function ir(r,t){r||Ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){return typeof self<"u"&&self.location?.href||""}function yb(){return Cv()==="http:"||Cv()==="https:"}function Cv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yb()||X1()||"connection"in navigator)?navigator.onLine:!0}function Eb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,n){this.shortDelay=t,this.longDelay=n,ir(n>t,"Short delay should be less than long delay!"),this.isMobile=Q1()||$1()}get(){return vb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r,t){ir(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Sb=new lu(3e4,6e4);function rs(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ar(r,t,n,s,o={}){return _T(r,o,async()=>{let u={},f={};s&&(t==="GET"?f=s:u={body:JSON.stringify(s)});const m=ou({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:g,...u};return Y1()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&is(r.emulatorConfig.host)&&(_.credentials="include"),gT.fetch()(await yT(r,r.config.apiHost,n,m),_)})}async function _T(r,t,n){r._canInitEmulator=!1;const s={...Tb,...t};try{const o=new bb(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Hc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Hc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw Hc(r,"user-disabled",f);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw pT(r,E,_);Xn(r,E)}}catch(o){if(o instanceof bi)throw o;Xn(r,"network-request-failed",{message:String(o)})}}async function uu(r,t,n,s,o={}){const u=await ar(r,t,n,s,o);return"mfaPendingCredential"in u&&Xn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function yT(r,t,n,s){const o=`${t}${n}?${s}`,u=r,f=u.config.emulator?ep(r.config,o):`${r.config.apiScheme}://${o}`;return Ab.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function wb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(yi(this.auth,"network-request-failed")),Sb.get())})}}function Hc(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=yi(r,t,s);return o.customData._tokenResponse=n,o}function Nv(r){return r!==void 0&&r.enterprise!==void 0}class Rb{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return wb(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ib(r,t){return ar(r,"GET","/v2/recaptchaConfig",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(r,t){return ar(r,"POST","/v1/accounts:delete",t)}async function ch(r,t){return ar(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Nb(r,t=!1){const n=ae(r),s=await n.getIdToken(t),o=np(s);yt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Fl(um(o.auth_time)),issuedAtTime:Fl(um(o.iat)),expirationTime:Fl(um(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function um(r){return Number(r)*1e3}function np(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const o=nT(n);return o?JSON.parse(o):(Zc("Failed to decode base64 JWT payload"),null)}catch(o){return Zc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Dv(r){const t=np(r);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof bi&&Db(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Db({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(r){const t=r.auth,n=await r.getIdToken(),s=await uo(r,ch(t,{idToken:n}));yt(s?.users.length,t,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?vT(o.providerUserInfo):[],f=Vb(r.providerData,u),m=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!f?.length,_=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,E)}async function Mb(r){const t=ae(r);await hh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Vb(r,t){return[...r.filter(s=>!t.some(o=>o.providerId===s.providerId)),...t]}function vT(r){return r.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(r,t){const n=await _T(r,{},async()=>{const s=ou({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await yT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&is(r.emulatorConfig.host)&&(g.credentials="include"),gT.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xb(r,t){return ar(r,"POST","/v2/accounts:revokeToken",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Dv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const n=Dv(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await Pb(t,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new so;return s&&(yt(typeof s=="string","internal-error",{appName:t}),f.refreshToken=s),o&&(yt(typeof o=="string","internal-error",{appName:t}),f.accessToken=o),u&&(yt(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return Ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(r,t){yt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Qn{constructor({uid:t,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Ob(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await uo(this,this.stsTokenManager.getToken(this.auth,t));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Nb(this,t)}reload(){return Mb(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(er(this.auth));const t=await this.getIdToken();return await uo(this,Cb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,_=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:w,emailVerified:b,isAnonymous:B,providerData:F,stsTokenManager:J}=n;yt(w&&J,t,"internal-error");const Q=so.fromJSON(this.name,J);yt(typeof w=="string",t,"internal-error"),Ur(s,t.name),Ur(o,t.name),yt(typeof b=="boolean",t,"internal-error"),yt(typeof B=="boolean",t,"internal-error"),Ur(u,t.name),Ur(f,t.name),Ur(m,t.name),Ur(g,t.name),Ur(_,t.name),Ur(E,t.name);const nt=new Qn({uid:w,auth:t,email:o,emailVerified:b,displayName:s,isAnonymous:B,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:Q,createdAt:_,lastLoginAt:E});return F&&Array.isArray(F)&&(nt.providerData=F.map(st=>({...st}))),g&&(nt._redirectEventId=g),nt}static async _fromIdTokenResponse(t,n,s=!1){const o=new so;o.updateFromServerResponse(n);const u=new Qn({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:s});return await hh(u),u}static async _fromGetAccountInfoResponse(t,n,s){const o=n.users[0];yt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?vT(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new so;m.updateFromIdToken(s);const g=new Qn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:f}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new bm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov=new Map;function tr(r){ir(r instanceof Function,"Expected a class definition");let t=Ov.get(r);return t?(ir(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Ov.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ET.type="NONE";const Mv=ET;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(r,t,n){return`firebase:${r}:${t}:${n}`}class ao{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Wc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Wc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await ch(this.auth,{idToken:t}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,t):null}return Qn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new ao(tr(Mv),t,s);const o=(await Promise.all(n.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||tr(Mv);const f=Wc(s,t.config.apiKey,t.name);let m=null;for(const _ of n)try{const E=await _._get(f);if(E){let w;if(typeof E=="string"){const b=await ch(t,{idToken:E}).catch(()=>{});if(!b)break;w=await Qn._fromGetAccountInfoResponse(t,b,E)}else w=Qn._fromJSON(t,E);_!==u&&(m=w),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ao(u,t,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async _=>{if(_!==u)try{await _._remove(f)}catch{}})),new ao(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(TT(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RT(t))return"Blackberry";if(IT(t))return"Webos";if(AT(t))return"Safari";if((t.includes("chrome/")||ST(t))&&!t.includes("edge/"))return"Chrome";if(bT(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function TT(r=tn()){return/firefox\//i.test(r)}function AT(r=tn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ST(r=tn()){return/crios\//i.test(r)}function wT(r=tn()){return/iemobile/i.test(r)}function bT(r=tn()){return/android/i.test(r)}function RT(r=tn()){return/blackberry/i.test(r)}function IT(r=tn()){return/webos/i.test(r)}function ip(r=tn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function kb(r=tn()){return ip(r)&&!!window.navigator?.standalone}function Ub(){return Z1()&&document.documentMode===10}function CT(r=tn()){return ip(r)||bT(r)||IT(r)||RT(r)||/windows phone/i.test(r)||wT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(r,t=[]){let n;switch(r){case"Browser":n=Vv(tn());break;case"Worker":n=`${Vv(tn())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ra}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((f,m)=>{try{const g=t(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(r,t={}){return ar(r,"GET","/v2/passwordPolicy",rs(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=6;class qb{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<t.length;o++)s=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(t,n,s,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new Lb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ao.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ch(this,{idToken:t}),s=await Qn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(An(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await hh(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Eb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(An(this.app))return Promise.reject(er(this));const n=t?ae(t):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return An(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Bb(this),n=new qb(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new au("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await xb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&tr(t)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=t.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=NT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&_b(`Error while retrieving App Check token: ${t.error}`),t?.token}}function sa(r){return ae(r)}class Pv{constructor(t){this.auth=t,this.observer=null,this.addObserver=sw(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hb(r){Nh=r}function DT(r){return Nh.loadJS(r)}function Fb(){return Nh.recaptchaEnterpriseScript}function Gb(){return Nh.gapiScript}function Qb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Kb{constructor(){this.enterprise=new Yb}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class Yb{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const Xb="recaptcha-enterprise",OT="NO_RECAPTCHA";class $b{constructor(t){this.type=Xb,this.auth=sa(t)}async verify(t="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Ib(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new Rb(g);return u.tenantId==null?u._agentRecaptchaConfig=_:u._tenantRecaptchaConfigs[u.tenantId]=_,f(_.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;Nv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(_=>{f(_)}).catch(()=>{f(OT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Kb().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Nv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Fb();g.length!==0&&(g+=m),DT(g).then(()=>{o(m,u,f)}).catch(_=>{f(_)})}}).catch(m=>{f(m)})})}}async function xv(r,t,n,s=!1,o=!1){const u=new $b(r);let f;if(o)f=OT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...t};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Rm(r,t,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await xv(r,t,n,n==="getOobCode");return s(r,u)}else return s(r,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await xv(r,t,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r,t){const n=Ch(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Xr(u,t??{}))return o;Xn(o,"already-initialized")}return n.initialize({options:t})}function Wb(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(tr);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function Jb(r,t,n){const s=sa(r);yt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const o=!1,u=MT(t),{host:f,port:m}=tR(t),g=m===null?"":`:${m}`,_={url:`${u}//${f}${g}/`},E=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){yt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),yt(Xr(_,s.config.emulator)&&Xr(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,is(f)?(Xm(`${u}//${f}${g}`),$m("Auth",!0)):eR()}function MT(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function tR(r){const t=MT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:kv(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:kv(f)}}}function kv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function eR(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ji("not implemented")}_getIdTokenResponse(t){return Ji("not implemented")}_linkToIdToken(t,n){return Ji("not implemented")}_getReauthenticationResolver(t){return Ji("not implemented")}}async function nR(r,t){return ar(r,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(r,t){return uu(r,"POST","/v1/accounts:signInWithPassword",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(r,t){return uu(r,"POST","/v1/accounts:signInWithEmailLink",rs(r,t))}async function sR(r,t){return uu(r,"POST","/v1/accounts:signInWithEmailLink",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl extends rp{constructor(t,n,s,o=null){super("password",s),this._email=t,this._password=n,this._tenantId=o}static _fromEmailAndPassword(t,n){return new Wl(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new Wl(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(t,n,"signInWithPassword",iR);case"emailLink":return rR(t,{email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(t,s,"signUpPassword",nR);case"emailLink":return sR(t,{idToken:n,email:this._email,oobCode:this._password});default:Xn(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r,t){return uu(r,"POST","/v1/accounts:signInWithIdp",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="http://localhost";class Ws extends rp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ws(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new Ws(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return oo(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,oo(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,oo(t,n)}buildRequest(){const t={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ou(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lR(r){const t=kl(Ul(r)).link,n=t?kl(Ul(t)).deep_link_id:null,s=kl(Ul(r)).deep_link_id;return(s?kl(Ul(s)).link:null)||s||n||t||r}class sp{constructor(t){const n=kl(Ul(t)),s=n.apiKey??null,o=n.oobCode??null,u=oR(n.mode??null);yt(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(t){const n=lR(t);try{return new sp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.providerId=yo.PROVIDER_ID}static credential(t,n){return Wl._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=sp.parseLink(n);return yt(s,"argument-error"),Wl._fromEmailAndCode(t,s.code,s.tenantId)}}yo.PROVIDER_ID="password";yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends VT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends cu{constructor(){super("facebook.com")}static credential(t){return Ws._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lr.credentialFromTaggedObject(t)}static credentialFromError(t){return Lr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lr.credential(t.oauthAccessToken)}catch{return null}}}Lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ws._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Br.credential(n,s)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends cu{constructor(){super("github.com")}static credential(t){return Ws._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends cu{constructor(){super("twitter.com")}static credential(t,n){return Ws._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return qr.credentialFromTaggedObject(t)}static credentialFromError(t){return qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return qr.credential(n,s)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(r,t){return uu(r,"POST","/v1/accounts:signUp",rs(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,o=!1){const u=await Qn._fromIdTokenResponse(t,s,o),f=Uv(s);return new Js({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const o=Uv(s);return new Js({user:t,providerId:o,_tokenResponse:s,operationType:n})}}function Uv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends bi{constructor(t,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,o){return new fh(t,n,s,o)}}function PT(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,u,t,s):u})}async function cR(r,t,n=!1){const s=await uo(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Js._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(r,t,n=!1){const{auth:s}=r;if(An(s.app))return Promise.reject(er(s));const o="reauthenticate";try{const u=await uo(r,PT(s,o,t,r),n);yt(u.idToken,s,"internal-error");const f=np(u.idToken);yt(f,s,"internal-error");const{sub:m}=f;return yt(r.uid===m,s,"user-mismatch"),Js._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Xn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(r,t,n=!1){if(An(r.app))return Promise.reject(er(r));const s="signIn",o=await PT(r,s,t),u=await Js._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function fR(r,t){return xT(sa(r),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(r){const t=sa(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function dR(r,t,n){if(An(r.app))return Promise.reject(er(r));const s=sa(r),f=await Rm(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&kT(r),g}),m=await Js._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function mR(r,t,n){return An(r.app)?Promise.reject(er(r)):fR(ae(r),yo.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kT(r),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(r,t){return ar(r,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(r,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const s=ae(r),u={idToken:await s.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await uo(s,pR(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function gR(r,t,n,s){return ae(r).onIdTokenChanged(t,n,s)}function _R(r,t,n){return ae(r).beforeAuthStateChanged(t,n)}function yR(r,t,n,s){return ae(r).onAuthStateChanged(t,n,s)}function vR(r){return ae(r).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=1e3,TR=10;class BT extends LT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&t(n,o,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);Ub()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,TR):o()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}BT.type="LOCAL";const AR=BT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends LT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}zT.type="SESSION";const qT=zT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(o=>o.isListeningto(t));if(n)return n;const s=new Dh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async _=>_(n.origin,u)),g=await SR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const _=ap("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(w){const b=w;if(b.data.eventId===_)switch(b.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(b.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:_,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function bR(r){vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function RR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IR(){return navigator?.serviceWorker?.controller||null}function CR(){return jT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",NR=1,mh="firebaseLocalStorage",FT="fbase_key";class hu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(r,t){return r.transaction([mh],t?"readwrite":"readonly").objectStore(mh)}function DR(){const r=indexedDB.deleteDatabase(HT);return new hu(r).toPromise()}function Im(){const r=indexedDB.open(HT,NR);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(mh,{keyPath:FT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(mh)?t(s):(s.close(),await DR(),t(await Im()))})})}async function Lv(r,t,n){const s=Oh(r,!0).put({[FT]:t,value:n});return new hu(s).toPromise()}async function OR(r,t){const n=Oh(r,!1).get(t),s=await new hu(n).toPromise();return s===void 0?null:s.value}function Bv(r,t){const n=Oh(r,!0).delete(t);return new hu(n).toPromise()}const MR=800,VR=3;class GT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Im(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>VR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance(CR()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await RR(),!this.activeServiceWorker)return;this.sender=new wR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||IR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Im();return await Lv(t,dh,"1"),await Bv(t,dh),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Lv(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>OR(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bv(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Oh(o,!1).getAll();return new hu(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GT.type="LOCAL";const PR=GT;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(r,t){return t?tr(t):(yt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends rp{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return oo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return oo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return oo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function kR(r){return xT(r.auth,new op(r),r.bypassAuthState)}function UR(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),hR(n,new op(r),r.bypassAuthState)}async function LR(r){const{auth:t,user:n}=r;return yt(n,t,"internal-error"),cR(n,new op(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t,n,s,o,u=!1){this.auth=t,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=t;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return kR;case"linkViaPopup":case"linkViaRedirect":return LR;case"reauthViaPopup":case"reauthViaRedirect":return UR;default:Xn(this.auth,"internal-error")}}resolve(t){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new lu(2e3,1e4);class ro extends QT{constructor(t,n,s,o,u){super(t,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const t=ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,BR.get())};t()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="pendingRedirect",Jc=new Map;class qR extends QT{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Jc.get(this.auth._key());if(!t){try{const s=await jR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Jc.set(this.auth._key(),t)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jR(r,t){const n=GR(t),s=FR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function HR(r,t){Jc.set(r._key(),t)}function FR(r){return tr(r._redirectPersistence)}function GR(r){return Wc(zR,r.config.apiKey,r.name)}async function QR(r,t,n=!1){if(An(r.app))return Promise.reject(er(r));const s=sa(r),o=xR(s,t),f=await new qR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,t)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=600*1e3;class YR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XR(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!KT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(yi(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=KR&&this.cachedEventUids.clear(),this.cachedEventUids.has(zv(t))}saveEventToCache(t){this.cachedEventUids.add(zv(t)),this.lastProcessedEventTime=Date.now()}}function zv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function KT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function XR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(r,t={}){return ar(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WR=/^https?/;async function JR(r){if(r.config.emulator)return;const{authorizedDomains:t}=await $R(r);for(const n of t)try{if(tI(n))return}catch{}Xn(r,"unauthorized-domain")}function tI(r){const t=wm(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!WR.test(n))return!1;if(ZR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new lu(3e4,6e4);function qv(){const r=vi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function nI(r){return new Promise((t,n)=>{function s(){qv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qv(),n(yi(r,"network-request-failed"))},timeout:eI.get()})}if(vi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(vi().gapi?.load)s();else{const o=Qb("iframefcb");return vi()[o]=()=>{gapi.load?s():n(yi(r,"network-request-failed"))},DT(`${Gb()}?onload=${o}`).catch(u=>n(u))}}).catch(t=>{throw th=null,t})}let th=null;function iI(r){return th=th||nI(r),th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new lu(5e3,15e3),sI="__/auth/iframe",aI="emulator/auth/iframe",oI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uI(r){const t=r.config;yt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?ep(t,aI):`https://${r.config.authDomain}/${sI}`,s={apiKey:t.apiKey,appName:r.name,v:ra},o=lI.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${ou(s).slice(1)}`}async function cI(r){const t=await iI(r),n=vi().gapi;return yt(n,r,"internal-error"),t.open({where:document.body,url:uI(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oI,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=yi(r,"network-request-failed"),m=vi().setTimeout(()=>{u(f)},rI.get());function g(){vi().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fI=500,dI=600,mI="_blank",pI="http://localhost";class jv{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gI(r,t,n,s=fI,o=dI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...hI,width:s.toString(),height:o.toString(),top:u,left:f},_=tn().toLowerCase();n&&(m=ST(_)?mI:n),TT(_)&&(t=t||pI,g.scrollbars="yes");const E=Object.entries(g).reduce((b,[B,F])=>`${b}${B}=${F},`,"");if(kb(_)&&m!=="_self")return _I(t||"",m),new jv(null);const w=window.open(t||"",m,E);yt(w,r,"popup-blocked");try{w.focus()}catch{}return new jv(w)}function _I(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="__/auth/handler",vI="emulator/auth/handler",EI=encodeURIComponent("fac");async function Hv(r,t,n,s,o,u){yt(r.config.authDomain,r,"auth-domain-config-required"),yt(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:ra,eventId:o};if(t instanceof VT){t.setDefaultLanguage(r.languageCode),f.providerId=t.providerId||"",rw(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,w]of Object.entries({}))f[E]=w}if(t instanceof cu){const E=t.getScopes().filter(w=>w!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const m=f;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await r._getAppCheckToken(),_=g?`#${EI}=${encodeURIComponent(g)}`:"";return`${TI(r)}?${ou(m).slice(1)}${_}`}function TI({config:r}){return r.emulator?ep(r,vI):`https://${r.authDomain}/${yI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class AI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qT,this._completeRedirectFn=QR,this._overrideRedirectResult=HR}async _openPopup(t,n,s,o){ir(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Hv(t,n,s,wm(),o);return gI(t,u,ap())}async _openRedirect(t,n,s,o){await this._originValidation(t);const u=await Hv(t,n,s,wm(),o);return bR(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ir(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await cI(t),s=new YR(t);return n.register("authEvent",o=>(yt(o?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(cm,{type:cm},o=>{const u=o?.[0]?.[cm];u!==void 0&&n(!!u),Xn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JR(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return CT()||AT()||ip()}}const SI=AI;var Fv="@firebase/auth",Gv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RI(r){Zs(new $r("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;yt(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NT(r)},_=new jb(s,o,u,g);return Wb(_,n),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Zs(new $r("auth-internal",t=>{const n=sa(t.getProvider("auth").getImmediate());return(s=>new wI(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(Fv,Gv,bI(r)),_i(Fv,Gv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=300,CI=aT("authIdTokenMaxAge")||II;let Qv=null;const NI=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>CI)return;const o=n?.token;Qv!==o&&(Qv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DI(r=Jm()){const t=Ch(r,"auth");if(t.isInitialized())return t.getImmediate();const n=Zb(r,{popupRedirectResolver:SI,persistence:[PR,AR,qT]}),s=aT("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=NI(u.toString());_R(n,f,()=>f(n.currentUser)),gR(n,m=>f(m))}}const o=iT("auth");return o&&Jb(n,`http://${o}`),n}function OI(){return document.getElementsByTagName("head")?.[0]??document}Hb({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=o=>{const u=yi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",OI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RI("Browser");var MI="firebase",VI="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(MI,VI,"app");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qr,YT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(V,S){function I(){}I.prototype=S.prototype,V.D=S.prototype,V.prototype=new I,V.prototype.constructor=V,V.C=function(O,M,P){for(var C=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)C[Yt-2]=arguments[Yt];return S.prototype[M].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,S,I){I||(I=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(M=0;16>M;++M)O[M]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=V.g[0],I=V.g[1],M=V.g[2];var P=V.g[3],C=S+(P^I&(M^P))+O[0]+3614090360&4294967295;S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[1]+3905402710&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[2]+606105819&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[3]+3250441966&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[4]+4118548399&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[5]+1200080426&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[6]+2821735955&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[7]+4249261313&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[8]+1770035416&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[9]+2336552879&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[10]+4294925233&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[11]+2304563134&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(P^I&(M^P))+O[12]+1804603682&4294967295,S=I+(C<<7&4294967295|C>>>25),C=P+(M^S&(I^M))+O[13]+4254626195&4294967295,P=S+(C<<12&4294967295|C>>>20),C=M+(I^P&(S^I))+O[14]+2792965006&4294967295,M=P+(C<<17&4294967295|C>>>15),C=I+(S^M&(P^S))+O[15]+1236535329&4294967295,I=M+(C<<22&4294967295|C>>>10),C=S+(M^P&(I^M))+O[1]+4129170786&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[6]+3225465664&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[11]+643717713&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[0]+3921069994&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[5]+3593408605&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[10]+38016083&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[15]+3634488961&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[4]+3889429448&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[9]+568446438&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[14]+3275163606&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[3]+4107603335&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[8]+1163531501&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(M^P&(I^M))+O[13]+2850285829&4294967295,S=I+(C<<5&4294967295|C>>>27),C=P+(I^M&(S^I))+O[2]+4243563512&4294967295,P=S+(C<<9&4294967295|C>>>23),C=M+(S^I&(P^S))+O[7]+1735328473&4294967295,M=P+(C<<14&4294967295|C>>>18),C=I+(P^S&(M^P))+O[12]+2368359562&4294967295,I=M+(C<<20&4294967295|C>>>12),C=S+(I^M^P)+O[5]+4294588738&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[8]+2272392833&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[11]+1839030562&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[14]+4259657740&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[1]+2763975236&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[4]+1272893353&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[7]+4139469664&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[10]+3200236656&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[13]+681279174&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[0]+3936430074&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[3]+3572445317&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[6]+76029189&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(I^M^P)+O[9]+3654602809&4294967295,S=I+(C<<4&4294967295|C>>>28),C=P+(S^I^M)+O[12]+3873151461&4294967295,P=S+(C<<11&4294967295|C>>>21),C=M+(P^S^I)+O[15]+530742520&4294967295,M=P+(C<<16&4294967295|C>>>16),C=I+(M^P^S)+O[2]+3299628645&4294967295,I=M+(C<<23&4294967295|C>>>9),C=S+(M^(I|~P))+O[0]+4096336452&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[7]+1126891415&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[14]+2878612391&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[5]+4237533241&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[12]+1700485571&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[3]+2399980690&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[10]+4293915773&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[1]+2240044497&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[8]+1873313359&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[15]+4264355552&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[6]+2734768916&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[13]+1309151649&4294967295,I=M+(C<<21&4294967295|C>>>11),C=S+(M^(I|~P))+O[4]+4149444226&4294967295,S=I+(C<<6&4294967295|C>>>26),C=P+(I^(S|~M))+O[11]+3174756917&4294967295,P=S+(C<<10&4294967295|C>>>22),C=M+(S^(P|~I))+O[2]+718787259&4294967295,M=P+(C<<15&4294967295|C>>>17),C=I+(P^(M|~S))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+S&4294967295,V.g[1]=V.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+M&4294967295,V.g[3]=V.g[3]+P&4294967295}s.prototype.u=function(V,S){S===void 0&&(S=V.length);for(var I=S-this.blockSize,O=this.B,M=this.h,P=0;P<S;){if(M==0)for(;P<=I;)o(this,V,P),P+=this.blockSize;if(typeof V=="string"){for(;P<S;)if(O[M++]=V.charCodeAt(P++),M==this.blockSize){o(this,O),M=0;break}}else for(;P<S;)if(O[M++]=V[P++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var S=1;S<V.length-8;++S)V[S]=0;var I=8*this.o;for(S=V.length-8;S<V.length;++S)V[S]=I&255,I/=256;for(this.u(V),V=Array(16),S=I=0;4>S;++S)for(var O=0;32>O;O+=8)V[I++]=this.g[S]>>>O&255;return V};function u(V,S){var I=m;return Object.prototype.hasOwnProperty.call(I,V)?I[V]:I[V]=S(V)}function f(V,S){this.h=S;for(var I=[],O=!0,M=V.length-1;0<=M;M--){var P=V[M]|0;O&&P==S||(I[M]=P,O=!1)}this.g=I}var m={};function g(V){return-128<=V&&128>V?u(V,function(S){return new f([S|0],0>S?-1:0)}):new f([V|0],0>V?-1:0)}function _(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return Q(_(-V));for(var S=[],I=1,O=0;V>=I;O++)S[O]=V/I|0,I*=4294967296;return new f(S,0)}function E(V,S){if(V.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(V.charAt(0)=="-")return Q(E(V.substring(1),S));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=_(Math.pow(S,8)),O=w,M=0;M<V.length;M+=8){var P=Math.min(8,V.length-M),C=parseInt(V.substring(M,M+P),S);8>P?(P=_(Math.pow(S,P)),O=O.j(P).add(_(C))):(O=O.j(I),O=O.add(_(C)))}return O}var w=g(0),b=g(1),B=g(16777216);r=f.prototype,r.m=function(){if(J(this))return-Q(this).m();for(var V=0,S=1,I=0;I<this.g.length;I++){var O=this.i(I);V+=(0<=O?O:4294967296+O)*S,S*=4294967296}return V},r.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(F(this))return"0";if(J(this))return"-"+Q(this).toString(V);for(var S=_(Math.pow(V,6)),I=this,O="";;){var M=pt(I,S).g;I=nt(I,M.j(S));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(V);if(I=M,F(I))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function F(V){if(V.h!=0)return!1;for(var S=0;S<V.g.length;S++)if(V.g[S]!=0)return!1;return!0}function J(V){return V.h==-1}r.l=function(V){return V=nt(this,V),J(V)?-1:F(V)?0:1};function Q(V){for(var S=V.g.length,I=[],O=0;O<S;O++)I[O]=~V.g[O];return new f(I,~V.h).add(b)}r.abs=function(){return J(this)?Q(this):this},r.add=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0,M=0;M<=S;M++){var P=O+(this.i(M)&65535)+(V.i(M)&65535),C=(P>>>16)+(this.i(M)>>>16)+(V.i(M)>>>16);O=C>>>16,P&=65535,C&=65535,I[M]=C<<16|P}return new f(I,I[I.length-1]&-2147483648?-1:0)};function nt(V,S){return V.add(Q(S))}r.j=function(V){if(F(this)||F(V))return w;if(J(this))return J(V)?Q(this).j(Q(V)):Q(Q(this).j(V));if(J(V))return Q(this.j(Q(V)));if(0>this.l(B)&&0>V.l(B))return _(this.m()*V.m());for(var S=this.g.length+V.g.length,I=[],O=0;O<2*S;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<V.g.length;M++){var P=this.i(O)>>>16,C=this.i(O)&65535,Yt=V.i(M)>>>16,qt=V.i(M)&65535;I[2*O+2*M]+=C*qt,st(I,2*O+2*M),I[2*O+2*M+1]+=P*qt,st(I,2*O+2*M+1),I[2*O+2*M+1]+=C*Yt,st(I,2*O+2*M+1),I[2*O+2*M+2]+=P*Yt,st(I,2*O+2*M+2)}for(O=0;O<S;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=S;O<2*S;O++)I[O]=0;return new f(I,0)};function st(V,S){for(;(V[S]&65535)!=V[S];)V[S+1]+=V[S]>>>16,V[S]&=65535,S++}function at(V,S){this.g=V,this.h=S}function pt(V,S){if(F(S))throw Error("division by zero");if(F(V))return new at(w,w);if(J(V))return S=pt(Q(V),S),new at(Q(S.g),Q(S.h));if(J(S))return S=pt(V,Q(S)),new at(Q(S.g),S.h);if(30<V.g.length){if(J(V)||J(S))throw Error("slowDivide_ only works with positive integers.");for(var I=b,O=S;0>=O.l(V);)I=dt(I),O=dt(O);var M=bt(I,1),P=bt(O,1);for(O=bt(O,2),I=bt(I,2);!F(O);){var C=P.add(O);0>=C.l(V)&&(M=M.add(I),P=C),O=bt(O,1),I=bt(I,1)}return S=nt(V,M.j(S)),new at(M,S)}for(M=w;0<=V.l(S);){for(I=Math.max(1,Math.floor(V.m()/S.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=_(I),C=P.j(S);J(C)||0<C.l(V);)I-=O,P=_(I),C=P.j(S);F(P)&&(P=b),M=M.add(P),V=nt(V,C)}return new at(M,V)}r.A=function(V){return pt(this,V).h},r.and=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)&V.i(O);return new f(I,this.h&V.h)},r.or=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)|V.i(O);return new f(I,this.h|V.h)},r.xor=function(V){for(var S=Math.max(this.g.length,V.g.length),I=[],O=0;O<S;O++)I[O]=this.i(O)^V.i(O);return new f(I,this.h^V.h)};function dt(V){for(var S=V.g.length+1,I=[],O=0;O<S;O++)I[O]=V.i(O)<<1|V.i(O-1)>>>31;return new f(I,V.h)}function bt(V,S){var I=S>>5;S%=32;for(var O=V.g.length-I,M=[],P=0;P<O;P++)M[P]=0<S?V.i(P+I)>>>S|V.i(P+I+1)<<32-S:V.i(P+I);return new f(M,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,YT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=E,Qr=f}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var Fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XT,Ll,$T,eh,Cm,ZT,WT,JT;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fc=="object"&&Fc];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)t:{var y=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var k=c[A];if(!(k in y))break t;y=y[k]}c=c[c.length-1],A=y[c],p=p(A),p!=A&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,A=!1,k={next:function(){if(!A&&y<c.length){var j=y++;return{value:p(j,c[j]),done:!1}}return A=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,y){return c.call.apply(c.bind,arguments)}function w(c,p,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,A),c.apply(p,k)}}return function(){return c.apply(p,arguments)}}function b(c,p,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,b.apply(null,arguments)}function B(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function F(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,k,j){for(var it=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)it[xt-2]=arguments[xt];return p.prototype[k].apply(A,it)}}function J(c){const p=c.length;if(0<p){const y=Array(p);for(let A=0;A<p;A++)y[A]=c[A];return y}return[]}function Q(c,p){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(g(A)){const k=c.length||0,j=A.length||0;c.length=k+j;for(let it=0;it<j;it++)c[k+it]=A[it]}else c.push(A)}}class nt{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function st(c){return/^[\s\xa0]*$/.test(c)}function at(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function pt(c){return pt[" "](c),c}pt[" "]=function(){};var dt=at().indexOf("Gecko")!=-1&&!(at().toLowerCase().indexOf("webkit")!=-1&&at().indexOf("Edge")==-1)&&!(at().indexOf("Trident")!=-1||at().indexOf("MSIE")!=-1)&&at().indexOf("Edge")==-1;function bt(c,p,y){for(const A in c)p.call(y,c[A],A,c)}function V(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function S(c){const p={};for(const y in c)p[y]=c[y];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,p){let y,A;for(let k=1;k<arguments.length;k++){A=arguments[k];for(y in A)c[y]=A[y];for(let j=0;j<I.length;j++)y=I[j],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function M(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function P(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Bt;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Yt{constructor(){this.h=this.g=null}add(p,y){const A=qt.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var qt=new nt(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ct=!1,Bt=new Yt,N=()=>{const c=m.Promise.resolve(void 0);et=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(y){P(y)}var p=qt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}ct=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var mt=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function It(c,p){if(tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(dt){t:{try{pt(p.nodeName);var k=!0;break t}catch{}k=!1}k||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Tt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&It.aa.h.call(this)}}F(It,tt);var Tt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),te=0;function Zn(c,p,y,A,k){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=k,this.key=++te,this.da=this.fa=!1}function lr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ri(c){this.src=c,this.g={},this.h=0}Ri.prototype.add=function(c,p,y,A,k){var j=c.toString();c=this.g[j],c||(c=this.g[j]=[],this.h++);var it=ls(c,p,A,k);return-1<it?(p=c[it],y||(p.fa=!1)):(p=new Zn(p,this.src,j,!!A,k),p.fa=y,c.push(p)),p};function os(c,p){var y=p.type;if(y in c.g){var A=c.g[y],k=Array.prototype.indexOf.call(A,p,void 0),j;(j=0<=k)&&Array.prototype.splice.call(A,k,1),j&&(lr(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function ls(c,p,y,A){for(var k=0;k<c.length;++k){var j=c[k];if(!j.da&&j.listener==p&&j.capture==!!y&&j.ha==A)return k}return-1}var us="closure_lm_"+(1e6*Math.random()|0),bo={};function vu(c,p,y,A,k){if(Array.isArray(p)){for(var j=0;j<p.length;j++)vu(c,p[j],y,A,k);return null}return y=Eu(y),c&&c[Ve]?c.K(p,y,_(A)?!!A.capture:!1,k):bn(c,p,y,!1,A,k)}function bn(c,p,y,A,k,j){if(!p)throw Error("Invalid event type");var it=_(k)?!!k.capture:!!k,xt=ua(c);if(xt||(c[us]=xt=new Ri(c)),y=xt.add(p,y,A,it,j),y.proxy)return y;if(A=Zh(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)mt||(k=it),k===void 0&&(k=!1),c.addEventListener(p.toString(),A,k);else if(c.attachEvent)c.attachEvent(cs(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Zh(){function c(y){return p.call(c.src,c.listener,y)}const p=Wh;return c}function Ro(c,p,y,A,k){if(Array.isArray(p))for(var j=0;j<p.length;j++)Ro(c,p[j],y,A,k);else A=_(A)?!!A.capture:!!A,y=Eu(y),c&&c[Ve]?(c=c.i,p=String(p).toString(),p in c.g&&(j=c.g[p],y=ls(j,y,A,k),-1<y&&(lr(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete c.g[p],c.h--)))):c&&(c=ua(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ls(p,y,A,k)),(y=-1<c?p[c]:null)&&la(y))}function la(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ve])os(p.i,c);else{var y=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(y,A,c.capture):p.detachEvent?p.detachEvent(cs(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=ua(p))?(os(y,c),y.h==0&&(y.src=null,p[us]=null)):lr(c)}}}function cs(c){return c in bo?bo[c]:bo[c]="on"+c}function Wh(c,p){if(c.da)c=!0;else{p=new It(p,this);var y=c.listener,A=c.ha||c.src;c.fa&&la(c),c=y.call(A,p)}return c}function ua(c){return c=c[us],c instanceof Ri?c:null}var Io="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eu(c){return typeof c=="function"?c:(c[Io]||(c[Io]=function(p){return c.handleEvent(p)}),c[Io])}function ce(){rt.call(this),this.i=new Ri(this),this.M=this,this.F=null}F(ce,rt),ce.prototype[Ve]=!0,ce.prototype.removeEventListener=function(c,p,y,A){Ro(this,c,p,y,A)};function Gt(c,p){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new tt(p,c);else if(p instanceof tt)p.target=p.target||c;else{var k=p;p=new tt(A,c),O(p,k)}if(k=!0,y)for(var j=y.length-1;0<=j;j--){var it=p.g=y[j];k=dn(it,A,!0,p)&&k}if(it=p.g=c,k=dn(it,A,!0,p)&&k,k=dn(it,A,!1,p)&&k,y)for(j=0;j<y.length;j++)it=p.g=y[j],k=dn(it,A,!1,p)&&k}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],A=0;A<y.length;A++)lr(y[A]);delete c.g[p],c.h--}}this.F=null},ce.prototype.K=function(c,p,y,A){return this.i.add(String(c),p,!1,y,A)},ce.prototype.L=function(c,p,y,A){return this.i.add(String(c),p,!0,y,A)};function dn(c,p,y,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var k=!0,j=0;j<p.length;++j){var it=p[j];if(it&&!it.da&&it.capture==y){var xt=it.listener,Ce=it.ha||it.src;it.fa&&os(c.i,it),k=xt.call(Ce,A)!==!1&&k}}return k&&!A.defaultPrevented}function Ye(c,p,y){if(typeof c=="function")y&&(c=b(c,y));else if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Tu(c){c.g=Ye(()=>{c.g=null,c.i&&(c.i=!1,Tu(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Jh extends rt{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(c){rt.call(this),this.h=c,this.g={}}F(hs,rt);var fs=[];function ds(c){bt(c.g,function(p,y){this.g.hasOwnProperty(y)&&la(p)},c),c.g={}}hs.prototype.N=function(){hs.aa.N.call(this),ds(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=m.JSON.stringify,ca=m.JSON.parse,ms=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Co(){}Co.prototype.h=null;function No(c){return c.h||(c.h=c.i())}function Do(){}var Ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ci(){tt.call(this,"d")}F(Ci,tt);function Oo(){tt.call(this,"c")}F(Oo,tt);var Wn={},Mo=null;function ur(){return Mo=Mo||new ce}Wn.La="serverreachability";function ha(c){tt.call(this,Wn.La,c)}F(ha,tt);function cr(c){const p=ur();Gt(p,new ha(p))}Wn.STAT_EVENT="statevent";function Au(c,p){tt.call(this,Wn.STAT_EVENT,c),this.stat=p}F(Au,tt);function re(c){const p=ur();Gt(p,new Au(p,c))}Wn.Ma="timingevent";function Ie(c,p){tt.call(this,Wn.Ma,c),this.size=p}F(Ie,tt);function Ee(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Vo(c,p,y,A,k,j){c.info(function(){if(c.g)if(j)for(var it="",xt=j.split("&"),Ce=0;Ce<xt.length;Ce++){var kt=xt[Ce].split("=");if(1<kt.length){var xe=kt[0];kt=kt[1];var Ne=xe.split("_");it=2<=Ne.length&&Ne[1]=="type"?it+(xe+"="+kt+"&"):it+(xe+"=redacted&")}}else it=null;else it=j;return"XMLHTTP REQ ("+A+") [attempt "+k+"]: "+p+`
`+y+`
`+it})}function tf(c,p,y,A,k,j,it){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+k+"]: "+p+`
`+y+`
`+j+" "+it})}function hr(c,p,y,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+ps(c,y)+(A?" "+A:"")})}function Su(c,p){c.info(function(){return"TIMEOUT: "+p})}Rn.prototype.info=function(){};function ps(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var k=A[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var it=1;it<k.length;it++)k[it]=""}}}}return Bn(y)}catch{return p}}var fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ni={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function ti(){}F(ti,Co),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Jn=new ti;function en(c,p,y,A){this.j=c,this.i=p,this.l=y,this.R=A||1,this.U=new hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var Po={},fa={};function zn(c,p,y){c.L=1,c.v=Es(mn(p)),c.m=y,c.P=!0,Di(c,null)}function Di(c,p){c.F=Date.now(),gs(c),c.A=mn(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),zo(y.i,"t",A),c.C=0,y=c.j.J,c.h=new pe,c.g=Bu(c.j,y?p:null,!c.m),0<c.O&&(c.M=new Jh(b(c.Y,c,c.g),c.O)),p=c.U,y=c.g,A=c.ca;var k="readystatechange";Array.isArray(k)||(k&&(fs[0]=k.toString()),k=fs);for(var j=0;j<k.length;j++){var it=vu(y,k[j],A||p.handleEvent,!1,p.h||p);if(!it)break;p.g[it.key]=it}p=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),cr(),Vo(c.i,c.u,c.A,c.l,c.R,c.m)}en.prototype.ca=function(c){c=c.target;const p=this.M;p&&Dn(c)==3?p.j():this.Y(c)},en.prototype.Y=function(c){try{if(c==this.g)t:{const Ne=Dn(this.g);var p=this.g.Ba();const Li=this.g.Z();if(!(3>Ne)&&(Ne!=3||this.g&&(this.h.h||this.g.oa()||Ou(this.g)))){this.J||Ne!=4||p==7||(p==8||0>=Li?cr(3):cr(2)),dr(this);var y=this.g.Z();this.X=y;e:if(wu(this)){var A=Ou(this.g);c="";var k=A.length,j=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ze(this),ei(this);var it="";break e}this.h.i=new m.TextDecoder}for(p=0;p<k;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(j&&p==k-1)});A.length=0,this.h.g+=c,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=y==200,tf(this.i,this.u,this.A,this.l,this.R,Ne,y),this.o){if(this.T&&!this.K){e:{if(this.g){var xt,Ce=this.g;if((xt=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!st(xt)){var kt=xt;break e}}kt=null}if(y=kt)hr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,y);else{this.o=!1,this.s=3,re(12),ze(this),ei(this);break t}}if(this.P){y=!0;let qe;for(;!this.J&&this.C<it.length;)if(qe=bu(this,it),qe==fa){Ne==4&&(this.s=4,re(14),y=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Po){this.s=4,re(15),hr(this.i,this.l,it,"[Invalid Chunk]"),y=!1;break}else hr(this.i,this.l,qe,null),_s(this,qe);if(wu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||it.length!=0||this.h.h||(this.s=1,re(16),y=!1),this.o=this.o&&y,!y)hr(this.i,this.l,it,"[Invalid Chunked Response]"),ze(this),ei(this);else if(0<it.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Cs(xe),xe.M=!0,re(11))}}else hr(this.i,this.l,it,null),_s(this,it);Ne==4&&ze(this),this.o&&!this.J&&(Ne==4?ku(this.j,this):(this.o=!1,gs(this)))}else af(this.g),y==400&&0<it.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),ze(this),ei(this)}}}catch{}finally{}};function wu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function bu(c,p){var y=c.C,A=p.indexOf(`
`,y);return A==-1?fa:(y=Number(p.substring(y,A)),isNaN(y)?Po:(A+=1,A+y>p.length?fa:(p=p.slice(A,A+y),c.C=A+y,p)))}en.prototype.cancel=function(){this.J=!0,ze(this)};function gs(c){c.S=Date.now()+c.I,Ru(c,c.I)}function Ru(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ee(b(c.ba,c),p)}function dr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}en.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Su(this.i,this.A),this.L!=2&&(cr(),re(17)),ze(this),this.s=2,ei(this)):Ru(this,this.S-c)};function ei(c){c.j.G==0||c.J||ku(c.j,c)}function ze(c){dr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ds(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function _s(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||xo(y.h,c))){if(!c.K&&xo(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var k=A;if(k[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)wa(y),Aa(y);else break t;Go(y),re(18)}}else y.za=k[1],0<y.za-y.T&&37500>k[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ee(b(y.Za,y),6e3));if(1>=ma(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ui(y,11)}else if((c.K||y.g==c)&&wa(y),!st(p))for(k=y.Da.g.parse(p),p=0;p<k.length;p++){let kt=k[p];if(y.T=kt[0],kt=kt[1],y.G==2)if(kt[0]=="c"){y.K=kt[1],y.ia=kt[2];const xe=kt[3];xe!=null&&(y.la=xe,y.j.info("VER="+y.la));const Ne=kt[4];Ne!=null&&(y.Aa=Ne,y.j.info("SVER="+y.Aa));const Li=kt[5];Li!=null&&typeof Li=="number"&&0<Li&&(A=1.5*Li,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const qe=c.g;if(qe){const li=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(li){var j=A.h;j.g||li.indexOf("spdy")==-1&&li.indexOf("quic")==-1&&li.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(pa(j,j.h),j.h=null))}if(A.D){const Ko=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(A.ya=Ko,Xt(A.I,A.D,Ko))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var it=c;if(A.qa=Lu(A,A.J?A.ia:null,A.W),it.K){nn(A.h,it);var xt=it,Ce=A.L;Ce&&(xt.I=Ce),xt.B&&(dr(xt),gs(xt)),A.g=it}else Pu(A);0<y.i.length&&Sa(y)}else kt[0]!="stop"&&kt[0]!="close"||Ui(y,7);else y.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ui(y,7):Ho(y):kt[0]!="noop"&&y.l&&y.l.ta(kt),y.v=0)}}cr(4)}catch{}}var Iu=class{constructor(c,p){this.g=c,this.map=p}};function Oi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function da(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ma(c){return c.h?1:c.g?c.g.size:0}function xo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function pa(c,p){c.g?c.g.add(p):c.h=p}function nn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Oi.prototype.cancel=function(){if(this.i=ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ko(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return J(c.i)}function ef(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,A=0;A<y;A++)p.push(c[A]);return p}p=[],y=0;for(A in c)p[y++]=c[A];return p}function ga(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const A in c)p[y++]=A;return p}}}function Uo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=ga(c),A=ef(c),k=A.length,j=0;j<k;j++)p.call(void 0,A[j],y&&y[j],c)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nf(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),k=null;if(0<=A){var j=c[y].substring(0,A);k=c[y].substring(A+1)}else j=c[y];p(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Te(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Te){this.h=c.h,vs(this,c.j),this.o=c.o,this.g=c.g,mr(this,c.s),this.l=c.l;var p=c.i,y=new Vi;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),Mi(this,y),this.m=c.m}else c&&(p=String(c).match(ys))?(this.h=!1,vs(this,p[1]||"",!0),this.o=In(p[2]||""),this.g=In(p[3]||"",!0),mr(this,p[4]),this.l=In(p[5]||"",!0),Mi(this,p[6]||"",!0),this.m=In(p[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}Te.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ts(p,Lo,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ts(p,Lo,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Ts(y,y.charAt(0)=="/"?rf:Bo,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Ts(y,_a)),c.join("")};function mn(c){return new Te(c)}function vs(c,p,y){c.j=y?In(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function mr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Mi(c,p,y){p instanceof Vi?(c.i=p,Nu(c.i,c.h)):(y||(p=Ts(p,sf)),c.i=new Vi(p,c.h))}function Xt(c,p,y){c.i.set(p,y)}function Es(c){return Xt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function In(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ts(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Cu),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Cu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Lo=/[#\/\?@]/g,Bo=/[#\?:]/g,rf=/[#\?]/g,sf=/[#\?@]/g,_a=/#/g;function Vi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Cn(c){c.g||(c.g=new Map,c.h=0,c.i&&nf(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}r=Vi.prototype,r.add=function(c,p){Cn(this),this.i=null,c=ni(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function Pi(c,p){Cn(c),p=ni(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function xi(c,p){return Cn(c),p=ni(c,p),c.g.has(p)}r.forEach=function(c,p){Cn(this),this.g.forEach(function(y,A){y.forEach(function(k){c.call(p,k,A,this)},this)},this)},r.na=function(){Cn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let A=0;A<p.length;A++){const k=c[A];for(let j=0;j<k.length;j++)y.push(p[A])}return y},r.V=function(c){Cn(this);let p=[];if(typeof c=="string")xi(this,c)&&(p=p.concat(this.g.get(ni(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},r.set=function(c,p){return Cn(this),this.i=null,c=ni(this,c),xi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function zo(c,p,y){Pi(c,p),0<y.length&&(c.i=null,c.g.set(ni(c,p),J(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var A=p[y];const j=encodeURIComponent(String(A)),it=this.V(A);for(A=0;A<it.length;A++){var k=j;it[A]!==""&&(k+="="+encodeURIComponent(String(it[A]))),c.push(k)}}return this.i=c.join("&")};function ni(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Nu(c,p){p&&!c.j&&(Cn(c),c.i=null,c.g.forEach(function(y,A){var k=A.toLowerCase();A!=k&&(Pi(this,A),zo(this,k,y))},c)),c.j=p}function As(c,p){const y=new Rn;if(m.Image){const A=new Image;A.onload=B(Nn,y,"TestLoadImage: loaded",!0,p,A),A.onerror=B(Nn,y,"TestLoadImage: error",!1,p,A),A.onabort=B(Nn,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=B(Nn,y,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function qn(c,p){const y=new Rn,A=new AbortController,k=setTimeout(()=>{A.abort(),Nn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(j=>{clearTimeout(k),j.ok?Nn(y,"TestPingServer: ok",!0,p):Nn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(k),Nn(y,"TestPingServer: error",!1,p)})}function Nn(c,p,y,A,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),A(y)}catch{}}function Ss(){this.g=new ms}function ii(c,p,y){const A=y||"";try{Uo(c,function(k,j){let it=k;_(k)&&(it=Bn(k)),p.push(A+j+"="+encodeURIComponent(it))})}catch(k){throw p.push(A+"type="+encodeURIComponent("_badmap")),k}}function pr(c){this.l=c.Ub||null,this.j=c.eb||!1}F(pr,Co),pr.prototype.g=function(){return new ki(this.l,this.j)},pr.prototype.i=function(c){return function(){return c}}({});function ki(c,p){ce.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(ki,ce),r=ki.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,si(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function qo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ri(this):si(this),this.readyState==3&&qo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ri(this))},r.Qa=function(c){this.g&&(this.response=c,ri(this))},r.ga=function(){this.g&&ri(this)};function ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,si(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function si(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jo(c){let p="";return bt(c,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Pe(c,p,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=jo(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Xt(c,p,y))}function Ht(c){ce.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Ht,ce);var ya=/^https?$/i,ws=["POST","PUT"];r=Ht.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?No(this.o):No(Jn),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(j){Du(this,j);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var k in A)y.set(k,A[k]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const j of A.keys())y.set(j,A.get(j));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),k=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ws,p,void 0))||A||k||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,it]of y)this.g.setRequestHeader(j,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bs(this),this.u=!0,this.g.send(c),this.u=!1}catch(j){Du(this,j)}};function Du(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,va(c),ai(c)}function va(c){c.A||(c.A=!0,Gt(c,"complete"),Gt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Gt(this,"complete"),Gt(this,"abort"),ai(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),Ht.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},r.bb=function(){Ea(this)};function Ea(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Dn(c)!=4||c.Z()!=2)){if(c.u&&Dn(c)==4)Ye(c.Ea,0,c);else if(Gt(c,"readystatechange"),Dn(c)==4){c.h=!1;try{const it=c.Z();t:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var A;if(A=it===0){var k=String(c.D).match(ys)[1]||null;!k&&m.self&&m.self.location&&(k=m.self.location.protocol.slice(0,-1)),A=!ya.test(k?k.toLowerCase():"")}y=A}if(y)Gt(c,"complete"),Gt(c,"success");else{c.m=6;try{var j=2<Dn(c)?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.Z()+"]",va(c)}}finally{ai(c)}}}}function ai(c,p){if(c.g){bs(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Gt(c,"ready");try{y.onreadystatechange=A}catch{}}}function bs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Dn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ca(p)}};function Ou(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function af(c){const p={};c=(c.g&&2<=Dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(st(c[A]))continue;var y=M(c[A]);const k=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=p[k]||[];p[k]=j,j.push(y)}V(p,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rs(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function Ta(c){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rs("baseRetryDelayMs",5e3,c),this.cb=Rs("retryDelaySeedMs",1e4,c),this.Wa=Rs("forwardChannelMaxRetries",2,c),this.wa=Rs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Oi(c&&c.concurrentRequestLimit),this.Da=new Ss,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ta.prototype,r.la=8,r.G=1,r.connect=function(c,p,y,A){re(0),this.W=c,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Lu(this,null,this.W),Sa(this)};function Ho(c){if(Mu(c),c.G==3){var p=c.U++,y=mn(c.I);if(Xt(y,"SID",c.K),Xt(y,"RID",p),Xt(y,"TYPE","terminate"),Is(c,y),p=new en(c,c.j,p),p.L=2,p.v=Es(mn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=Bu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),gs(p)}Uu(c)}function Aa(c){c.g&&(Cs(c),c.g.cancel(),c.g=null)}function Mu(c){Aa(c),c.u&&(m.clearTimeout(c.u),c.u=null),wa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Sa(c){if(!da(c.h)&&!c.s){c.s=!0;var p=c.Ga;et||N(),ct||(et(),ct=!0),Bt.add(p,c),c.B=0}}function of(c,p){return ma(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ee(b(c.Ga,c,p),Qo(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const k=new en(this,this.j,c);let j=this.o;if(this.S&&(j?(j=S(j),O(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=Vu(this,k,p),y=mn(this.I),Xt(y,"RID",c),Xt(y,"CVER",22),this.D&&Xt(y,"X-HTTP-Session-Id",this.D),Is(this,y),j&&(this.O?p="headers="+encodeURIComponent(String(jo(j)))+"&"+p:this.m&&Pe(y,this.m,j)),pa(this.h,k),this.Ua&&Xt(y,"TYPE","init"),this.P?(Xt(y,"$req",p),Xt(y,"SID","null"),k.T=!0,zn(k,y,null)):zn(k,y,p),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||da(this.h)||Fo(this))};function Fo(c,p){var y;p?y=p.l:y=c.U++;const A=mn(c.I);Xt(A,"SID",c.K),Xt(A,"RID",y),Xt(A,"AID",c.T),Is(c,A),c.m&&c.o&&Pe(A,c.m,c.o),y=new en(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Vu(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pa(c.h,y),zn(y,A,p)}function Is(c,p){c.H&&bt(c.H,function(y,A){Xt(p,A,y)}),c.l&&Uo({},function(y,A){Xt(p,A,y)})}function Vu(c,p,y){y=Math.min(c.i.length,y);var A=c.l?b(c.l.Na,c.l,c):null;t:{var k=c.i;let j=-1;for(;;){const it=["count="+y];j==-1?0<y?(j=k[0].g,it.push("ofs="+j)):j=0:it.push("ofs="+j);let xt=!0;for(let Ce=0;Ce<y;Ce++){let kt=k[Ce].g;const xe=k[Ce].map;if(kt-=j,0>kt)j=Math.max(0,k[Ce].g-100),xt=!1;else try{ii(xe,it,"req"+kt+"_")}catch{A&&A(xe)}}if(xt){A=it.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,A}function Pu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;et||N(),ct||(et(),ct=!0),Bt.add(p,c),c.v=0}}function Go(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ee(b(c.Fa,c),Qo(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ee(b(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,re(10),Aa(this),xu(this))};function Cs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function xu(c){c.g=new en(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=mn(c.qa);Xt(p,"RID","rpc"),Xt(p,"SID",c.K),Xt(p,"AID",c.T),Xt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xt(p,"TO",c.ja),Xt(p,"TYPE","xmlhttp"),Is(c,p),c.m&&c.o&&Pe(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Es(mn(p)),y.m=null,y.P=!0,Di(y,c)}r.Za=function(){this.C!=null&&(this.C=null,Aa(this),Go(this),re(19))};function wa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function ku(c,p){var y=null;if(c.g==p){wa(c),Cs(c),c.g=null;var A=2}else if(xo(c.h,p))y=p.D,nn(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var k=c.B;A=ur(),Gt(A,new Ie(A,y)),Sa(c)}else Pu(c);else if(k=p.s,k==3||k==0&&0<p.X||!(A==1&&of(c,p)||A==2&&Go(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),k){case 1:Ui(c,5);break;case 4:Ui(c,10);break;case 3:Ui(c,6);break;default:Ui(c,2)}}}function Qo(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function Ui(c,p){if(c.j.info("Error code "+p),p==2){var y=b(c.fb,c),A=c.Xa;const k=!A;A=new Te(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||vs(A,"https"),Es(A),k?As(A.toString(),y):qn(A.toString(),y)}else re(2);c.G=0,c.l&&c.l.sa(p),Uu(c),Mu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),re(2)):(this.j.info("Failed to ping google.com"),re(1))};function Uu(c){if(c.G=0,c.ka=[],c.l){const p=ko(c.h);(p.length!=0||c.i.length!=0)&&(Q(c.ka,p),Q(c.ka,c.i),c.h.i.length=0,J(c.i),c.i.length=0),c.l.ra()}}function Lu(c,p,y){var A=y instanceof Te?mn(y):new Te(y);if(A.g!="")p&&(A.g=p+"."+A.g),mr(A,A.s);else{var k=m.location;A=k.protocol,p=p?p+"."+k.hostname:k.hostname,k=+k.port;var j=new Te(null);A&&vs(j,A),p&&(j.g=p),k&&mr(j,k),y&&(j.l=y),A=j}return y=c.D,p=c.ya,y&&p&&Xt(A,y,p),Xt(A,"VER",c.la),Is(c,A),A}function Bu(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ht(new pr({eb:y})):new Ht(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}r=zu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ba(){}ba.prototype.g=function(c,p){return new rn(c,p)};function rn(c,p){ce.call(this),this.g=new Ta(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!st(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!st(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new oi(this)}F(rn,ce),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Ho(this.g)},rn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Bn(c),c=y);p.i.push(new Iu(p.Ya++,c)),p.G==3&&Sa(p)},rn.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,rn.aa.N.call(this)};function qu(c){Ci.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}F(qu,Ci);function ju(){Oo.call(this),this.status=1}F(ju,Oo);function oi(c){this.g=c}F(oi,zu),oi.prototype.ua=function(){Gt(this.g,"a")},oi.prototype.ta=function(c){Gt(this.g,new qu(c))},oi.prototype.sa=function(c){Gt(this.g,new ju)},oi.prototype.ra=function(){Gt(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,JT=function(){return new ba},WT=function(){return ur()},ZT=Wn,Cm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fr.NO_ERROR=0,fr.TIMEOUT=8,fr.HTTP_ERROR=6,eh=fr,Ni.COMPLETE="complete",$T=Ni,Do.EventType=Ii,Ii.OPEN="a",Ii.CLOSE="b",Ii.ERROR="c",Ii.MESSAGE="d",ce.prototype.listen=ce.prototype.K,Ll=Do,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,XT=Ht}).apply(typeof Fc<"u"?Fc:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore",Xv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}We.UNAUTHENTICATED=new We(null),We.GOOGLE_CREDENTIALS=new We("google-credentials-uid"),We.FIRST_PARTY=new We("first-party-uid"),We.MOCK_USER=new We("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new Zm("@firebase/firestore");function to(){return ta.logLevel}function lt(r,...t){if(ta.logLevel<=Mt.DEBUG){const n=t.map(lp);ta.debug(`Firestore (${vo}): ${r}`,...n)}}function rr(r,...t){if(ta.logLevel<=Mt.ERROR){const n=t.map(lp);ta.error(`Firestore (${vo}): ${r}`,...n)}}function co(r,...t){if(ta.logLevel<=Mt.WARN){const n=t.map(lp);ta.warn(`Firestore (${vo}): ${r}`,...n)}}function lp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(r,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,t0(r,s,n)}function t0(r,t,n){let s=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw rr(s),new Error(s)}function Ft(r,t,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||t0(t,o,s)}function St(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends bi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(We.UNAUTHENTICATED))}shutdown(){}}class xI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kI{constructor(t){this.t=t,this.currentUser=We.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Kr,t.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Kr)}},0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new e0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new We(t)}}class UI{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=We.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LI{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new UI(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(We.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BI{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0,3512);const s=u=>{u.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>s(u))};const o=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ft(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=zI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=t.charAt(o[u]%62))}return s}}function Vt(r,t){return r<t?-1:r>t?1:0}function Nm(r,t){const n=Math.min(r.length,t.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=t.charAt(s);if(o!==u)return hm(o)===hm(u)?Vt(o,u):hm(o)?1:-1}return Vt(r.length,t.length)}const qI=55296,jI=57343;function hm(r){const t=r.charCodeAt(0);return t>=qI&&t<=jI}function ho(r,t,n){return r.length===t.length&&r.every((s,o)=>n(s,t[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="__name__";class mi{constructor(t,n,s){n===void 0?n=0:n>t.length&&vt(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&vt(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return mi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof mi?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let o=0;o<s;o++){const u=mi.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return Vt(t.length,n.length)}static compareSegments(t,n){const s=mi.isNumericId(t),o=mi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?mi.extractNumericId(t).compare(mi.extractNumericId(n)):Nm(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Qr.fromString(t.substring(4,t.length-2))}}class ne extends mi{construct(t,n,s){return new ne(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ot(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new ne(n)}static emptyPath(){return new ne([])}}const HI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends mi{construct(t,n,s){return new Qe(t,n,s)}static isValidIdentifier(t){return HI.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zv}static keyField(){return new Qe([Zv])}static fromServerFormat(t){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ot(X.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new ot(X.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ot(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new ot(X.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(ne.fromString(t))}static fromName(t){return new ft(ne.fromString(t).popFirst(5))}static empty(){return new ft(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ne.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new ne(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(r,t,n){if(!n)throw new ot(X.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function FI(r,t,n,s){if(t===!0&&s===!0)throw new ot(X.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Wv(r){if(!ft.isDocumentKey(r))throw new ot(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Jv(r){if(ft.isDocumentKey(r))throw new ot(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function i0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":vt(12329,{type:typeof r})}function Kn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ot(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(r);throw new ot(X.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(r,t){const n={typeString:r};return t&&(n.value=t),n}function fu(r,t){if(!i0(r))throw new ot(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const o=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ot(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=-62135596800,eE=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*eE);return new ie(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<tE)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eE}_compareTo(t){return this.seconds===t.seconds?Vt(this.nanoseconds,t.nanoseconds):Vt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(fu(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-tE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:Re("string",ie._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new ie(0,0))}static max(){return new At(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function GI(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=At.fromTimestamp(s===1e9?new ie(n+1,0):new ie(n,s));return new Zr(o,ft.empty(),t)}function QI(r){return new Zr(r.readTime,r.key,Jl)}class Zr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Zr(At.min(),ft.empty(),Jl)}static max(){return new Zr(At.max(),ft.empty(),Jl)}}function KI(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ft.comparator(r.documentKey,t.documentKey),n!==0?n:Vt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r){if(r.code!==X.FAILED_PRECONDITION||r.message!==YI)throw r;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Z((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Z.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Z.reject(n)}static resolve(t){return new Z((n,s)=>{n(t)})}static reject(t){return new Z((n,s)=>{s(t)})}static waitFor(t){return new Z((n,s)=>{let o=0,u=0,f=!1;t.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>s(g))}),f=!0,u===o&&n()})}static or(t){let n=Z.resolve(!1);for(const s of t)n=n.next(o=>o?Z.resolve(o):s());return n}static forEach(t,n){const s=[];return t.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(t,n){return new Z((s,o)=>{const u=t.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;n(t[_]).next(E=>{f[_]=E,++m,m===u&&s(f)},E=>o(E))}})}static doWhile(t,n){return new Z((s,o)=>{const u=()=>{t()===!0?n().next(()=>{u()},o):s()};u()})}}function $I(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function To(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Vh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=-1;function Ph(r){return r==null}function ph(r){return r===0&&1/r==-1/0}function ZI(r){return typeof r=="number"&&Number.isInteger(r)&&!ph(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="";function WI(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=nE(t)),t=JI(r.get(n),t);return nE(t)}function JI(r,t){let n=t;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case r0:n+="";break;default:n+=u}}return n}function nE(r){return r+r0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function ss(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function s0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n){this.comparator=t,this.root=n||Ge.EMPTY}insert(t,n){return new ue(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(t,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gc(this.root,t,this.comparator,!0)}}class Gc{constructor(t,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ge{constructor(t,n,s,o,u){this.key=t,this.value=n,this.color=s??Ge.RED,this.left=o??Ge.EMPTY,this.right=u??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,o,u){return new Ge(t??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let o=this;const u=s(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Ge.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw vt(27949);return t+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(t,n,s,o,u){return this}insert(t,n,s){return new Ge(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new rE(this.data.getIterator())}getIteratorFrom(t){return new rE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Me)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Me(this.comparator);return n.data=t,n}}class rE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.fields=t,t.sort(Qe.comparator)}static empty(){return new Sn([])}unionWith(t){let n=new Me(Qe.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Sn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ho(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new a0("Invalid base64 string: "+u):u}}(t);return new Ke(n)}static fromUint8Array(t){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(t);return new Ke(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Vt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const tC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(r){if(Ft(!!r,39018),typeof r=="string"){let t=0;const n=tC.exec(r);if(Ft(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ye(r.seconds),nanos:ye(r.nanos)}}function ye(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Jr(r){return typeof r=="string"?Ke.fromBase64String(r):Ke.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="server_timestamp",l0="__type__",u0="__previous_value__",c0="__local_write_time__";function hp(r){return(r?.mapValue?.fields||{})[l0]?.stringValue===o0}function xh(r){const t=r.mapValue.fields[u0];return hp(t)?xh(t):t}function tu(r){const t=Wr(r.mapValue.fields[c0].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n,s,o,u,f,m,g,_,E){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=E}}const gh="(default)";class eu{constructor(t,n){this.projectId=t,this.database=n||gh}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===gh}isEqual(t){return t instanceof eu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__type__",nC="__max__",Qc={mapValue:{}},f0="__vector__",_h="value";function ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?hp(r)?4:rC(r)?9007199254740991:iC(r)?10:11:vt(28295,{value:r})}function wi(r,t){if(r===t)return!0;const n=ts(r);if(n!==ts(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return tu(r).isEqual(tu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Wr(o.timestampValue),m=Wr(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(o,u){return Jr(o.bytesValue).isEqual(Jr(u.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(o,u){return ye(o.geoPointValue.latitude)===ye(u.geoPointValue.latitude)&&ye(o.geoPointValue.longitude)===ye(u.geoPointValue.longitude)}(r,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ye(o.integerValue)===ye(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ye(o.doubleValue),m=ye(u.doubleValue);return f===m?ph(f)===ph(m):isNaN(f)&&isNaN(m)}return!1}(r,t);case 9:return ho(r.arrayValue.values||[],t.arrayValue.values||[],wi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(iE(f)!==iE(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!wi(f[g],m[g])))return!1;return!0}(r,t);default:return vt(52216,{left:r})}}function nu(r,t){return(r.values||[]).find(n=>wi(n,t))!==void 0}function fo(r,t){if(r===t)return 0;const n=ts(r),s=ts(t);if(n!==s)return Vt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Vt(r.booleanValue,t.booleanValue);case 2:return function(u,f){const m=ye(u.integerValue||u.doubleValue),g=ye(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,t);case 3:return sE(r.timestampValue,t.timestampValue);case 4:return sE(tu(r),tu(t));case 5:return Nm(r.stringValue,t.stringValue);case 6:return function(u,f){const m=Jr(u),g=Jr(f);return m.compareTo(g)}(r.bytesValue,t.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=Vt(m[_],g[_]);if(E!==0)return E}return Vt(m.length,g.length)}(r.referenceValue,t.referenceValue);case 8:return function(u,f){const m=Vt(ye(u.latitude),ye(f.latitude));return m!==0?m:Vt(ye(u.longitude),ye(f.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return aE(r.arrayValue,t.arrayValue);case 10:return function(u,f){const m=u.fields||{},g=f.fields||{},_=m[_h]?.arrayValue,E=g[_h]?.arrayValue,w=Vt(_?.values?.length||0,E?.values?.length||0);return w!==0?w:aE(_,E)}(r.mapValue,t.mapValue);case 11:return function(u,f){if(u===Qc.mapValue&&f===Qc.mapValue)return 0;if(u===Qc.mapValue)return 1;if(f===Qc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=f.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let w=0;w<g.length&&w<E.length;++w){const b=Nm(g[w],E[w]);if(b!==0)return b;const B=fo(m[g[w]],_[E[w]]);if(B!==0)return B}return Vt(g.length,E.length)}(r.mapValue,t.mapValue);default:throw vt(23264,{he:n})}}function sE(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Vt(r,t);const n=Wr(r),s=Wr(t),o=Vt(n.seconds,s.seconds);return o!==0?o:Vt(n.nanos,s.nanos)}function aE(r,t){const n=r.values||[],s=t.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=fo(n[o],s[o]);if(u)return u}return Vt(n.length,s.length)}function mo(r){return Dm(r)}function Dm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Wr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Jr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ft.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Dm(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Dm(n.fields[f])}`;return o+"}"}(r.mapValue):vt(61005,{value:r})}function nh(r){switch(ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=xh(r);return t?16+nh(t):16;case 5:return 2*r.stringValue.length;case 6:return Jr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+nh(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return ss(s.fields,(u,f)=>{o+=u.length+nh(f)}),o}(r.mapValue);default:throw vt(13486,{value:r})}}function oE(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function Om(r){return!!r&&"integerValue"in r}function fp(r){return!!r&&"arrayValue"in r}function lE(r){return!!r&&"nullValue"in r}function uE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ih(r){return!!r&&"mapValue"in r}function iC(r){return(r?.mapValue?.fields||{})[h0]?.stringValue===f0}function Gl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return ss(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=Gl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gl(r.arrayValue.values[n]);return t}return{...r}}function rC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===nC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.value=t}static empty(){return new fn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!ih(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gl(n)}setAll(t){let n=Qe.emptyPath(),s={},o=[];t.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=Gl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(t){const n=this.field(t.popLast());ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return wi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let o=n.mapValue.fields[t.get(s)];ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,s){ss(n,(o,u)=>t[o]=u);for(const o of s)delete t[o]}clone(){return new fn(Gl(this.value))}}function d0(r){const t=[];return ss(r.fields,(n,s)=>{const o=new Qe([n]);if(ih(s)){const u=d0(s.mapValue).fields;if(u.length===0)t.push(o);else for(const f of u)t.push(o.child(f))}else t.push(o)}),new Sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t,n,s,o,u,f,m){this.key=t,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(t){return new Je(t,0,At.min(),At.min(),At.min(),fn.empty(),0)}static newFoundDocument(t,n,s,o){return new Je(t,1,n,At.min(),s,o,0)}static newNoDocument(t,n){return new Je(t,2,n,At.min(),At.min(),fn.empty(),0)}static newUnknownDocument(t,n){return new Je(t,3,n,At.min(),At.min(),fn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Je&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,n){this.position=t,this.inclusive=n}}function cE(r,t,n){let s=0;for(let o=0;o<r.position.length;o++){const u=t[o],f=r.position[o];if(u.field.isKeyField()?s=ft.comparator(ft.fromName(f.referenceValue),n.key):s=fo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function hE(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!wi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(t,n="asc"){this.field=t,this.dir=n}}function sC(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{}class be extends m0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new oC(t,n,s):n==="array-contains"?new cC(t,s):n==="in"?new hC(t,s):n==="not-in"?new fC(t,s):n==="array-contains-any"?new dC(t,s):new be(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new lC(t,s):new uC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fo(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(fo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends m0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new $n(t,n)}matches(t){return p0(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function p0(r){return r.op==="and"}function g0(r){return aC(r)&&p0(r)}function aC(r){for(const t of r.filters)if(t instanceof $n)return!1;return!0}function Mm(r){if(r instanceof be)return r.field.canonicalString()+r.op.toString()+mo(r.value);if(g0(r))return r.filters.map(t=>Mm(t)).join(",");{const t=r.filters.map(n=>Mm(n)).join(",");return`${r.op}(${t})`}}function _0(r,t){return r instanceof be?function(s,o){return o instanceof be&&s.op===o.op&&s.field.isEqual(o.field)&&wi(s.value,o.value)}(r,t):r instanceof $n?function(s,o){return o instanceof $n&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,m)=>u&&_0(f,o.filters[m]),!0):!1}(r,t):void vt(19439)}function y0(r){return r instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(r):r instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(y0).join(" ,")+"}"}(r):"Filter"}class oC extends be{constructor(t,n,s){super(t,n,s),this.key=ft.fromName(s.referenceValue)}matches(t){const n=ft.comparator(t.key,this.key);return this.matchesComparison(n)}}class lC extends be{constructor(t,n){super(t,"in",n),this.keys=v0("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class uC extends be{constructor(t,n){super(t,"not-in",n),this.keys=v0("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function v0(r,t){return(t.arrayValue?.values||[]).map(n=>ft.fromName(n.referenceValue))}class cC extends be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fp(n)&&nu(n.arrayValue,this.value)}}class hC extends be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&nu(this.value.arrayValue,n)}}class fC extends be{constructor(t,n){super(t,"not-in",n)}matches(t){if(nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nu(this.value.arrayValue,n)}}class dC extends be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>nu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(t,n=null,s=[],o=[],u=null,f=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function fE(r,t=null,n=[],s=[],o=null,u=null,f=null){return new mC(r,t,n,s,o,u,f)}function dp(r){const t=St(r);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Mm(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Ph(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>mo(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>mo(s)).join(",")),t.Te=n}return t.Te}function mp(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!sC(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!_0(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!hE(r.startAt,t.startAt)&&hE(r.endAt,t.endAt)}function Vm(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pC(r,t,n,s,o,u,f,m){return new Ao(r,t,n,s,o,u,f,m)}function pp(r){return new Ao(r)}function dE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function E0(r){return r.collectionGroup!==null}function Ql(r){const t=St(r);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Me(Qe.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new iu(u,s))}),n.has(Qe.keyField().canonicalString())||t.Ie.push(new iu(Qe.keyField(),s))}return t.Ie}function Ei(r){const t=St(r);return t.Ee||(t.Ee=gC(t,Ql(r))),t.Ee}function gC(r,t){if(r.limitType==="F")return fE(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new iu(o.field,u)});const n=r.endAt?new yh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new yh(r.startAt.position,r.startAt.inclusive):null;return fE(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function Pm(r,t){const n=r.filters.concat([t]);return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function vh(r,t,n){return new Ao(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function kh(r,t){return mp(Ei(r),Ei(t))&&r.limitType===t.limitType}function T0(r){return`${dp(Ei(r))}|lt:${r.limitType}`}function eo(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>y0(o)).join(", ")}]`),Ph(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>mo(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>mo(o)).join(",")),`Target(${s})`}(Ei(r))}; limitType=${r.limitType})`}function Uh(r,t){return t.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ft.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,t)&&function(s,o){for(const u of Ql(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,t)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,t)&&function(s,o){return!(s.startAt&&!function(f,m,g){const _=cE(f,m,g);return f.inclusive?_<=0:_<0}(s.startAt,Ql(s),o)||s.endAt&&!function(f,m,g){const _=cE(f,m,g);return f.inclusive?_>=0:_>0}(s.endAt,Ql(s),o))}(r,t)}function _C(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function A0(r){return(t,n)=>{let s=!1;for(const o of Ql(r)){const u=yC(o,t,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function yC(r,t,n){const s=r.field.isKeyField()?ft.comparator(t.key,n.key):function(u,f,m){const g=f.data.field(u),_=m.data.field(u);return g!==null&&_!==null?fo(g,_):vt(42886)}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return vt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),o=this.inner[s];if(o===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],t))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(t){ss(this.inner,(n,s)=>{for(const[o,u]of s)t(o,u)})}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new ue(ft.comparator);function sr(){return vC}const S0=new ue(ft.comparator);function Bl(...r){let t=S0;for(const n of r)t=t.insert(n.key,n);return t}function w0(r){let t=S0;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Qs(){return Kl()}function b0(){return Kl()}function Kl(){return new aa(r=>r.toString(),(r,t)=>r.isEqual(t))}const EC=new ue(ft.comparator),TC=new Me(ft.comparator);function Pt(...r){let t=TC;for(const n of r)t=t.add(n);return t}const AC=new Me(Vt);function SC(){return AC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(t)?"-0":t}}function R0(r){return{integerValue:""+r}}function wC(r,t){return ZI(t)?R0(t):gp(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this._=void 0}}function bC(r,t,n){return r instanceof ru?function(o,u){const f={fields:{[l0]:{stringValue:o0},[c0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&hp(u)&&(u=xh(u)),u&&(f.fields[u0]=u),{mapValue:f}}(n,t):r instanceof po?C0(r,t):r instanceof su?N0(r,t):function(o,u){const f=I0(o,u),m=mE(f)+mE(o.Ae);return Om(f)&&Om(o.Ae)?R0(m):gp(o.serializer,m)}(r,t)}function RC(r,t,n){return r instanceof po?C0(r,t):r instanceof su?N0(r,t):n}function I0(r,t){return r instanceof Eh?function(s){return Om(s)||function(u){return!!u&&"doubleValue"in u}(s)}(t)?t:{integerValue:0}:null}class ru extends Lh{}class po extends Lh{constructor(t){super(),this.elements=t}}function C0(r,t){const n=D0(t);for(const s of r.elements)n.some(o=>wi(o,s))||n.push(s);return{arrayValue:{values:n}}}class su extends Lh{constructor(t){super(),this.elements=t}}function N0(r,t){let n=D0(t);for(const s of r.elements)n=n.filter(o=>!wi(o,s));return{arrayValue:{values:n}}}class Eh extends Lh{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function mE(r){return ye(r.integerValue||r.doubleValue)}function D0(r){return fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,n){this.field=t,this.transform=n}}function IC(r,t){return r.field.isEqual(t.field)&&function(s,o){return s instanceof po&&o instanceof po||s instanceof su&&o instanceof su?ho(s.elements,o.elements,wi):s instanceof Eh&&o instanceof Eh?wi(s.Ae,o.Ae):s instanceof ru&&o instanceof ru}(r.transform,t.transform)}class CC{constructor(t,n){this.version=t,this.transformResults=n}}class Yn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Yn}static exists(t){return new Yn(void 0,t)}static updateTime(t){return new Yn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rh(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Bh{}function M0(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new P0(r.key,Yn.none()):new du(r.key,r.data,Yn.none());{const n=r.data,s=fn.empty();let o=new Me(Qe.comparator);for(let u of t.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new as(r.key,s,new Sn(o.toArray()),Yn.none())}}function NC(r,t,n){r instanceof du?function(o,u,f){const m=o.value.clone(),g=gE(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(r,t,n):r instanceof as?function(o,u,f){if(!rh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=gE(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(V0(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,t,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,t,n)}function Yl(r,t,n,s){return r instanceof du?function(u,f,m,g){if(!rh(u.precondition,f))return m;const _=u.value.clone(),E=_E(u.fieldTransforms,g,f);return _.setAll(E),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null}(r,t,n,s):r instanceof as?function(u,f,m,g){if(!rh(u.precondition,f))return m;const _=_E(u.fieldTransforms,g,f),E=f.data;return E.setAll(V0(u)),E.setAll(_),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,t,n,s):function(u,f,m){return rh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(r,t,n)}function DC(r,t){let n=null;for(const s of r.fieldTransforms){const o=t.data.field(s.field),u=I0(s.transform,o||null);u!=null&&(n===null&&(n=fn.empty()),n.set(s.field,u))}return n||null}function pE(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ho(s,o,(u,f)=>IC(u,f))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class du extends Bh{constructor(t,n,s,o=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class as extends Bh{constructor(t,n,s,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function V0(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function gE(r,t,n){const s=new Map;Ft(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,m=t.data.field(u.field);s.set(u.field,RC(f,m,n[o]))}return s}function _E(r,t,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,bC(u,f,t))}return s}class P0 extends Bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends Bh{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(t,n,s,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&NC(u,t,s[o])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Yl(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Yl(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=b0();return this.mutations.forEach(o=>{const u=t.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=M0(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(At.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pt())}isEqual(t){return this.batchId===t.batchId&&ho(this.mutations,t.mutations,(n,s)=>pE(n,s))&&ho(this.baseMutations,t.baseMutations,(n,s)=>pE(n,s))}}class _p{constructor(t,n,s,o){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(t,n,s){Ft(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let o=function(){return EC}();const u=t.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new _p(t,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we,Lt;function xC(r){switch(r){case X.OK:return vt(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return vt(15467,{code:r})}}function x0(r){if(r===void 0)return rr("GRPC error has no .code"),X.UNKNOWN;switch(r){case we.OK:return X.OK;case we.CANCELLED:return X.CANCELLED;case we.UNKNOWN:return X.UNKNOWN;case we.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case we.INTERNAL:return X.INTERNAL;case we.UNAVAILABLE:return X.UNAVAILABLE;case we.UNAUTHENTICATED:return X.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case we.NOT_FOUND:return X.NOT_FOUND;case we.ALREADY_EXISTS:return X.ALREADY_EXISTS;case we.PERMISSION_DENIED:return X.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case we.ABORTED:return X.ABORTED;case we.OUT_OF_RANGE:return X.OUT_OF_RANGE;case we.UNIMPLEMENTED:return X.UNIMPLEMENTED;case we.DATA_LOSS:return X.DATA_LOSS;default:return vt(39323,{code:r})}}(Lt=we||(we={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Qr([4294967295,4294967295],0);function yE(r){const t=kC().encode(r),n=new YT;return n.update(t),new Uint8Array(n.digest())}function vE(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Qr([n,s],0),new Qr([o,u],0)]}class yp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new zl(`Invalid padding: ${n}`);if(s<0)throw new zl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Qr.fromNumber(this.ge)}ye(t,n,s){let o=t.add(n.multiply(Qr.fromNumber(s)));return o.compare(UC)===1&&(o=new Qr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=yE(t),[s,o]=vE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(t,n,s){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new yp(u,o,n);return s.forEach(m=>f.insert(m)),f}insert(t){if(this.ge===0)return;const n=yE(t),[s,o]=vE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(t,n,s,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const o=new Map;return o.set(t,mu.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new zh(At.min(),o,new ue(Vt),sr(),Pt())}}class mu{constructor(t,n,s,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new mu(s,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(t,n,s,o){this.be=t,this.removedTargetIds=n,this.key=s,this.De=o}}class k0{constructor(t,n){this.targetId=t,this.Ce=n}}class U0{constructor(t,n,s=Ke.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=o}}class EE{constructor(){this.ve=0,this.Fe=TE(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pt(),n=Pt(),s=Pt();return this.Fe.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:vt(38017,{changeType:u})}}),new mu(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=TE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LC{constructor(t){this.Ge=t,this.ze=new Map,this.je=sr(),this.Je=Kc(),this.He=Kc(),this.Ye=new ue(Vt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:vt(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach((s,o)=>{this.rt(o)&&n(o)})}st(t){const n=t.targetId,s=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Vm(u))if(s===0){const f=new ft(u.path);this.et(n,f,Je.newNoDocument(f,At.min()))}else Ft(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(t),g=m?this.ct(m,t,f):1;if(g!==0){this.it(n);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Jr(s).toUint8Array()}catch(g){if(g instanceof a0)return co("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new yp(f,o,u)}catch(g){return co(g instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(t){const n=new Map;this.ze.forEach((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Vm(m.target)){const g=new ft(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Je.newNoDocument(g,t))}u.Be&&(n.set(f,u.ke()),u.qe())}});let s=Pt();this.He.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.je.forEach((u,f)=>f.setReadTime(t));const o=new zh(t,n,this.Ye,this.je,s);return this.je=sr(),this.Je=Kc(),this.He=Kc(),this.Ye=new ue(Vt),o}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new EE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Me(Vt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Me(Vt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new EE),this.Ge.getRemoteKeysForTarget(t).forEach(n=>{this.et(t,n,null)})}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Kc(){return new ue(ft.comparator)}function TE(){return new ue(ft.comparator)}const BC={asc:"ASCENDING",desc:"DESCENDING"},zC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qC={and:"AND",or:"OR"};class jC{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function xm(r,t){return r.useProto3Json||Ph(t)?t:{value:t}}function Th(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function L0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function HC(r,t){return Th(r,t.toTimestamp())}function Ti(r){return Ft(!!r,49232),At.fromTimestamp(function(n){const s=Wr(n);return new ie(s.seconds,s.nanos)}(r))}function vp(r,t){return km(r,t).canonicalString()}function km(r,t){const n=function(o){return new ne(["projects",o.projectId,"databases",o.database])}(r).child("documents");return t===void 0?n:n.child(t)}function B0(r){const t=ne.fromString(r);return Ft(F0(t),10190,{key:t.toString()}),t}function Um(r,t){return vp(r.databaseId,t.path)}function fm(r,t){const n=B0(t);if(n.get(1)!==r.databaseId.projectId)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ot(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ft(q0(n))}function z0(r,t){return vp(r.databaseId,t)}function FC(r){const t=B0(r);return t.length===4?ne.emptyPath():q0(t)}function Lm(r){return new ne(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function q0(r){return Ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function AE(r,t,n){return{name:Um(r,t),fields:n.value.mapValue.fields}}function GC(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:vt(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Ft(E===void 0||typeof E=="string",58123),Ke.fromBase64String(E||"")):(Ft(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ke.fromUint8Array(E||new Uint8Array))}(r,t.targetChange.resumeToken),f=t.targetChange.cause,m=f&&function(_){const E=_.code===void 0?X.UNKNOWN:x0(_.code);return new ot(E,_.message||"")}(f);n=new U0(s,o,u,m||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const o=fm(r,s.document.name),u=Ti(s.document.updateTime),f=s.document.createTime?Ti(s.document.createTime):At.min(),m=new fn({mapValue:{fields:s.document.fields}}),g=Je.newFoundDocument(o,u,f,m),_=s.targetIds||[],E=s.removedTargetIds||[];n=new sh(_,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const o=fm(r,s.document),u=s.readTime?Ti(s.readTime):At.min(),f=Je.newNoDocument(o,u),m=s.removedTargetIds||[];n=new sh([],m,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const o=fm(r,s.document),u=s.removedTargetIds||[];n=new sh([],u,o,null)}else{if(!("filter"in t))return vt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new PC(o,u),m=s.targetId;n=new k0(m,f)}}return n}function QC(r,t){let n;if(t instanceof du)n={update:AE(r,t.key,t.value)};else if(t instanceof P0)n={delete:Um(r,t.key)};else if(t instanceof as)n={update:AE(r,t.key,t.data),updateMask:e2(t.fieldMask)};else{if(!(t instanceof OC))return vt(16599,{Vt:t.type});n={verify:Um(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(u,f){const m=f.transform;if(m instanceof ru)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof po)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof su)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Eh)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw vt(20930,{transform:f.transform})}(0,s))),t.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:HC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:vt(27497)}(r,t.precondition)),n}function KC(r,t){return r&&r.length>0?(Ft(t!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?Ti(o.updateTime):Ti(u);return f.isEqual(At.min())&&(f=Ti(u)),new CC(f,o.transformResults||[])}(n,t))):[]}function YC(r,t){return{documents:[z0(r,t.path)]}}function XC(r,t){const n={structuredQuery:{}},s=t.path;let o;t.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=z0(r,o);const u=function(_){if(_.length!==0)return H0($n.create(_,"and"))}(t.filters);u&&(n.structuredQuery.where=u);const f=function(_){if(_.length!==0)return _.map(E=>function(b){return{field:no(b.field),direction:WC(b.dir)}}(E))}(t.orderBy);f&&(n.structuredQuery.orderBy=f);const m=xm(r,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:n,parent:o}}function $C(r){let t=FC(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ft(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=function(w){const b=j0(w);return b instanceof $n&&g0(b)?b.getFilters():[b]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(b=>function(F){return new iu(io(F.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction))}(b))}(n.orderBy));let m=null;n.limit&&(m=function(w){let b;return b=typeof w=="object"?w.value:w,Ph(b)?null:b}(n.limit));let g=null;n.startAt&&(g=function(w){const b=!!w.before,B=w.values||[];return new yh(B,b)}(n.startAt));let _=null;return n.endAt&&(_=function(w){const b=!w.before,B=w.values||[];return new yh(B,b)}(n.endAt)),pC(t,o,f,u,m,"F",g,_)}function ZC(r,t){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:o})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function j0(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=io(n.unaryFilter.field);return be.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=io(n.unaryFilter.field);return be.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(n.unaryFilter.field);return be.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=io(n.unaryFilter.field);return be.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}}(r):r.fieldFilter!==void 0?function(n){return be.create(io(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(s=>j0(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return vt(1026)}}(n.compositeFilter.op))}(r):vt(30097,{filter:r})}function WC(r){return BC[r]}function JC(r){return zC[r]}function t2(r){return qC[r]}function no(r){return{fieldPath:r.canonicalString()}}function io(r){return Qe.fromServerFormat(r.fieldPath)}function H0(r){return r instanceof be?function(n){if(n.op==="=="){if(uE(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(lE(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uE(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(lE(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:JC(n.op),value:n.value}}}(r):r instanceof $n?function(n){const s=n.getFilters().map(o=>H0(o));return s.length===1?s[0]:{compositeFilter:{op:t2(n.op),filters:s}}}(r):vt(54877,{filter:r})}function e2(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function F0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n,s,o,u=At.min(),f=At.min(),m=Ke.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new Hr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.yt=t}}function i2(r){const t=$C({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?vh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.Cn=new s2}addToCollectionParentIndex(t,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(t,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return Z.resolve()}deleteFieldIndex(t,n){return Z.resolve()}deleteAllFieldIndexes(t){return Z.resolve()}createTargetIndexes(t,n){return Z.resolve()}getDocumentsMatchingTarget(t,n){return Z.resolve(null)}getIndexType(t,n){return Z.resolve(0)}getFieldIndexes(t,n){return Z.resolve([])}getNextCollectionGroupToUpdate(t){return Z.resolve(null)}getMinOffset(t,n){return Z.resolve(Zr.min())}getMinOffsetFromCollectionGroup(t,n){return Z.resolve(Zr.min())}updateCollectionGroup(t,n,s){return Z.resolve()}updateIndexEntries(t,n){return Z.resolve()}}class s2{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n]||new Me(ne.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(t){return(this.index[t]||new Me(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G0=41943040;class hn{static withCacheSize(t){return new hn(t,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(G0,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new go(0)}static cr(){return new go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="LruGarbageCollector",a2=1048576;function bE([r,t],[n,s]){const o=Vt(r,n);return o===0?Vt(t,s):o}class o2{constructor(t){this.Ir=t,this.buffer=new Me(bE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();bE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l2{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lt(wE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){To(n)?lt(wE,"Ignoring IndexedDB error during garbage collection: ",n):await Eo(n)}await this.Vr(3e5)})}}class u2{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return Z.resolve(Vh.ce);const s=new o2(n);return this.mr.forEachTarget(t,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(t,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(SE)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SE):this.yr(t,n))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,o,u,f,m,g,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(t,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(t,s,n))).next(w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(t,s))).next(w=>(_=Date.now(),to()<=Mt.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function c2(r,t){return new u2(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new aa(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Je.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Z.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(t,n,s,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(t,n))).next(o=>(s!==null&&Yl(s.mutation,o,Sn.empty(),ie.now()),o))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Pt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Pt()){const o=Qs();return this.populateOverlays(t,o,n).next(()=>this.computeViews(t,n,o,s).next(u=>{let f=Bl();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(t,n){const s=Qs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Pt()))}populateOverlays(t,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(t,n,s,o){let u=sr();const f=Kl(),m=function(){return Kl()}();return n.forEach((g,_)=>{const E=s.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof as)?u=u.insert(_.key,_):E!==void 0?(f.set(_.key,E.mutation.getFieldMask()),Yl(E.mutation,_,E.mutation.getFieldMask(),ie.now())):f.set(_.key,Sn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,E)=>f.set(_,E)),n.forEach((_,E)=>m.set(_,new f2(E,f.get(_)??null))),m))}recalculateAndSaveOverlays(t,n){const s=Kl();let o=new ue((f,m)=>f-m),u=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const _=n.get(g);if(_===null)return;let E=s.get(g)||Sn.empty();E=m.applyToLocalView(_,E),s.set(g,E);const w=(o.get(m.batchId)||Pt()).add(g);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,w=b0();E.forEach(b=>{if(!u.has(b)){const B=M0(n.get(b),s.get(b));B!==null&&w.set(b,B),u=u.add(b)}}),f.push(this.documentOverlayCache.saveOverlays(t,_,w))}return Z.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,o){return function(f){return ft.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):E0(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,o):this.getDocumentsMatchingCollectionQuery(t,n,s,o)}getNextDocuments(t,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,o-u.size):Z.resolve(Qs());let m=Jl,g=u;return f.next(_=>Z.forEach(_,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?Z.resolve():this.remoteDocumentCache.getEntry(t,E).next(b=>{g=g.insert(E,b)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,Pt())).next(E=>({batchId:m,changes:w0(E)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ft(n)).next(s=>{let o=Bl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(t,n,s,o){const u=n.collectionGroup;let f=Bl();return this.indexManager.getCollectionParents(t,u).next(m=>Z.forEach(m,g=>{const _=function(w,b){return new Ao(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,s,o).next(E=>{E.forEach((w,b)=>{f=f.insert(w,b)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(t,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,o))).next(f=>{u.forEach((g,_)=>{const E=_.getKey();f.get(E)===null&&(f=f.insert(E,Je.newInvalidDocument(E)))});let m=Bl();return f.forEach((g,_)=>{const E=u.get(g);E!==void 0&&Yl(E.mutation,_,Sn.empty(),ie.now()),Uh(n,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ti(o.createTime)}}(n)),Z.resolve()}getNamedQuery(t,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,function(o){return{name:o.name,query:i2(o.bundledQuery),readTime:Ti(o.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.overlays=new ue(ft.comparator),this.qr=new Map}getOverlay(t,n){return Z.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Qs();return Z.forEach(n,o=>this.getOverlay(t,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((o,u)=>{this.St(t,n,u)}),Z.resolve()}removeOverlaysForBatchId(t,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(t,n,s){const o=Qs(),u=n.length+1,f=new ft(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Z.resolve(o)}getOverlaysForCollectionGroup(t,n,s,o){let u=new ue((_,E)=>_-E);const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>s){let E=u.get(_.largestBatchId);E===null&&(E=Qs(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=Qs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return Z.resolve(m)}St(t,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new VC(n,s));let u=this.qr.get(n);u===void 0&&(u=Pt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(t){return Z.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.Qr=new Me(Be.$r),this.Ur=new Me(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new Be(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Gr(new Be(t,n))}zr(t,n){t.forEach(s=>this.removeReference(s,n))}jr(t){const n=new ft(new ne([])),s=new Be(n,t),o=new Be(n,t+1),u=[];return this.Ur.forEachInRange([s,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new ft(new ne([])),s=new Be(n,t),o=new Be(n,t+1);let u=Pt();return this.Ur.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(t){const n=new Be(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Be{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return ft.comparator(t.key,n.key)||Vt(t.Yr,n.Yr)}static Kr(t,n){return Vt(t.Yr,n.Yr)||ft.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Me(Be.$r)}checkEmpty(t){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new MC(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new Be(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(t,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,o=this.ei(s),u=o<0?0:o;return Z.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?cp:this.tr-1)}getAllMutationBatches(t){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Be(n,0),o=new Be(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],f=>{const m=this.Xr(f.Yr);u.push(m)}),Z.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Me(Vt);return n.forEach(o=>{const u=new Be(o,0),f=new Be(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],m=>{s=s.add(m.Yr)})}),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,o=s.length+1;let u=s;ft.isDocumentKey(u)||(u=u.child(""));const f=new Be(new ft(u),0);let m=new Me(Vt);return this.Zr.forEachWhile(g=>{const _=g.key.path;return!!s.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Yr)),!0)},f),Z.resolve(this.ti(m))}ti(t){const n=[];return t.forEach(s=>{const o=this.Xr(s);o!==null&&n.push(o)}),n}removeMutationBatch(t,n){Ft(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(n.mutations,o=>{const u=new Be(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,n){const s=new Be(n,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,Z.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t){this.ri=t,this.docs=function(){return new ue(ft.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return Z.resolve(s?s.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(t,n){let s=sr();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Je.newInvalidDocument(o))}),Z.resolve(s)}getDocumentsMatchingQuery(t,n,s,o){let u=sr();const f=n.path,m=new ft(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||KI(QI(E),s)<=0||(o.has(E.key)||Uh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return Z.resolve(u)}getAllFromCollectionGroup(t,n,s,o){vt(9500)}ii(t,n){return Z.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new v2(this)}getSize(t){return Z.resolve(this.size)}}class v2 extends h2{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(s)}),Z.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t){this.persistence=t,this.si=new aa(n=>dp(n),mp),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new Ep,this.targetCount=0,this.ai=go.ur()}forEachTarget(t,n){return this.si.forEach((s,o)=>n(o)),Z.resolve()}getLastRemoteSnapshotVersion(t){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Z.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),Z.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new go(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(t,n){return this.Pr(n),Z.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(t,n,s){let o=0;const u=[];return this.si.forEach((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),Z.waitFor(u).next(()=>o)}getTargetCount(t){return Z.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return Z.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),Z.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(t,f))}),Z.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return Z.resolve(s)}containsKey(t,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,n){this.ui={},this.overlays={},this.ci=new Vh(0),this.li=!1,this.li=!0,this.hi=new g2,this.referenceDelegate=t(this),this.Pi=new E2(this),this.indexManager=new r2,this.remoteDocumentCache=function(o){return new y2(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new n2(n),this.Ii=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new p2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new _2(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){lt("MemoryPersistence","Starting transaction:",t);const o=new T2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(t,n){return Z.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,n)))}}class T2 extends XI{constructor(t){super(),this.currentSequenceNumber=t}}class Tp{constructor(t){this.persistence=t,this.Ri=new Ep,this.Vi=null}static mi(t){return new Tp(t)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),Z.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(t,n))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,s=>{const o=ft.fromPath(s);return this.gi(t,o).next(u=>{u||n.removeEntry(o,At.min())})}).next(()=>(this.Vi=null,n.apply(t)))}updateLimboDocument(t,n){return this.gi(t,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(t){return 0}gi(t,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Ah{constructor(t,n){this.persistence=t,this.pi=new aa(s=>WI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=c2(this,n)}static mi(t,n){return new Ah(t,n)}Ei(){}di(t){return Z.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(o=>s+o))}wr(t){let n=0;return this.pr(t,s=>{n++}).next(()=>n)}pr(t,n){return Z.forEach(this.pi,(s,o)=>this.br(t,s,o).next(u=>u?Z.resolve():n(o)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,f=>this.br(t,f,n).next(m=>{m||(s++,u.removeEntry(f,At.min()))})).next(()=>u.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),Z.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Z.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),Z.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),Z.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=nh(t.data.value)),n}br(t,n,s){return Z.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,n,s,o){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=o}static As(t,n){let s=Pt(),o=Pt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ap(t,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return W1()?8:$I(tn())>0?6:4}()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,o){const u={result:null};return this.ys(t,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(t,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new A2;return this.Ss(t,n,f).next(m=>{if(u.result=m,this.Vs)return this.bs(t,n,f,m.size)})}).next(()=>u.result)}bs(t,n,s,o){return s.documentReadCount<this.fs?(to()<=Mt.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(to()<=Mt.DEBUG&&lt("QueryEngine","Query:",eo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(to()<=Mt.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ei(n))):Z.resolve())}ys(t,n){if(dE(n))return Z.resolve(null);let s=Ei(n);return this.indexManager.getIndexType(t,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=vh(n,null,"F"),s=Ei(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(u=>{const f=Pt(...u);return this.ps.getDocuments(t,f).next(m=>this.indexManager.getMinOffset(t,s).next(g=>{const _=this.Ds(n,m);return this.Cs(n,_,f,g.readTime)?this.ys(t,vh(n,null,"F")):this.vs(t,_,n,g)}))})))}ws(t,n,s,o){return dE(n)||o.isEqual(At.min())?Z.resolve(null):this.ps.getDocuments(t,s).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,o)?Z.resolve(null):(to()<=Mt.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),eo(n)),this.vs(t,f,n,GI(o,Jl)).next(m=>m))})}Ds(t,n){let s=new Me(A0(t));return n.forEach((o,u)=>{Uh(t,u)&&(s=s.add(u))}),s}Cs(t,n,s,o){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,s){return to()<=Mt.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",eo(n)),this.ps.getDocumentsMatchingQuery(t,n,Zr.min(),s)}vs(t,n,s,o){return this.ps.getDocumentsMatchingQuery(t,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="LocalStore",w2=3e8;class b2{constructor(t,n,s,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new ue(Vt),this.xs=new aa(u=>dp(u),mp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new d2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ms))}}function R2(r,t,n,s){return new b2(r,t,n,s)}async function K0(r,t){const n=St(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],m=[];let g=Pt();for(const _ of o){f.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next(_=>({Ls:_,removedBatchIds:f,addedBatchIds:m}))})})}function I2(r,t){const n=St(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const w=_.batch,b=w.keys();let B=Z.resolve();return b.forEach(F=>{B=B.next(()=>E.getEntry(g,F)).next(J=>{const Q=_.docVersions.get(F);Ft(Q!==null,48541),J.version.compareTo(Q)<0&&(w.applyToRemoteDocument(J,_),J.isValidDocument()&&(J.setReadTime(_.commitVersion),E.addEntry(J)))})}),B.next(()=>m.mutationQueue.removeMutationBatch(g,w))}(n,s,t,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Pt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>n.localDocuments.getDocuments(s,o))})}function Y0(r){const t=St(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Pi.getLastRemoteSnapshotVersion(n))}function C2(r,t){const n=St(r),s=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach((E,w)=>{const b=o.get(w);if(!b)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(u,E.addedDocuments,w)));let B=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(w)!==null?B=B.withResumeToken(Ke.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):E.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(E.resumeToken,s)),o=o.insert(w,B),function(J,Q,nt){return J.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=w2?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0}(b,B,E)&&m.push(n.Pi.updateTargetData(u,B))});let g=sr(),_=Pt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(N2(u,f,t.documentUpdates).next(E=>{g=E.ks,_=E.qs})),!s.isEqual(At.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next(w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return Z.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(n.Ms=o,u))}function N2(r,t,n){let s=Pt(),o=Pt();return n.forEach(u=>s=s.add(u)),t.getEntries(r,s).next(u=>{let f=sr();return n.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(At.min())?(t.removeEntry(m,g.readTime),f=f.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),f=f.insert(m,g)):lt(Sp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{ks:f,qs:o}})}function D2(r,t){const n=St(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=cp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function O2(r,t){const n=St(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Pi.getTargetData(s,t).next(u=>u?(o=u,Z.resolve(o)):n.Pi.allocateTargetId(s).next(f=>(o=new Hr(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s})}async function Bm(r,t,n){const s=St(r),o=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!To(f))throw f;lt(Sp,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(o.target)}function RE(r,t,n){const s=St(r);let o=At.min(),u=Pt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,_,E){const w=St(g),b=w.xs.get(E);return b!==void 0?Z.resolve(w.Ms.get(b)):w.Pi.getTargetData(_,E)}(s,f,Ei(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,t,n?o:At.min(),n?u:Pt())).next(m=>(M2(s,_C(t),m),{documents:m,Qs:u})))}function M2(r,t,n){let s=r.Os.get(t)||At.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Os.set(t,s)}class IE{constructor(){this.activeTargetIds=SC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class V2{constructor(){this.Mo=new IE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new IE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="ConnectivityMonitor";class NE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(CE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lt(CE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc=null;function zm(){return Yc===null?Yc=function(){return 268435456+Math.round(2147483648*Math.random())}():Yc++,"0x"+Yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="RestConnection",x2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class k2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===gh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(t,n,s,o,u){const f=zm(),m=this.zo(t,n.toUriEncodedString());lt(dm,`Sending RPC '${t}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:_}=new URL(m),E=is(_);return this.Jo(t,m,g,s,E).then(w=>(lt(dm,`Received RPC '${t}' ${f}: `,w),w),w=>{throw co(dm,`RPC '${t}' ${f} failed with error: `,w,"url: ",m,"request:",s),w})}Ho(t,n,s,o,u,f){return this.Go(t,n,s,o,u)}jo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>t[u]=o),s&&s.headers.forEach((o,u)=>t[u]=o)}zo(t,n){const s=x2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class L2 extends k2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,o,u){const f=zm();return new Promise((m,g)=>{const _=new XT;_.setWithCredentials(!0),_.listenOnce($T.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case eh.NO_ERROR:const w=_.getResponseJson();lt(Ze,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(w)),m(w);break;case eh.TIMEOUT:lt(Ze,`RPC '${t}' ${f} timed out`),g(new ot(X.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:const b=_.getStatus();if(lt(Ze,`RPC '${t}' ${f} failed with status:`,b,"response text:",_.getResponseText()),b>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const F=B?.error;if(F&&F.status&&F.message){const J=function(nt){const st=nt.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(st)>=0?st:X.UNKNOWN}(F.status);g(new ot(J,F.message))}else g(new ot(X.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new ot(X.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:t,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{lt(Ze,`RPC '${t}' ${f} completed.`)}});const E=JSON.stringify(o);lt(Ze,`RPC '${t}' ${f} sending request:`,o),_.send(n,"POST",E,s,15)})}T_(t,n,s){const o=zm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=JT(),m=WT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const E=u.join("");lt(Ze,`Creating RPC '${t}' stream ${o}: ${E}`,g);const w=f.createWebChannel(E,g);this.I_(w);let b=!1,B=!1;const F=new U2({Yo:Q=>{B?lt(Ze,`Not sending because RPC '${t}' stream ${o} is closed:`,Q):(b||(lt(Ze,`Opening RPC '${t}' stream ${o} transport.`),w.open(),b=!0),lt(Ze,`RPC '${t}' stream ${o} sending:`,Q),w.send(Q))},Zo:()=>w.close()}),J=(Q,nt,st)=>{Q.listen(nt,at=>{try{st(at)}catch(pt){setTimeout(()=>{throw pt},0)}})};return J(w,Ll.EventType.OPEN,()=>{B||(lt(Ze,`RPC '${t}' stream ${o} transport opened.`),F.o_())}),J(w,Ll.EventType.CLOSE,()=>{B||(B=!0,lt(Ze,`RPC '${t}' stream ${o} transport closed`),F.a_(),this.E_(w))}),J(w,Ll.EventType.ERROR,Q=>{B||(B=!0,co(Ze,`RPC '${t}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),F.a_(new ot(X.UNAVAILABLE,"The operation could not be completed")))}),J(w,Ll.EventType.MESSAGE,Q=>{if(!B){const nt=Q.data[0];Ft(!!nt,16349);const st=nt,at=st?.error||st[0]?.error;if(at){lt(Ze,`RPC '${t}' stream ${o} received error:`,at);const pt=at.status;let dt=function(S){const I=we[S];if(I!==void 0)return x0(I)}(pt),bt=at.message;dt===void 0&&(dt=X.INTERNAL,bt="Unknown error status: "+pt+" with message "+at.message),B=!0,F.a_(new ot(dt,bt)),w.close()}else lt(Ze,`RPC '${t}' stream ${o} received:`,nt),F.u_(nt)}}),J(m,ZT.STAT_EVENT,Q=>{Q.stat===Cm.PROXY?lt(Ze,`RPC '${t}' stream ${o} detected buffering proxy`):Q.stat===Cm.NOPROXY&&lt(Ze,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{F.__()},0),F}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(n=>n===t)}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r){return new jC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n,s=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&lt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="PersistentStream";class $0{constructor(t,n,s,o,u,f,m,g){this.Mi=t,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X0(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===n&&this.G_(s,o)},s=>{t(()=>{const o=new ot(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lt(DE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget(()=>this.D_===t?n():(lt(DE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B2 extends $0{constructor(t,n,s,o,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=GC(this.serializer,t),s=function(u){if(!("targetChange"in u))return At.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?At.min():f.readTime?Ti(f.readTime):At.min()}(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Lm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=Vm(g)?{documents:YC(u,g)}:{query:XC(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=L0(u,f.resumeToken);const _=xm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}else if(f.snapshotVersion.compareTo(At.min())>0){m.readTime=Th(u,f.snapshotVersion.toTimestamp());const _=xm(u,f.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const s=ZC(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Lm(this.serializer),n.removeTarget=t,this.q_(n)}}class z2 extends $0{constructor(t,n,s,o,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=KC(t.writeResults,t.commitTime),s=Ti(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Lm(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>QC(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{}class j2 extends q2{constructor(t,n,s,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(t,km(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ot(X.UNKNOWN,u.toString())})}Ho(t,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Ho(t,km(n,s),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ot(X.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class H2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="RemoteStore";class F2{constructor(t,n,s,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{oa(this)&&(lt(ea,"Restarting streams for network reachability change."),await async function(g){const _=St(g);_.Ea.add(4),await pu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await jh(_)}(this))})}),this.Ra=new H2(s,o)}}async function jh(r){if(oa(r))for(const t of r.da)await t(!0)}async function pu(r){for(const t of r.da)await t(!1)}function Z0(r,t){const n=St(r);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ip(n)?Rp(n):So(n).O_()&&bp(n,t))}function wp(r,t){const n=St(r),s=So(n);n.Ia.delete(t),s.O_()&&W0(n,t),n.Ia.size===0&&(s.O_()?s.L_():oa(n)&&n.Ra.set("Unknown"))}function bp(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}So(r).Y_(t)}function W0(r,t){r.Va.Ue(t),So(r).Z_(t)}function Rp(r){r.Va=new LC({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),So(r).start(),r.Ra.ua()}function Ip(r){return oa(r)&&!So(r).x_()&&r.Ia.size>0}function oa(r){return St(r).Ea.size===0}function J0(r){r.Va=void 0}async function G2(r){r.Ra.set("Online")}async function Q2(r){r.Ia.forEach((t,n)=>{bp(r,t)})}async function K2(r,t){J0(r),Ip(r)?(r.Ra.ha(t),Rp(r)):r.Ra.set("Unknown")}async function Y2(r,t,n){if(r.Ra.set("Online"),t instanceof U0&&t.state===2&&t.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))}(r,t)}catch(s){lt(ea,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Sh(r,s)}else if(t instanceof sh?r.Va.Ze(t):t instanceof k0?r.Va.st(t):r.Va.tt(t),!n.isEqual(At.min()))try{const s=await Y0(r.localStore);n.compareTo(s)>=0&&await function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(_);E&&u.Ia.set(_,E.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,_)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Ke.EMPTY_BYTE_STRING,E.snapshotVersion)),W0(u,g);const w=new Hr(E.target,g,_,E.sequenceNumber);bp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){lt(ea,"Failed to raise snapshot:",s),await Sh(r,s)}}async function Sh(r,t,n){if(!To(t))throw t;r.Ea.add(1),await pu(r),r.Ra.set("Offline"),n||(n=()=>Y0(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{lt(ea,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await jh(r)})}function tA(r,t){return t().catch(n=>Sh(r,n,t))}async function Hh(r){const t=St(r),n=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:cp;for(;X2(t);)try{const o=await D2(t.localStore,s);if(o===null){t.Ta.length===0&&n.L_();break}s=o.batchId,$2(t,o)}catch(o){await Sh(t,o)}eA(t)&&nA(t)}function X2(r){return oa(r)&&r.Ta.length<10}function $2(r,t){r.Ta.push(t);const n=es(r);n.O_()&&n.X_&&n.ea(t.mutations)}function eA(r){return oa(r)&&!es(r).x_()&&r.Ta.length>0}function nA(r){es(r).start()}async function Z2(r){es(r).ra()}async function W2(r){const t=es(r);for(const n of r.Ta)t.ea(n.mutations)}async function J2(r,t,n){const s=r.Ta.shift(),o=_p.from(s,t,n);await tA(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Hh(r)}async function tN(r,t){t&&es(r).X_&&await async function(s,o){if(function(f){return xC(f)&&f!==X.ABORTED}(o.code)){const u=s.Ta.shift();es(s).B_(),await tA(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Hh(s)}}(r,t),eA(r)&&nA(r)}async function OE(r,t){const n=St(r);n.asyncQueue.verifyOperationInProgress(),lt(ea,"RemoteStore received new credentials");const s=oa(n);n.Ea.add(3),await pu(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await jh(n)}async function eN(r,t){const n=St(r);t?(n.Ea.delete(2),await jh(n)):t||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function So(r){return r.ma||(r.ma=function(n,s,o){const u=St(n);return u.sa(),new B2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:G2.bind(null,r),t_:Q2.bind(null,r),r_:K2.bind(null,r),H_:Y2.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),Ip(r)?Rp(r):r.Ra.set("Unknown")):(await r.ma.stop(),J0(r))})),r.ma}function es(r){return r.fa||(r.fa=function(n,s,o){const u=St(n);return u.sa(),new z2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z2.bind(null,r),r_:tN.bind(null,r),ta:W2.bind(null,r),na:J2.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await Hh(r)):(await r.fa.stop(),r.Ta.length>0&&(lt(ea,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n,s,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,o,u){const f=Date.now()+s,m=new Cp(t,n,f,o,u);return m.start(s),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(X.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Np(r,t){if(rr("AsyncQueue",`${t}: ${r}`),To(r))return new ot(X.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(t){return new lo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ft.comparator(n.key,s.key):(n,s)=>ft.comparator(n.key,s.key),this.keyedMap=Bl(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof lo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new lo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.ga=new ue(ft.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):vt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal((n,s)=>{t.push(s)}),t}}class _o{constructor(t,n,s,o,u,f,m,g,_){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,n,s,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new _o(t,n,lo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class iN{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=St(n),u=o.queries;o.queries=VE(),u.forEach((f,m)=>{for(const g of m.Sa)g.onError(s)})})(this,new ot(X.ABORTED,"Firestore shutting down"))}}function VE(){return new aa(r=>T0(r),kh)}async function iA(r,t){const n=St(r);let s=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(s=2):(u=new nN,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Np(f,`Initialization of query '${eo(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Dp(n)}async function rA(r,t){const n=St(r),s=t.query;let o=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function rN(r,t){const n=St(r);let s=!1;for(const o of t){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(s=!0);f.wa=o}}s&&Dp(n)}function sN(r,t,n){const s=St(r),o=s.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(t)}function Dp(r){r.Ca.forEach(t=>{t.next()})}var qm,PE;(PE=qm||(qm={})).Ma="default",PE.Cache="cache";class sA{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const o of t.docChanges)o.type!==3&&s.push(o);t=new _o(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=_o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(t){this.key=t}}class oA{constructor(t){this.key=t}}class aN{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=A0(t),this.tu=new lo(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new ME,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,w)=>{const b=o.get(E),B=Uh(this.query,w)?w:null,F=!!b&&this.mutatedKeys.has(b.key),J=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Q=!1;b&&B?b.data.isEqual(B.data)?F!==J&&(s.track({type:3,doc:B}),Q=!0):this.su(b,B)||(s.track({type:2,doc:B}),Q=!0,(g&&this.eu(B,g)>0||_&&this.eu(B,_)<0)&&(m=!0)):!b&&B?(s.track({type:0,doc:B}),Q=!0):b&&!B&&(s.track({type:1,doc:b}),Q=!0,(g||_)&&(m=!0)),Q&&(B?(f=f.add(B),u=J?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort((E,w)=>function(B,F){const J=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:Q})}};return J(B)-J(F)}(E.type,w.type)||this.eu(E.doc,w.doc)),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,_=g!==this.Za;return this.Za=g,f.length!==0||_?{snapshot:new _o(this.query,t.tu,u,f,t.mutatedKeys,g===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ME,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return t.forEach(s=>{this.Xa.has(s)||n.push(new oA(s))}),this.Xa.forEach(s=>{t.has(s)||n.push(new aA(s))}),n}cu(t){this.Ya=t.Qs,this.Xa=Pt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return _o.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Op="SyncEngine";class oN{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class lN{constructor(t){this.key=t,this.hu=!1}}class uN{constructor(t,n,s,o,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new aa(m=>T0(m),kh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(ft.comparator),this.Au=new Map,this.Ru=new Ep,this.Vu={},this.mu=new Map,this.fu=go.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cN(r,t,n=!0){const s=dA(r);let o;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await lA(s,t,n,!0),o}async function hN(r,t){const n=dA(r);await lA(n,t,!0,!1)}async function lA(r,t,n,s){const o=await O2(r.localStore,Ei(t)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await fN(r,t,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Z0(r.remoteStore,o),m}async function fN(r,t,n,s,o){r.pu=(w,b,B)=>async function(J,Q,nt,st){let at=Q.view.ru(nt);at.Cs&&(at=await RE(J.localStore,Q.query,!1).then(({documents:V})=>Q.view.ru(V,at)));const pt=st&&st.targetChanges.get(Q.targetId),dt=st&&st.targetMismatches.get(Q.targetId)!=null,bt=Q.view.applyChanges(at,J.isPrimaryClient,pt,dt);return kE(J,Q.targetId,bt.au),bt.snapshot}(r,w,b,B);const u=await RE(r.localStore,t,!0),f=new aN(t,u.Qs),m=f.ru(u.documents),g=mu.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),_=f.applyChanges(m,r.isPrimaryClient,g);kE(r,n,_.au);const E=new oN(t,n,f);return r.Tu.set(t,E),r.Iu.has(n)?r.Iu.get(n).push(t):r.Iu.set(n,[t]),_.snapshot}async function dN(r,t,n){const s=St(r),o=s.Tu.get(t),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(f=>!kh(f,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Bm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&wp(s.remoteStore,o.targetId),jm(s,o.targetId)}).catch(Eo)):(jm(s,o.targetId),await Bm(s.localStore,o.targetId,!0))}async function mN(r,t){const n=St(r),s=n.Tu.get(t),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),wp(n.remoteStore,s.targetId))}async function pN(r,t,n){const s=AN(r);try{const o=await function(f,m){const g=St(f),_=ie.now(),E=m.reduce((B,F)=>B.add(F.key),Pt());let w,b;return g.persistence.runTransaction("Locally write mutations","readwrite",B=>{let F=sr(),J=Pt();return g.Ns.getEntries(B,E).next(Q=>{F=Q,F.forEach((nt,st)=>{st.isValidDocument()||(J=J.add(nt))})}).next(()=>g.localDocuments.getOverlayedDocuments(B,F)).next(Q=>{w=Q;const nt=[];for(const st of m){const at=DC(st,w.get(st.key).overlayedDocument);at!=null&&nt.push(new as(st.key,at,d0(at.value.mapValue),Yn.exists(!0)))}return g.mutationQueue.addMutationBatch(B,_,nt,m)}).next(Q=>{b=Q;const nt=Q.applyToLocalDocumentSet(w,J);return g.documentOverlayCache.saveOverlays(B,Q.batchId,nt)})}).then(()=>({batchId:b.batchId,changes:w0(w)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let _=f.Vu[f.currentUser.toKey()];_||(_=new ue(Vt)),_=_.insert(m,g),f.Vu[f.currentUser.toKey()]=_}(s,o.batchId,n),await gu(s,o.changes),await Hh(s.remoteStore)}catch(o){const u=Np(o,"Failed to persist write");n.reject(u)}}async function uA(r,t){const n=St(r);try{const s=await C2(n.localStore,t);t.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ft(f.hu,14607):o.removedDocuments.size>0&&(Ft(f.hu,42227),f.hu=!1))}),await gu(n,s,t)}catch(s){await Eo(s)}}function xE(r,t,n){const s=St(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach((u,f)=>{const m=f.view.va(t);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=St(f);g.onlineState=m;let _=!1;g.queries.forEach((E,w)=>{for(const b of w.Sa)b.va(m)&&(_=!0)}),_&&Dp(g)}(s.eventManager,t),o.length&&s.Pu.H_(o),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function gN(r,t,n){const s=St(r);s.sharedClientState.updateQueryState(t,"rejected",n);const o=s.Au.get(t),u=o&&o.key;if(u){let f=new ue(ft.comparator);f=f.insert(u,Je.newNoDocument(u,At.min()));const m=Pt().add(u),g=new zh(At.min(),new Map,new ue(Vt),f,m);await uA(s,g),s.du=s.du.remove(u),s.Au.delete(t),Mp(s)}else await Bm(s.localStore,t,!1).then(()=>jm(s,t,n)).catch(Eo)}async function _N(r,t){const n=St(r),s=t.batch.batchId;try{const o=await I2(n.localStore,t);hA(n,s,null),cA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await gu(n,o)}catch(o){await Eo(o)}}async function yN(r,t,n){const s=St(r);try{const o=await function(f,m){const g=St(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(w=>(Ft(w!==null,37113),E=w.keys(),g.mutationQueue.removeMutationBatch(_,w))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(s.localStore,t);hA(s,t,n),cA(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await gu(s,o)}catch(o){await Eo(o)}}function cA(r,t){(r.mu.get(t)||[]).forEach(n=>{n.resolve()}),r.mu.delete(t)}function hA(r,t,n){const s=St(r);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),s.Vu[s.currentUser.toKey()]=o}}function jm(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||fA(r,s)})}function fA(r,t){r.Eu.delete(t.path.canonicalString());const n=r.du.get(t);n!==null&&(wp(r.remoteStore,n),r.du=r.du.remove(t),r.Au.delete(n),Mp(r))}function kE(r,t,n){for(const s of n)s instanceof aA?(r.Ru.addReference(s.key,t),vN(r,s)):s instanceof oA?(lt(Op,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||fA(r,s.key)):vt(19791,{wu:s})}function vN(r,t){const n=t.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(lt(Op,"New document in limbo: "+n),r.Eu.add(s),Mp(r))}function Mp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const n=new ft(ne.fromString(t)),s=r.fu.next();r.Au.set(s,new lN(n)),r.du=r.du.insert(n,s),Z0(r.remoteStore,new Hr(Ei(pp(n.path)),s,"TargetPurposeLimboResolution",Vh.ce))}}async function gu(r,t,n){const s=St(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((m,g)=>{f.push(s.pu(g,t,n).then(_=>{if((_||n)&&s.isPrimaryClient){const E=_?!_.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(_){o.push(_);const E=Ap.As(g.targetId,_);u.push(E)}}))}),await Promise.all(f),s.Pu.H_(o),await async function(g,_){const E=St(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Z.forEach(_,b=>Z.forEach(b.Es,B=>E.persistence.referenceDelegate.addReference(w,b.targetId,B)).next(()=>Z.forEach(b.ds,B=>E.persistence.referenceDelegate.removeReference(w,b.targetId,B)))))}catch(w){if(!To(w))throw w;lt(Sp,"Failed to update sequence numbers: "+w)}for(const w of _){const b=w.targetId;if(!w.fromCache){const B=E.Ms.get(b),F=B.snapshotVersion,J=B.withLastLimboFreeSnapshotVersion(F);E.Ms=E.Ms.insert(b,J)}}}(s.localStore,u))}async function EN(r,t){const n=St(r);if(!n.currentUser.isEqual(t)){lt(Op,"User change. New user:",t.toKey());const s=await K0(n.localStore,t);n.currentUser=t,function(u,f){u.mu.forEach(m=>{m.forEach(g=>{g.reject(new ot(X.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await gu(n,s.Ls)}}function TN(r,t){const n=St(r),s=n.Au.get(t);if(s&&s.hu)return Pt().add(s.key);{let o=Pt();const u=n.Iu.get(t);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function dA(r){const t=St(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=TN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gN.bind(null,t),t.Pu.H_=rN.bind(null,t.eventManager),t.Pu.yu=sN.bind(null,t.eventManager),t}function AN(r){const t=St(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_N.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yN.bind(null,t),t}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=qh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return R2(this.persistence,new S2,t.initialUser,this.serializer)}Cu(t){return new Q0(Tp.mi,this.serializer)}Du(t){return new V2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class SN extends wh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ft(this.persistence.referenceDelegate instanceof Ah,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new l2(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new Q0(s=>Ah.mi(s,n),this.serializer)}}class Hm{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=EN.bind(null,this.syncEngine),await eN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new iN}()}createDatastore(t){const n=qh(t.databaseInfo.databaseId),s=function(u){return new L2(u)}(t.databaseInfo);return function(u,f,m,g){return new j2(u,f,m,g)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,o,u,f,m){return new F2(s,o,u,f,m)}(this.localStore,this.datastore,t.asyncQueue,n=>xE(this.syncEngine,n,0),function(){return NE.v()?new NE:new P2}())}createSyncEngine(t,n){return function(o,u,f,m,g,_,E){const w=new uN(o,u,f,m,g,_);return E&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=St(n);lt(ea,"RemoteStore shutting down."),s.Ea.add(5),await pu(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hm.provider={build:()=>new Hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):rr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class wN{constructor(t,n,s,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=We.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{lt(ns,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(lt(ns,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Np(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function pm(r,t){r.asyncQueue.verifyOperationInProgress(),lt(ns,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await K0(t.localStore,o),s=o)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function UE(r,t){r.asyncQueue.verifyOperationInProgress();const n=await bN(r);lt(ns,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>OE(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>OE(t.remoteStore,o)),r._onlineComponents=t}async function bN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){lt(ns,"Using user provided OfflineComponentProvider");try{await pm(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;co("Error using user provided cache. Falling back to memory cache: "+n),await pm(r,new wh)}}else lt(ns,"Using default OfflineComponentProvider"),await pm(r,new SN(void 0));return r._offlineComponents}async function pA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(lt(ns,"Using user provided OnlineComponentProvider"),await UE(r,r._uninitializedComponentsProvider._online)):(lt(ns,"Using default OnlineComponentProvider"),await UE(r,new Hm))),r._onlineComponents}function RN(r){return pA(r).then(t=>t.syncEngine)}async function Fm(r){const t=await pA(r),n=t.eventManager;return n.onListen=cN.bind(null,t.syncEngine),n.onUnlisten=dN.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=hN.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=mN.bind(null,t.syncEngine),n}function IN(r,t,n={}){const s=new Kr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,_){const E=new mA({next:b=>{E.Nu(),f.enqueueAndForget(()=>rA(u,w)),b.fromCache&&g.source==="server"?_.reject(new ot(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(b)},error:b=>_.reject(b)}),w=new sA(m,E,{includeMetadataChanges:!0,qa:!0});return iA(u,w)}(await Fm(r),r.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firestore.googleapis.com",BE=!0;class zE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ot(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=BE}else this.host=t.host,this.ssl=t.ssl??BE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=G0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<a2)throw new ot(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}FI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Fh{constructor(t,n,s,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ot(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new PI;switch(s.type){case"firstParty":return new LI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ot(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=LE.get(n);s&&(lt("ComponentProvider","Removing Datastore"),LE.delete(n),s.terminate())}(this),Promise.resolve()}}function CN(r,t,n,s={}){r=Kn(r,Fh);const o=is(t),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},m=`${t}:${n}`;o&&(Xm(`https://${m}`),$m("Firestore",!0)),u.host!==_A&&u.host!==m&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Xr(g,f)&&(r._setSettings(g),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=We.MOCK_USER;else{_=oT(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new ot(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new We(w)}r._authCredentials=new xI(new e0(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new or(this.firestore,t,this._query)}}class ve{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ve(this.firestore,t,this._key)}toJSON(){return{type:ve._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(fu(n,ve._jsonSchema))return new ve(t,s||null,new ft(ne.fromString(n.referencePath)))}}ve._jsonSchemaVersion="firestore/documentReference/1.0",ve._jsonSchema={type:Re("string",ve._jsonSchemaVersion),referencePath:Re("string")};class Yr extends or{constructor(t,n,s){super(t,n,pp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ve(this.firestore,null,new ft(t))}withConverter(t){return new Yr(this.firestore,t,this._path)}}function Gs(r,t,...n){if(r=ae(r),n0("collection","path",t),r instanceof Fh){const s=ne.fromString(t,...n);return Jv(s),new Yr(r,null,s)}{if(!(r instanceof ve||r instanceof Yr))throw new ot(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...n));return Jv(s),new Yr(r.firestore,null,s)}}function _u(r,t,...n){if(r=ae(r),arguments.length===1&&(t=up.newId()),n0("doc","path",t),r instanceof Fh){const s=ne.fromString(t,...n);return Wv(s),new ve(r,null,new ft(s))}{if(!(r instanceof ve||r instanceof Yr))throw new ot(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...n));return Wv(s),new ve(r.firestore,r instanceof Yr?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="AsyncQueue";class jE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X0(this,"async_queue_retry"),this._c=()=>{const s=mm();s&&lt(qE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!To(t))throw t;lt(qE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const n=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",HE(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=Cp.createAndSchedule(this,t,n,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&vt(47125,{Pc:HE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function HE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class na extends Fh{constructor(t,n,s,o){super(t,n,s,o),this.type="firestore",this._queue=new jE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new jE(t),this._firestoreClient=void 0,await t}}}function yA(r,t){const n=typeof r=="object"?r:Jm(),s=typeof r=="string"?r:gh,o=Ch(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=rT("firestore");u&&CN(o,...u)}return o}function Vp(r){if(r._terminated)throw new ot(X.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||NN(r),r._firestoreClient}function NN(r){const t=r._freezeSettings(),n=function(o,u,f,m){return new eC(o,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,gA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new wN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ln(Ke.fromBase64String(t))}catch(n){throw new ot(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ln(Ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(fu(t,Ln._jsonSchema))return Ln.fromBase64String(t.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Re("string",Ln._jsonSchemaVersion),bytes:Re("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ot(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ot(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ot(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Vt(this._lat,t._lat)||Vt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(t){if(fu(t,Ai._jsonSchema))return new Ai(t.latitude,t.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Re("string",Ai._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(fu(t,Si._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(n=>typeof n=="number"))return new Si(t.vectorValues);throw new ot(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Si._jsonSchemaVersion="firestore/vectorValue/1.0",Si._jsonSchema={type:Re("string",Si._jsonSchemaVersion),vectorValues:Re("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=/^__.*__$/;class ON{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new as(t,this.data,this.fieldMask,n,this.fieldTransforms):new du(t,this.data,n,this.fieldTransforms)}}class vA{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new as(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function EA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:r})}}class Qh{constructor(t,n,s,o,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Qh({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return bh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(EA(this.Ac)&&DN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class MN{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||qh(t)}Cc(t,n,s,o=!1){return new Qh({Ac:t,methodName:n,Dc:s,path:Qe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(r){const t=r._freezeSettings(),n=qh(r._databaseId);return new MN(r._databaseId,!!t.ignoreUndefinedProperties,n)}function TA(r,t,n,s,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,t,n,o);kp("Data must be an object, but it was:",f,s);const m=AA(s,f);let g,_;if(u.merge)g=new Sn(f.fieldMask),_=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const b=Gm(t,w,n);if(!f.contains(b))throw new ot(X.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);wA(E,b)||E.push(b)}g=new Sn(E),_=f.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,_=f.fieldTransforms;return new ON(new fn(m),g,_)}class Yh extends yu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yh}}function VN(r,t,n){return new Qh({Ac:3,Dc:t.settings.Dc,methodName:r._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Pp extends yu{_toFieldTransform(t){return new O0(t.path,new ru)}isEqual(t){return t instanceof Pp}}class xp extends yu{constructor(t,n){super(t),this.vc=n}_toFieldTransform(t){const n=VN(this,t,!0),s=this.vc.map(u=>wo(u,n)),o=new po(s);return new O0(t.path,o)}isEqual(t){return t instanceof xp&&Xr(this.vc,t.vc)}}function PN(r,t,n,s){const o=r.Cc(1,t,n);kp("Data must be an object, but it was:",o,s);const u=[],f=fn.empty();ss(s,(g,_)=>{const E=Up(t,g,n);_=ae(_);const w=o.yc(E);if(_ instanceof Yh)u.push(E);else{const b=wo(_,w);b!=null&&(u.push(E),f.set(E,b))}});const m=new Sn(u);return new vA(f,m,o.fieldTransforms)}function xN(r,t,n,s,o,u){const f=r.Cc(1,t,n),m=[Gm(t,s,n)],g=[o];if(u.length%2!=0)throw new ot(X.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)m.push(Gm(t,u[b])),g.push(u[b+1]);const _=[],E=fn.empty();for(let b=m.length-1;b>=0;--b)if(!wA(_,m[b])){const B=m[b];let F=g[b];F=ae(F);const J=f.yc(B);if(F instanceof Yh)_.push(B);else{const Q=wo(F,J);Q!=null&&(_.push(B),E.set(B,Q))}}const w=new Sn(_);return new vA(E,w,f.fieldTransforms)}function kN(r,t,n,s=!1){return wo(n,r.Cc(s?4:3,t))}function wo(r,t){if(SA(r=ae(r)))return kp("Unsupported field value:",t,r),AA(r,t);if(r instanceof yu)return function(s,o){if(!EA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const m of s){let g=wo(m,o.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(r,t)}return function(s,o){if((s=ae(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return wC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ie.fromDate(s);return{timestampValue:Th(o.serializer,u)}}if(s instanceof ie){const u=new ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Th(o.serializer,u)}}if(s instanceof Ai)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ln)return{bytesValue:L0(o.serializer,s._byteString)};if(s instanceof ve){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:vp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Si)return function(f,m){return{mapValue:{fields:{[h0]:{stringValue:f0},[_h]:{arrayValue:{values:f.toArray().map(_=>{if(typeof _!="number")throw m.Sc("VectorValues must only contain numeric values.");return gp(m.serializer,_)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${Mh(s)}`)}(r,t)}function AA(r,t){const n={};return s0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ss(r,(s,o)=>{const u=wo(o,t.mc(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function SA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ie||r instanceof Ai||r instanceof Ln||r instanceof ve||r instanceof yu||r instanceof Si)}function kp(r,t,n){if(!SA(n)||!i0(n)){const s=Mh(n);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function Gm(r,t,n){if((t=ae(t))instanceof Gh)return t._internalPath;if(typeof t=="string")return Up(r,t);throw bh("Field path arguments must be of type string or ",r,!1,void 0,n)}const UN=new RegExp("[~\\*/\\[\\]]");function Up(r,t,n){if(t.search(UN)>=0)throw bh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Gh(...t.split("."))._internalPath}catch{throw bh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function bh(r,t,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new ot(X.INVALID_ARGUMENT,m+r+g)}function wA(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(t,n,s,o,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Xh("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LN extends bA{data(){return super.data()}}function Xh(r,t){return typeof t=="string"?Up(r,t):t instanceof Gh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ot(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lp{}class Bp extends Lp{}function ql(r,t,...n){let s=[];t instanceof Lp&&s.push(t),s=s.concat(n),function(u){const f=u.filter(g=>g instanceof zp).length,m=u.filter(g=>g instanceof $h).length;if(f>1||f>0&&m>0)throw new ot(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class $h extends Bp{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new $h(t,n,s)}_apply(t){const n=this._parse(t);return CA(t._query,n),new or(t.firestore,t.converter,Pm(t._query,n))}_parse(t){const n=Kh(t.firestore);return function(u,f,m,g,_,E,w){let b;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ot(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){QE(w,E);const F=[];for(const J of w)F.push(GE(g,u,J));b={arrayValue:{values:F}}}else b=GE(g,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||QE(w,E),b=kN(m,f,w,E==="in"||E==="not-in");return be.create(_,E,b)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function gm(r,t,n){const s=t,o=Xh("where",r);return $h._create(o,s,n)}class zp extends Lp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new zp(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)CA(f,g),f=Pm(f,g)}(t._query,n),new or(t.firestore,t.converter,Pm(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qp extends Bp{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new qp(t,n)}_apply(t){const n=function(o,u,f){if(o.startAt!==null)throw new ot(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ot(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(u,f)}(t._query,this._field,this._direction);return new or(t.firestore,t.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new Ao(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,n))}}function IA(r,t="asc"){const n=t,s=Xh("orderBy",r);return qp._create(s,n)}class jp extends Bp{constructor(t,n,s){super(),this.type=t,this._limit=n,this._limitType=s}static _create(t,n,s){return new jp(t,n,s)}_apply(t){return new or(t.firestore,t.converter,vh(t._query,this._limit,this._limitType))}}function BN(r){return jp._create("limit",r,"F")}function GE(r,t,n){if(typeof(n=ae(n))=="string"){if(n==="")throw new ot(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E0(t)&&n.indexOf("/")!==-1)throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(ne.fromString(n));if(!ft.isDocumentKey(s))throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return oE(r,new ft(s))}if(n instanceof ve)return oE(r,n._key);throw new ot(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function QE(r,t){if(!Array.isArray(r)||r.length===0)throw new ot(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function CA(r,t){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ot(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ot(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class zN{convertValue(t,n="none"){switch(ts(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Jr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw vt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ss(t,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(t){const n=t.fields?.[_h].arrayValue?.values?.map(s=>ye(s.doubleValue));return new Si(n)}convertGeoPoint(t){return new Ai(ye(t.latitude),ye(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=xh(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(tu(t));default:return null}}convertTimestamp(t){const n=Wr(t);return new ie(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ne.fromString(t);Ft(F0(s),9688,{name:t});const o=new eu(s.get(1),s.get(3)),u=new ft(s.popFirst(5));return o.isEqual(n)||rr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(r,t,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(t,n):r.toFirestore(t):t,s}class jl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ys extends bA{constructor(t,n,s,o,u,f){super(t,n,s,o,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Xh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:Re("string",Ys._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};class ah extends Ys{data(t={}){return super.data(t)}}class Xs{constructor(t,n,s,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new jl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new ah(this._firestore,this._userDataWriter,s.key,s,new jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new ah(o._firestore,o._userDataWriter,m.doc.key,m.doc,new jl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),E=f.indexOf(m.doc.key)),{type:qN(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ot(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xs._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function qN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:r})}}Xs._jsonSchemaVersion="firestore/querySnapshot/1.0",Xs._jsonSchema={type:Re("string",Xs._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};class Hp extends zN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ln(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ve(this.firestore,null,n)}}function KE(r){r=Kn(r,or);const t=Kn(r.firestore,na),n=Vp(t),s=new Hp(t);return RA(r._query),IN(n,r._query).then(o=>new Xs(t,s,r,o))}function DA(r,t,n){r=Kn(r,ve);const s=Kn(r.firestore,na),o=NA(r.converter,t,n);return Fp(s,[TA(Kh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Yn.none())])}function jN(r,t,n,...s){r=Kn(r,ve);const o=Kn(r.firestore,na),u=Kh(o);let f;return f=typeof(t=ae(t))=="string"||t instanceof Gh?xN(u,"updateDoc",r._key,t,n,s):PN(u,"updateDoc",r._key,t),Fp(o,[f.toMutation(r._key,Yn.exists(!0))])}function OA(r,t){const n=Kn(r.firestore,na),s=_u(r),o=NA(r.converter,t);return Fp(n,[TA(Kh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Yn.exists(!1))]).then(()=>s)}function Rh(r,...t){r=ae(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||FE(t[s])||(n=t[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(FE(t[s])){const g=t[s];t[s]=g.next?.bind(g),t[s+1]=g.error?.bind(g),t[s+2]=g.complete?.bind(g)}let u,f,m;if(r instanceof ve)f=Kn(r.firestore,na),m=pp(r._key.path),u={next:g=>{t[s]&&t[s](HN(f,r,g))},error:t[s+1],complete:t[s+2]};else{const g=Kn(r,or);f=Kn(g.firestore,na),m=g._query;const _=new Hp(f);u={next:E=>{t[s]&&t[s](new Xs(f,_,g,E))},error:t[s+1],complete:t[s+2]},RA(r._query)}return function(_,E,w,b){const B=new mA(b),F=new sA(E,B,w);return _.asyncQueue.enqueueAndForget(async()=>iA(await Fm(_),F)),()=>{B.Nu(),_.asyncQueue.enqueueAndForget(async()=>rA(await Fm(_),F))}}(Vp(f),m,o,u)}function Fp(r,t){return function(s,o){const u=new Kr;return s.asyncQueue.enqueueAndForget(async()=>pN(await RN(s),o,u)),u.promise}(Vp(r),t)}function HN(r,t,n){const s=n.docs.get(t._key),o=new Hp(r);return new Ys(r,o,t._key,s,new jl(n.hasPendingWrites,n.fromCache),t.converter)}function MA(){return new Pp("serverTimestamp")}function FN(...r){return new xp("arrayUnion",r)}(function(t,n=!0){(function(o){vo=o})(ra),Zs(new $r("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new na(new kI(s.getProvider("auth-internal")),new BI(f,s.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ot(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(_.options.projectId,E)}(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),_i(Yv,Xv,t),_i(Yv,Xv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebasestorage.googleapis.com",PA="storageBucket",GN=120*1e3,QN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me extends bi{constructor(t,n,s=0){super(_m(t),`Firebase Storage: ${n} (${_m(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,me.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _m(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var de;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(de||(de={}));function _m(r){return"storage/"+r}function Gp(){const r="An unknown error occurred, please check the error payload for server response.";return new me(de.UNKNOWN,r)}function KN(r){return new me(de.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function YN(r){return new me(de.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XN(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new me(de.UNAUTHENTICATED,r)}function $N(){return new me(de.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZN(r){return new me(de.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function WN(){return new me(de.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JN(){return new me(de.CANCELED,"User canceled the upload/download.")}function tD(r){return new me(de.INVALID_URL,"Invalid URL '"+r+"'.")}function eD(r){return new me(de.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function nD(){return new me(de.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+PA+"' property when initializing the app?")}function iD(){return new me(de.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rD(){return new me(de.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sD(r){return new me(de.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qm(r){return new me(de.INVALID_ARGUMENT,r)}function xA(){return new me(de.APP_DELETED,"The Firebase app was deleted.")}function aD(r){return new me(de.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xl(r,t){return new me(de.INVALID_FORMAT,"String does not match format '"+r+"': "+t)}function xl(r){throw new me(de.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=wn.makeFromUrl(t,n)}catch{return new wn(t,"")}if(s.path==="")return s;throw eD(t)}static makeFromUrl(t,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(pt){pt.path.charAt(pt.path.length-1)==="/"&&(pt.path_=pt.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function _(pt){pt.path_=decodeURIComponent(pt.path)}const E="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",B=new RegExp(`^https?://${w}/${E}/b/${o}/o${b}`,"i"),F={bucket:1,path:3},J=n===VA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Q="([^?#]*)",nt=new RegExp(`^https?://${J}/${o}/${Q}`,"i"),at=[{regex:m,indices:g,postModify:u},{regex:B,indices:F,postModify:_},{regex:nt,indices:{bucket:1,path:2},postModify:_}];for(let pt=0;pt<at.length;pt++){const dt=at[pt],bt=dt.regex.exec(t);if(bt){const V=bt[dt.indices.bucket];let S=bt[dt.indices.path];S||(S=""),s=new wn(V,S),dt.postModify(s);break}}if(s==null)throw tD(t);return s}}class oD{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(r,t,n){let s=1,o=null,u=null,f=!1,m=0;function g(){return m===2}let _=!1;function E(...Q){_||(_=!0,t.apply(null,Q))}function w(Q){o=setTimeout(()=>{o=null,r(B,g())},Q)}function b(){u&&clearTimeout(u)}function B(Q,...nt){if(_){b();return}if(Q){b(),E.call(null,Q,...nt);return}if(g()||f){b(),E.call(null,Q,...nt);return}s<64&&(s*=2);let at;m===1?(m=2,at=0):at=(s+Math.random())*1e3,w(at)}let F=!1;function J(Q){F||(F=!0,b(),!_&&(o!==null?(Q||(m=2),clearTimeout(o),w(0)):Q||(m=1)))}return w(0),u=setTimeout(()=>{f=!0,J(!0)},n),J}function uD(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(r){return r!==void 0}function hD(r){return typeof r=="object"&&!Array.isArray(r)}function Qp(r){return typeof r=="string"||r instanceof String}function YE(r){return Kp()&&r instanceof Blob}function Kp(){return typeof Blob<"u"}function XE(r,t,n,s){if(s<t)throw Qm(`Invalid value for '${r}'. Expected ${t} or greater.`);if(s>n)throw Qm(`Invalid value for '${r}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r,t,n){let s=t;return n==null&&(s=`https://${t}`),`${n}://${s}/v0${r}`}function kA(r){const t=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=t(s)+"="+t(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var $s;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})($s||($s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(r,t){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=t.indexOf(r)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t,n,s,o,u,f,m,g,_,E,w,b=!0,B=!1){this.url_=t,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=E,this.connectionFactory_=w,this.retry=b,this.isUsingEmulator=B,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,J)=>{this.resolve_=F,this.reject_=J,this.start_()})}start_(){const t=(s,o)=>{if(o){s(!1,new Xc(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const g=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===$s.NO_ERROR,g=u.getStatus();if(!m||fD(g,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===$s.ABORT;s(!1,new Xc(!1,null,E));return}const _=this.successCodes_.indexOf(g)!==-1;s(!0,new Xc(_,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());cD(g)?u(g):u()}catch(g){f(g)}else if(m!==null){const g=Gp();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?xA():JN();f(g)}else{const g=WN();f(g)}};this.canceled_?n(!1,new Xc(!1,null,!0)):this.backoffId_=lD(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&uD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xc{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function mD(r,t){t!==null&&t.length>0&&(r.Authorization="Firebase "+t)}function pD(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function gD(r,t){t&&(r["X-Firebase-GMPID"]=t)}function _D(r,t){t!==null&&(r["X-Firebase-AppCheck"]=t)}function yD(r,t,n,s,o,u,f=!0,m=!1){const g=kA(r.urlParams),_=r.url+g,E=Object.assign({},r.headers);return gD(E,t),mD(E,n),pD(E,u),_D(E,s),new dD(_,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ED(...r){const t=vD();if(t!==void 0){const n=new t;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(Kp())return new Blob(r);throw new me(de.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TD(r,t,n){return r.webkitSlice?r.webkitSlice(t,n):r.mozSlice?r.mozSlice(t,n):r.slice?r.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(r){if(typeof atob>"u")throw sD("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ym{constructor(t,n){this.data=t,this.contentType=n||null}}function SD(r,t){switch(r){case gi.RAW:return new ym(UA(t));case gi.BASE64:case gi.BASE64URL:return new ym(LA(r,t));case gi.DATA_URL:return new ym(bD(t),RD(t))}throw Gp()}function UA(r){const t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function wD(r){let t;try{t=decodeURIComponent(r)}catch{throw Xl(gi.DATA_URL,"Malformed data URL.")}return UA(t)}function LA(r,t){switch(r){case gi.BASE64:{const o=t.indexOf("-")!==-1,u=t.indexOf("_")!==-1;if(o||u)throw Xl(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case gi.BASE64URL:{const o=t.indexOf("+")!==-1,u=t.indexOf("/")!==-1;if(o||u)throw Xl(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=AD(t)}catch(o){throw o.message.includes("polyfill")?o:Xl(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class BA{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Xl(gi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=ID(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function bD(r){const t=new BA(r);return t.base64?LA(gi.BASE64,t.rest):wD(t.rest)}function RD(r){return new BA(r).contentType}function ID(r,t){return r.length>=t.length?r.substring(r.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,n){let s=0,o="";YE(t)?(this.data_=t,s=t.size,o=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(t,n){if(YE(this.data_)){const s=this.data_,o=TD(s,t,n);return o===null?null:new jr(o)}else{const s=new Uint8Array(this.data_.buffer,t,n-t);return new jr(s,!0)}}static getBlob(...t){if(Kp()){const n=t.map(s=>s instanceof jr?s.data_:s);return new jr(ED.apply(null,n))}else{const n=t.map(f=>Qp(f)?SD(gi.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new jr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(r){let t;try{t=JSON.parse(r)}catch{return null}return hD(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(r){if(r.length===0)return null;const t=r.lastIndexOf("/");return t===-1?"":r.slice(0,t)}function ND(r,t){const n=t.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function qA(r){const t=r.lastIndexOf("/",r.length-2);return t===-1?r:r.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r,t){return t}class an{constructor(t,n,s,o){this.server=t,this.local=n||t,this.writable=!!s,this.xform=o||DD}}let $c=null;function OD(r){return!Qp(r)||r.length<2?r:qA(r)}function jA(){if($c)return $c;const r=[];r.push(new an("bucket")),r.push(new an("generation")),r.push(new an("metageneration")),r.push(new an("name","fullPath",!0));function t(u,f){return OD(f)}const n=new an("name");n.xform=t,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new an("size");return o.xform=s,r.push(o),r.push(new an("timeCreated")),r.push(new an("updated")),r.push(new an("md5Hash",null,!0)),r.push(new an("cacheControl",null,!0)),r.push(new an("contentDisposition",null,!0)),r.push(new an("contentEncoding",null,!0)),r.push(new an("contentLanguage",null,!0)),r.push(new an("contentType",null,!0)),r.push(new an("metadata","customMetadata",!0)),$c=r,$c}function MD(r,t){function n(){const s=r.bucket,o=r.fullPath,u=new wn(s,o);return t._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function VD(r,t,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,t[f.server])}return MD(s,r),s}function HA(r,t,n){const s=zA(t);return s===null?null:VD(r,s,n)}function PD(r,t,n,s){const o=zA(t);if(o===null||!Qp(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(_=>{const E=r.bucket,w=r.fullPath,b="/b/"+f(E)+"/o/"+f(w),B=Yp(b,n,s),F=kA({alt:"media",token:_});return B+F})[0]}function xD(r,t){const n={},s=t.length;for(let o=0;o<s;o++){const u=t[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class FA{constructor(t,n,s,o){this.url=t,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r){if(!r)throw Gp()}function kD(r,t){function n(s,o){const u=HA(r,o,t);return GA(u!==null),u}return n}function UD(r,t){function n(s,o){const u=HA(r,o,t);return GA(u!==null),PD(u,o,r.host,r._protocol)}return n}function QA(r){function t(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=$N():o=XN():n.getStatus()===402?o=YN(r.bucket):n.getStatus()===403?o=ZN(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return t}function LD(r){const t=QA(r);function n(s,o){let u=t(s,o);return s.getStatus()===404&&(u=KN(r.path)),u.serverResponse=o.serverResponse,u}return n}function BD(r,t,n){const s=t.fullServerUrl(),o=Yp(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,m=new FA(o,u,UD(r,n),f);return m.errorHandler=LD(t),m}function zD(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}function qD(r,t,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=t.size(),s.contentType||(s.contentType=zD(null,t)),s}function jD(r,t,n,s,o){const u=t.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let at="";for(let pt=0;pt<2;pt++)at=at+Math.random().toString().slice(2);return at}const g=m();f["Content-Type"]="multipart/related; boundary="+g;const _=qD(t,s,o),E=xD(_,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,b=`\r
--`+g+"--",B=jr.getBlob(w,s,b);if(B===null)throw iD();const F={name:_.fullPath},J=Yp(u,r.host,r._protocol),Q="POST",nt=r.maxUploadRetryTime,st=new FA(J,Q,kD(r,n),nt);return st.urlParams=F,st.headers=f,st.body=B.uploadData(),st.errorHandler=QA(t),st}class HD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,s,o,u){if(this.sent_)throw xl("cannot .send() more than once");if(is(t)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class FD extends HD{initXhr(){this.xhr_.responseType="text"}}function KA(){return new FD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n){this._service=t,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ia(t,n)}get root(){const t=new wn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qA(this._location.path)}get storage(){return this._service}get parent(){const t=CD(this._location.path);if(t===null)return null;const n=new wn(this._location.bucket,t);return new ia(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aD(t)}}function GD(r,t,n){r._throwIfRoot("uploadBytes");const s=jD(r.storage,r._location,jA(),new jr(t,!0),n);return r.storage.makeRequestWithTokens(s,KA).then(o=>({metadata:o,ref:r}))}function QD(r){r._throwIfRoot("getDownloadURL");const t=BD(r.storage,r._location,jA());return r.storage.makeRequestWithTokens(t,KA).then(n=>{if(n===null)throw rD();return n})}function KD(r,t){const n=ND(r._location.path,t),s=new wn(r._location.bucket,n);return new ia(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(r){return/^[A-Za-z]+:\/\//.test(r)}function XD(r,t){return new ia(r,t)}function YA(r,t){if(r instanceof Xp){const n=r;if(n._bucket==null)throw nD();const s=new ia(n,n._bucket);return t!=null?YA(s,t):s}else return t!==void 0?KD(r,t):r}function $D(r,t){if(t&&YD(t)){if(r instanceof Xp)return XD(r,t);throw Qm("To use ref(service, url), the first argument must be a Storage instance.")}else return YA(r,t)}function $E(r,t){const n=t?.[PA];return n==null?null:wn.makeFromBucketSpec(n,r)}function ZD(r,t,n,s={}){r.host=`${t}:${n}`;const o=is(t);o&&(Xm(`https://${r.host}/b`),$m("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:oT(u,r.app.options.projectId))}class Xp{constructor(t,n,s,o,u,f=!1){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=VA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=GN,this._maxUploadRetryTime=QN,this._requests=new Set,o!=null?this._bucket=wn.makeFromBucketSpec(o,this._host):this._bucket=$E(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,t):this._bucket=$E(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){XE("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){XE("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ia(this,t)}_makeRequest(t,n,s,o,u=!0){if(this._deleted)return new oD(xA());{const f=yD(t,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(t,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,o).getPromise()}}const ZE="@firebase/storage",WE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="storage";function $A(r,t,n){return r=ae(r),GD(r,t,n)}function ZA(r){return r=ae(r),QD(r)}function WA(r,t){return r=ae(r),$D(r,t)}function JA(r=Jm(),t){r=ae(r);const s=Ch(r,XA).getImmediate({identifier:t}),o=rT("storage");return o&&WD(s,...o),s}function WD(r,t,n,s={}){ZD(r,t,n,s)}function JD(r,{instanceIdentifier:t}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Xp(n,s,o,t,ra)}function tO(){Zs(new $r(XA,JD,"PUBLIC").setMultipleInstances(!0)),_i(ZE,WE,""),_i(ZE,WE,"esm2020")}tO();const eO={apiKey:"AIzaSyDzh5kW3O-5CoummtTkHIGbB66e_R7yFEs",authDomain:"chatter-1c8c6.firebaseapp.com",projectId:"chatter-1c8c6",storageBucket:"chatter-1c8c6.firebasestorage.app",messagingSenderId:"559340361952",appId:"1:559340361952:web:9f52288509de5989859885"},$p=cT(eO),Ks=DI($p),pi=yA($p),nO=JA($p),iO="_spinnerContainer_q1qrp_1",rO="_spinner_q1qrp_1",JE={spinnerContainer:iO,spinner:rO};function sO(){return G.jsx("div",{className:JE.spinnerContainer,children:G.jsx("div",{className:JE.spinner})})}const aO="_auth_form_1f6tc_1",oO={auth_form:aO},lO="_error_agquu_1",uO={error:lO};function Km({children:r}){return G.jsx("div",{className:uO.error,children:r})}function cO(r){if(!r?.code&&typeof r=="string")return r;if(!r?.code)return"An unknown error occurred.";switch(r.code){case"auth/user-not-found":return"No account found with this email.";case"auth/invalid-credential":return"Email or password is incorrect.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/password-does-not-meet-requirements":return"Password must contain at least 6 characters, a capital letter, and one number.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return r.message||"An unknown error occurred."}}function hO({onAuth:r}){const[t,n]=Ot.useState(!1),[s,o]=Ot.useState(""),[u,f]=Ot.useState(""),[m,g]=Ot.useState(""),[_,E]=Ot.useState(""),w=async B=>{B&&await DA(_u(pi,"users",B.uid),{displayName:B.displayName||"Unknown",photoURL:B.photoURL||""},{merge:!0})},b=async B=>{B.preventDefault(),E("");try{if(t){const{user:F}=await dR(Ks,s,u),J=`https://api.dicebear.com/7.x/icons/svg?seed=${encodeURIComponent(m)}`;await UT(F,{displayName:m,photoURL:J}),await w(Ks.currentUser),r({...Ks.currentUser})}else{const{user:F}=await mR(Ks,s,u);await w(F),r(F)}}catch(F){E(F)}};return G.jsxs("form",{onSubmit:b,className:oO.auth_form,children:[G.jsx("h2",{children:t?"Create an Account":"Login"}),G.jsx("input",{type:"email",placeholder:"Email",value:s,onChange:B=>o(B.target.value),required:!0}),G.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:B=>f(B.target.value),required:!0}),t&&G.jsx("input",{type:"text",placeholder:"Username",value:m,onChange:B=>g(B.target.value),required:!0}),_&&G.jsx(Km,{children:cO(_)}),G.jsx("button",{type:"submit",children:t?"Sign Up":"Log In"}),G.jsxs("p",{children:[t?"Already have an account?":"New here?"," ",G.jsx("button",{type:"button",onClick:()=>n(!t),children:t?"Log In":"Sign Up"})]})]})}const fO="_sidebar_bugqx_1",dO="_open_bugqx_17",mO="_sidebarToggle_bugqx_21",pO="_sidebarOpen_bugqx_44",gO="_sidebarClosed_bugqx_48",_O="_profile_bugqx_52",yO="_usernameRow_bugqx_57",vO="_settingsButton_bugqx_63",EO="_roomActions_bugqx_83",TO="_userRow_bugqx_87",AO="_avatarLarge_bugqx_93",SO="_userInfo_bugqx_100",wO="_displayName_bugqx_105",bO="_logout_btn_bugqx_109",RO="_addRoomBtn_bugqx_120",IO="_addRoomIcon_bugqx_141",CO="_addRoomText_bugqx_150",NO="_roomList_bugqx_182",DO="_active_bugqx_170",OO="_avatar_bugqx_93",MO="_roomInfo_bugqx_211",VO="_name_bugqx_215",PO="_latest_bugqx_218",le={sidebar:fO,open:dO,sidebarToggle:mO,sidebarOpen:pO,sidebarClosed:gO,profile:_O,usernameRow:yO,settingsButton:vO,roomActions:EO,userRow:TO,avatarLarge:AO,userInfo:SO,displayName:wO,logout_btn:bO,addRoomBtn:RO,addRoomIcon:IO,addRoomText:CO,roomList:NO,active:DO,avatar:OO,roomInfo:MO,name:VO,latest:PO},xO="_modalOverlay_14e5u_1",kO="_modal_14e5u_1",UO="_modalTabs_14e5u_42",LO="_activeTab_14e5u_54",$l={modalOverlay:xO,modal:kO,modalTabs:UO,activeTab:LO};function tS({open:r,onClose:t,children:n}){return r?G.jsx("div",{className:$l.modalOverlay,onClick:t,children:G.jsx("div",{className:$l.modal,onClick:s=>s.stopPropagation(),children:n})}):null}function BO({className:r="",...t}){return G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-settings-icon lucide-settings ${r}`.trim(),...t,children:[G.jsx("path",{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34
        0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319
        1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34
        2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`}),G.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}const zO="_modalContent_18kdh_1",qO="_modalHeader_18kdh_10",jO="_closeButton_18kdh_22",HO="_settingsForm_18kdh_36",FO="_formGroup_18kdh_41",GO="_uploadContainer_18kdh_65",QO="_fileInput_18kdh_73",KO="_uploadButton_18kdh_77",YO="_previewContainer_18kdh_91",XO="_profilePreview_18kdh_104",$O="_formActions_18kdh_112",ZO="_cancelButton_18kdh_132",WO="_saveButton_18kdh_140",cn={modalContent:zO,modalHeader:qO,closeButton:jO,settingsForm:HO,formGroup:FO,uploadContainer:GO,fileInput:QO,uploadButton:KO,previewContainer:YO,profilePreview:XO,formActions:$O,cancelButton:ZO,saveButton:WO},JO=({isOpen:r,onClose:t,user:n,onUpdateProfile:s})=>{const[o,u]=Ot.useState(n?.displayName||""),[f,m]=Ot.useState(n?.photoURL||""),[g,_]=Ot.useState(!1),[E,w]=Ot.useState(n?.photoURL||""),b=Ot.useRef(null),B=JA(),F=yA(),J=nt=>{const st=nt.target.files[0];if(!st)return;const at=URL.createObjectURL(st);w(at),m(st)},Q=async nt=>{if(nt.preventDefault(),!!o.trim()){_(!0);try{let st=n.photoURL;if(f instanceof File){const at=WA(B,`profilePictures/${n.uid}`);await $A(at,f),st=await ZA(at)}await s({displayName:o.trim(),photoURL:st}),await DA(_u(F,"users",n.uid),{displayName:o.trim(),photoURL:st,uid:n.uid},{merge:!0}),t()}catch(st){console.error("Error updating profile:",st)}finally{_(!1)}}};return G.jsx(tS,{open:r,onClose:t,children:G.jsxs("div",{className:cn.modalContent,children:[G.jsxs("div",{className:cn.modalHeader,children:[G.jsx("h2",{children:"Profile Settings"}),G.jsx("button",{className:cn.closeButton,onClick:t,children:""})]}),G.jsxs("form",{onSubmit:Q,className:cn.settingsForm,children:[G.jsxs("div",{className:cn.formGroup,children:[G.jsx("label",{htmlFor:"username",children:"Username"}),G.jsx("input",{type:"text",id:"username",value:o,onChange:nt=>u(nt.target.value),placeholder:"Enter your username",required:!0})]}),G.jsxs("div",{className:cn.formGroup,children:[G.jsx("label",{htmlFor:"profilePicture",children:"Profile Picture"}),G.jsxs("div",{className:cn.uploadContainer,children:[G.jsx("input",{type:"file",id:"profilePicture",ref:b,accept:"image/*",onChange:J,className:cn.fileInput}),G.jsx("button",{type:"button",className:cn.uploadButton,onClick:()=>b.current?.click(),children:"Choose Image"}),E&&G.jsx("div",{className:cn.previewContainer,children:G.jsx("img",{src:E,alt:"Profile preview",className:cn.profilePreview,onError:nt=>{nt.target.style.display="none"}})})]})]}),G.jsxs("div",{className:cn.formActions,children:[G.jsx("button",{type:"button",className:cn.cancelButton,onClick:t,disabled:g,children:"Cancel"}),G.jsx("button",{type:"submit",className:cn.saveButton,disabled:g,children:g?"Saving...":"Save Changes"})]})]})]})})};function tM({user:r,onJoinRoom:t,selectedRoom:n,onLogout:s,isOpen:o,setIsOpen:u}){const[f,m]=Ot.useState([]),[g,_]=Ot.useState(!1),[E,w]=Ot.useState("create"),[b,B]=Ot.useState(""),[F,J]=Ot.useState(""),[Q,nt]=Ot.useState(""),[st,at]=Ot.useState(!1),pt=Ot.useRef([]),dt=async S=>{try{return await UT(Ks.currentUser,S),!0}catch(I){throw console.error("Error updating profile:",I),I}};Ot.useEffect(()=>{if(!r?.uid)return;const S=ql(Gs(pi,"chatRooms"),gm("members","array-contains",r.uid));let I=[];const O=Rh(S,M=>{let C=M.docs.map(Yt=>{const qt=Yt.data(),H=pt.current.find(et=>et.id===Yt.id);return{id:Yt.id,name:qt.name,password:qt.password||null,members:qt.members||[],latestMessage:H?.latestMessage??null,latestTimestamp:H?.latestTimestamp??null}});I.forEach(Yt=>Yt()),I=[],C.forEach(Yt=>{const qt=ql(Gs(pi,`chatRooms/${Yt.id}/messages`),IA("timestamp","desc"),BN(1)),H=Rh(qt,et=>{const ct=et.docs[0];m(Bt=>{const N=Bt.map(W=>W.id===Yt.id?{...W,latestMessage:ct?.data()?.text||"",latestTimestamp:ct?.data()?.timestamp?.toMillis?.()||0}:W);return pt.current=N,[...N].sort((W,rt)=>(rt.latestTimestamp||0)-(W.latestTimestamp||0))})});I.push(H)}),m(Yt=>{const qt=C.map(H=>{const et=Yt.find(ct=>ct.id===H.id);return{...H,latestMessage:et?.latestMessage??H.latestMessage,latestTimestamp:et?.latestTimestamp??H.latestTimestamp}});return pt.current=qt,[...qt].sort((H,et)=>(et.latestTimestamp||0)-(H.latestTimestamp||0))})});return()=>{O(),I.forEach(M=>M())}},[r?.uid,s]);const bt=async S=>{if(S.preventDefault(),nt(""),!b.trim()||!F.trim())return;const I=ql(Gs(pi,"chatRooms"),gm("name","==",b.trim()));if(!(await KE(I)).empty){nt("A room with this name already exists. Please choose another name.");return}await OA(Gs(pi,"chatRooms"),{name:b.trim(),password:F.trim(),createdBy:r.uid,members:[r.uid],createdAt:MA()}),B(""),J(""),_(!1),w("create"),nt("")},V=async S=>{if(S.preventDefault(),nt(""),!b.trim()||!F.trim())return;const I=ql(Gs(pi,"chatRooms"),gm("name","==",b.trim())),O=await KE(I);if(O.empty){nt("Room not found");return}const M=O.docs[0],P=M.data();if((P.password||"")!==F.trim()){nt("Incorrect password");return}await jN(_u(pi,"chatRooms",M.id),{members:FN(r.uid)});const C={id:M.id,name:P.name,password:P.password||null};B(""),J(""),_(!1),w("create"),nt(""),t?.(C)};return G.jsxs(G.Fragment,{children:[G.jsx("button",{className:`${le.sidebarToggle} ${o?le.sidebarOpen:le.sidebarClosed}`,onClick:()=>u?.(!o),"aria-label":o?"Close rooms sidebar":"Open rooms sidebar",title:o?"Close":"Open",children:o?"":""}),G.jsxs("div",{className:`${le.sidebar} ${o?le.open:""}`,children:[G.jsx("div",{className:le.profile,children:G.jsxs("div",{className:le.userRow,children:[G.jsx("img",{src:r.photoURL,alt:r.displayName,className:le.avatarLarge}),G.jsxs("div",{className:le.userInfo,children:[G.jsx("div",{className:le.usernameRow,children:G.jsx("span",{className:le.displayName,children:r.displayName})}),G.jsx("button",{className:le.logout_btn,onClick:s,children:"Sign Out"})]}),G.jsx("div",{className:le.roomActions,children:G.jsx("button",{className:le.settingsButton,onClick:()=>at(!0),"aria-label":"Settings",children:G.jsx(BO,{})})})]})}),G.jsxs("ul",{className:le.roomList,children:[G.jsxs("button",{className:le.addRoomBtn,onClick:()=>_(!0),title:"Create or join a room",children:[G.jsx("span",{className:le.addRoomIcon,children:"+"}),G.jsx("span",{className:le.addRoomText,children:"Create or Join a Room"})]}),f.map(S=>G.jsxs("li",{className:n?.id===S.id?le.active:"",onClick:()=>t(S),children:[G.jsx("div",{className:le.avatar,children:""}),G.jsxs("div",{className:le.roomInfo,children:[G.jsx("div",{className:le.name,children:S.name}),G.jsx("div",{className:le.latest,children:S.latestMessage||"No messages yet"})]})]},S.id))]})]}),G.jsxs(tS,{open:g,onClose:()=>{_(!1),nt("")},children:[G.jsxs("div",{className:$l.modalTabs,children:[G.jsx("button",{className:E==="create"?$l.activeTab:"",onClick:()=>{w("create"),nt("")},children:"Create"}),G.jsx("button",{className:E==="join"?$l.activeTab:"",onClick:()=>{w("join"),nt("")},children:"Join"})]}),E==="create"?G.jsxs(G.Fragment,{children:[G.jsx("h3",{children:"Create a Room"}),G.jsxs("form",{onSubmit:bt,children:[G.jsx("input",{value:b,onChange:S=>B(S.target.value),placeholder:"Room name"}),G.jsx("input",{value:F,onChange:S=>J(S.target.value),placeholder:"Room password",type:"password",required:!0}),Q&&G.jsx(Km,{children:Q}),G.jsx("button",{type:"submit",children:"Create"})]})]}):G.jsxs(G.Fragment,{children:[G.jsx("h3",{children:"Join a Room"}),G.jsxs("form",{onSubmit:V,children:[G.jsx("input",{value:b,onChange:S=>B(S.target.value),placeholder:"Room name"}),G.jsx("input",{value:F,onChange:S=>J(S.target.value),placeholder:"Room password",type:"password",required:!0}),Q&&G.jsx(Km,{children:Q}),G.jsx("button",{type:"submit",children:"Join"})]})]})]}),G.jsx(JO,{isOpen:st,onClose:()=>at(!1),user:r,onUpdateProfile:dt})]})}const eM="_chat_container_1013w_14",nM="_messages_1013w_21",iM="_message_1013w_21",rM="_meta_1013w_42",sM="_timestamp_1013w_48",aM="_avatar_1013w_76",oM="_image_1013w_82",lM="_username_1013w_93",uM="_own_1013w_96",Gn={chat_container:eM,messages:nM,message:iM,meta:rM,timestamp:sM,avatar:aM,image:oM,username:lM,own:uM},cM="_chat_input_container_1txkd_1",hM="_chat_input_1txkd_1",fM="_icon_button_1txkd_25",dM="_preview_1txkd_49",mM="_file_info_1txkd_67",pM="_file_name_1txkd_71",gM="_remove_button_1txkd_79",Wi={chat_input_container:cM,chat_input:hM,icon_button:fM,preview:dM,file_info:mM,file_name:pM,remove_button:gM};function _M({className:r="",...t}){return G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-image-icon lucide-image ${r}`.trim(),...t,children:[G.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),G.jsx("circle",{cx:"9",cy:"9",r:"2"}),G.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})}function yM({className:r="",...t}){return G.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-loader-circle-icon lucide-loader-circle ${r}`.trim(),...t,children:G.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})}function vM({className:r="",...t}){return G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-send-icon lucide-send ${r}`.trim(),...t,children:[G.jsx("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),G.jsx("path",{d:"m21.854 2.147-10.94 10.939"})]})}function EM({user:r,roomId:t}){const[n,s]=Ot.useState(""),[o,u]=Ot.useState(!1),[f,m]=Ot.useState(null),[g,_]=Ot.useState(null),[E,w]=Ot.useState(""),b=Ot.useRef(null),B=()=>{b.current?.click()},F=nt=>{const st=nt.target.files?.[0];if(!st)return;if(!st.type.startsWith("image/")){alert("Please select an image file.");return}if(st.size>5*1024*1024){alert("Image is too large (max 5MB).");return}m(st),w(st.name);const at=URL.createObjectURL(st);_(at)},J=()=>{g&&URL.revokeObjectURL(g),_(null),m(null),w("")},Q=async nt=>{nt.preventDefault();const st=!!n.trim(),at=!!f;if(!st&&!at||!t)return;s("");let pt=null;try{if(at){u(!0);const dt=`chatRooms/${t}/images/${r.uid}-${Date.now()}-${f.name}`,bt=WA(nO,dt);await $A(bt,f),pt=await ZA(bt)}await OA(Gs(pi,`chatRooms/${t}/messages`),{text:st?n.trim():"",imageUrl:pt||null,uid:r.uid,displayName:r.displayName,photoURL:r.photoURL,timestamp:MA()})}catch(dt){console.error("Failed to send message:",dt),alert("Failed to send message. Please try again.")}finally{u(!1),J()}};return G.jsxs("div",{className:Wi.chat_input_container,children:[g&&G.jsxs("div",{className:Wi.preview,children:[G.jsx("img",{src:g,alt:"preview"}),G.jsx("div",{className:Wi.file_info,children:G.jsx("span",{className:Wi.file_name,children:E})}),G.jsx("button",{type:"button",onClick:J,className:Wi.remove_button,"aria-label":"Remove selected image",children:""})]}),G.jsxs("form",{onSubmit:Q,className:Wi.chat_input,children:[G.jsx("input",{value:n,name:"message-input",onChange:nt=>s(nt.target.value),"aria-label":"Type your message...",placeholder:"Type your message..."}),G.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:F,style:{display:"none"}}),G.jsx("button",{type:"button",onClick:B,"aria-label":"Attach image",className:Wi.icon_button,children:G.jsx(_M,{})}),G.jsx("button",{type:"submit",disabled:o,className:Wi.icon_button,children:o?G.jsx(yM,{className:Wi.spin}):G.jsx(vM,{})})]})]})}function TM({user:r,roomId:t}){const[n,s]=Ot.useState([]),[o,u]=Ot.useState({}),f=Ot.useRef(null),[m,g]=Ot.useState(null),_=E=>{if(!E)return"";const w=E?.toMillis?E.toMillis():E;return w?new Date(w).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}):""};return Ot.useEffect(()=>{if(!t)return;const E=ql(Gs(pi,`chatRooms/${t}/messages`),IA("timestamp")),w=Rh(E,b=>{const B=b.docs.map(J=>({id:J.id,...J.data()}));s(B),[...new Set(B.map(J=>J.uid))].forEach(J=>{o[J]||Rh(_u(pi,"users",J),Q=>{Q.exists()&&u(nt=>({...nt,[J]:Q.data()}))})})});return()=>w()},[t]),Ot.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[n]),G.jsxs("div",{className:Gn.chat_container,children:[G.jsxs("div",{className:Gn.messages,children:[n.map((E,w)=>{const b=n[w-1],B=6e4,F=nt=>nt?.toMillis?nt.toMillis():nt,J=!b||E.uid!==b.uid||F(E.timestamp)-F(b.timestamp)>B,Q=o[E.uid]||{};return G.jsxs("div",{className:`${Gn.message} ${E.uid===r.uid?Gn.own:""}`,children:[J&&G.jsx("div",{className:Gn.meta,children:E.uid===r.uid?G.jsxs(G.Fragment,{children:[G.jsx("span",{className:Gn.username,children:Q.displayName||"Unknown"}),G.jsx("img",{className:Gn.avatar,src:Q.photoURL||"",alt:Q.displayName||"User"})]}):G.jsxs(G.Fragment,{children:[G.jsx("img",{className:Gn.avatar,src:Q.photoURL||"",alt:Q.displayName||"User"}),G.jsx("span",{className:Gn.username,children:Q.displayName||"Unknown"})]})}),m===E.id&&G.jsx("div",{className:Gn.timestamp,children:_(E.timestamp)}),G.jsxs("div",{children:[E.imageUrl&&G.jsx("img",{className:Gn.image,src:E.imageUrl,alt:"sent",onClick:()=>g(nt=>nt===E.id?null:E.id)}),E.text&&G.jsx("p",{onClick:()=>g(nt=>nt===E.id?null:E.id),children:E.text})]})]},E.id)}),G.jsx("div",{ref:f})]}),G.jsx(EM,{user:r,roomId:t})]})}function AM(){const[r,t]=Ot.useState(null),[n,s]=Ot.useState(null),[o,u]=Ot.useState(!0),[f,m]=Ot.useState(!0);return Ot.useEffect(()=>{const g=yR(Ks,_=>{t(_),u(!1)});return()=>g()},[]),o?G.jsx(sO,{}):r?G.jsx(G.Fragment,{children:G.jsxs("div",{className:`app-split ${f?"with-sidebar":"full"}`,children:[G.jsx(tM,{user:r,selectedRoom:n,onJoinRoom:s,onLogout:()=>vR(Ks),isOpen:f,setIsOpen:m}),n?G.jsx(TM,{user:r,roomId:n.id}):G.jsx("div",{className:"chat-placeholder",children:"Select a room"})]})}):G.jsx(hO,{onAuth:t})}P1.createRoot(document.getElementById("root")).render(G.jsx(Ot.StrictMode,{children:G.jsx(AM,{})}));
